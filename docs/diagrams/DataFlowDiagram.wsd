@startuml DataFlowDiagram
' ============================================================================
' TaijiFlow AI - Data Flow Diagram (Activity Swimlane Style)
' ============================================================================
' ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: DFD Level 1
' ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: 2026-01-09
' ============================================================================

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent

' === Style ===
skinparam swimlane {
    BorderColor #666666
    TitleFontSize 14
}

skinparam activity {
    BackgroundColor #FFFDE7
    BorderColor #424242
}

' ============================================================================
' INPUT LANE
' ============================================================================

|#E3F2FD| üì• INPUT |
start
:üë§ **User**
Webcam Stream;

:1.0 Capture
Video Frame;

:2.0 Detect Pose
(MediaPipe)
--
33 Landmarks;

' ============================================================================
' PROCESSING LANE
' ============================================================================

|#FFF3E0| ‚öôÔ∏è PROCESSING |

if (First time?) then (yes)
    :3.0 Calibrate
    T-Pose Detection;
    
    :((D1)) Calibration Data
    armLength, shoulderWidth
    torsoHeight;
endif

:4.0 Analyze
8 Heuristics Rules
--
Input: Landmarks + D1 + Ghost;

:((D2)) Feedbacks Buffer
rule, severity, message;

:5.0 Calculate Score
--
Score = Correct/Total √ó 100
Grade = A,B,C,D,F;

' ============================================================================
' OUTPUT LANE
' ============================================================================

|#E8F5E9| üì§ OUTPUT |

fork
    :6.0 Render Canvas
    --
    Skeleton + Path + Ghost;
    :üñ•Ô∏è Visual Output;
fork again
    :7.0 Play Audio
    --
    TTS Feedback;
    :üîä Audio Output;
end fork

:üë§ **User receives**
- Canvas Overlay
- Audio Feedback  
- Score & Grade;

stop

' ============================================================================
' LEGEND
' ============================================================================

legend bottom
  |= Lane |= ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |= Processes |
  | üì• INPUT | ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• | 1.0-2.0 |
  | ‚öôÔ∏è PROCESSING | ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• AI | 3.0-5.0 |
  | üì§ OUTPUT | ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå | 6.0-7.0 |
  --
  ((D1)), ((D2)) = Data Stores
endlegend

@enduml
