# TaijiFlow AI - Software Design Document (SDD)

**Version:** 1.0  
**Last Updated:** 2026-01-09  
**Status:** Final  
**Standard:** ISO/IEC 29110

---

## à¸ªà¸²à¸£à¸šà¸±à¸

1. [à¸šà¸—à¸™à¸³ (Introduction)](#1-à¸šà¸—à¸™à¸³-introduction)
2. [à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ (Architectural Design)](#2-à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡-architectural-design)
3. [à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¹‚à¸¡à¸”à¸¹à¸¥ (Module Design)](#3-à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¹‚à¸¡à¸”à¸¹à¸¥-module-design)
4. [à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Data Design)](#4-à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥-data-design)
5. [à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸ªà¹ˆà¸§à¸™à¸•à¹ˆà¸­à¸›à¸£à¸°à¸ªà¸²à¸™ (Interface Design)](#5-à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸ªà¹ˆà¸§à¸™à¸•à¹ˆà¸­à¸›à¸£à¸°à¸ªà¸²à¸™-interface-design)
6. [à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸š User Interface (UI Design)](#6-à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸š-user-interface-ui-design)
7. [UML Diagrams](#7-uml-diagrams)
8. [Design Patterns](#8-design-patterns)
9. [Error Handling](#9-error-handling)
10. [Security Considerations](#10-security-considerations)
11. [Traceability Matrix (SRS â†’ SDD)](#11-traceability-matrix-srs--sdd)
12. [à¸ à¸²à¸„à¸œà¸™à¸§à¸ (Appendix)](#12-à¸ à¸²à¸„à¸œà¸™à¸§à¸-appendix)

---

## 1. à¸šà¸—à¸™à¸³ (Introduction)

### 1.1 à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ (Purpose)

à¹€à¸­à¸à¸ªà¸²à¸£à¸‰à¸šà¸±à¸šà¸™à¸µà¹‰à¸­à¸˜à¸´à¸šà¸²à¸¢à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸‹à¸­à¸Ÿà¸•à¹Œà¹à¸§à¸£à¹Œà¸‚à¸­à¸‡à¸£à¸°à¸šà¸š TaijiFlow AI à¸‹à¸¶à¹ˆà¸‡à¹€à¸›à¹‡à¸™à¸£à¸°à¸šà¸šà¸à¸¶à¸à¸—à¹ˆà¸²à¸¡à¹‰à¸§à¸™à¹„à¸«à¸¡ (Silk Reeling) à¸‚à¸­à¸‡à¸¡à¸§à¸¢à¹„à¸—à¹‰à¹€à¸à¹Šà¸à¸œà¹ˆà¸²à¸™à¹€à¸§à¹‡à¸šà¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œà¹‚à¸”à¸¢à¹ƒà¸Šà¹‰ AI à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸—à¹ˆà¸²à¸—à¸²à¸‡à¹à¸¥à¸°à¹ƒà¸«à¹‰à¸„à¸³à¹à¸™à¸°à¸™à¸³à¹à¸šà¸š Real-time

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸£à¸°à¸šà¸¸:
- à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š (System Architecture)
- à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¹‚à¸¡à¸”à¸¹à¸¥ (Module Design)
- à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Data Flow)
- à¸ªà¹ˆà¸§à¸™à¸•à¹ˆà¸­à¸›à¸£à¸°à¸ªà¸²à¸™ (Interfaces)
- à¸£à¸¹à¸›à¹à¸šà¸šà¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸š (Design Patterns)

### 1.2 à¸‚à¸­à¸šà¹€à¸‚à¸• (Scope)

| à¸«à¸±à¸§à¸‚à¹‰à¸­ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|-------|-----------|
| **à¸Šà¸·à¹ˆà¸­à¸£à¸°à¸šà¸š** | TaijiFlow AI |
| **à¸›à¸£à¸°à¹€à¸ à¸—** | Single Page Web Application |
| **à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡** | Client-Side Only (Static Hosting) |
| **à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸«à¸¥à¸±à¸** | HTML5, CSS3, JavaScript (ES6+) |

### 1.3 à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡ (References)

| à¹€à¸­à¸à¸ªà¸²à¸£ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|--------|-----------|
| **SRS.md** | Software Requirements Specification v3.0 |
| **ARCHITECTURE.md** | System Architecture Documentation |
| **MODULE_DEPENDENCIES.md** | Module Dependencies Matrix |
| **UML Diagrams** | 15 à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸™ `/docs/diagrams/` |

### 1.4 à¸„à¸³à¸¨à¸±à¸à¸—à¹Œà¹€à¸‰à¸à¸²à¸° (Definitions)

| à¸„à¸³à¸¨à¸±à¸à¸—à¹Œ | à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢ |
|--------|----------|
| **Silk Reeling** | à¸—à¹ˆà¸²à¸¡à¹‰à¸§à¸™à¹„à¸«à¸¡ - à¸—à¹ˆà¸²à¸à¸·à¹‰à¸™à¸à¸²à¸™à¸‚à¸­à¸‡à¸¡à¸§à¸¢à¹„à¸—à¹‰à¹€à¸à¹Šà¸à¸ªà¸à¸¸à¸¥à¹€à¸‰à¸´à¸™ |
| **Landmark** | à¸ˆà¸¸à¸”à¸à¸´à¸à¸±à¸”à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸—à¸µà¹ˆà¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¹‚à¸”à¸¢ MediaPipe (33 à¸ˆà¸¸à¸”) |
| **Calibration** | à¸à¸²à¸£à¸›à¸£à¸±à¸šà¹€à¸—à¸µà¸¢à¸šà¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢à¸”à¹‰à¸§à¸¢à¸—à¹ˆà¸² T-Pose |
| **Heuristics** | à¸à¸à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸—à¹ˆà¸²à¸—à¸²à¸‡à¸•à¸²à¸¡à¸«à¸¥à¸±à¸à¹„à¸—à¹‰à¹€à¸à¹Šà¸ 8 à¸‚à¹‰à¸­ |
| **Ghost Overlay** | à¹€à¸‡à¸²à¸„à¸£à¸¹à¸œà¸¹à¹‰à¸ªà¸­à¸™à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¸‹à¹‰à¸­à¸™à¸šà¸™à¸«à¸™à¹‰à¸²à¸ˆà¸­ |

---

## 2. à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ (Architectural Design)

### 2.1 à¸ à¸²à¸à¸£à¸§à¸¡à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ (Architecture Overview)

TaijiFlow AI à¹ƒà¸Šà¹‰ **Client-Side Architecture** à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸šà¸™à¹€à¸šà¸£à¸²à¸§à¹Œà¹€à¸‹à¸­à¸£à¹Œ à¹„à¸¡à¹ˆà¸¡à¸µ Backend Server

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TaijiFlow AI Architecture                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Browser    â”‚    â”‚   Webcam     â”‚    â”‚   Speaker    â”‚       â”‚
â”‚  â”‚   (Chrome)   â”‚    â”‚   (720p+)    â”‚    â”‚   (Audio)    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                   â”‚                   â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                    Web Application                    â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚  â”‚  â”‚              Presentation Layer                 â”‚ â”‚       â”‚
â”‚  â”‚  â”‚   [UI Manager] [Drawing Manager] [Chatbot]      â”‚ â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚  â”‚  â”‚             Business Logic Layer                â”‚ â”‚       â”‚
â”‚  â”‚  â”‚  [Heuristics] [Calibration] [Scoring] [Gesture] â”‚ â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚  â”‚  â”‚                 Data Layer                      â”‚ â”‚       â”‚
â”‚  â”‚  â”‚  [Session] [Exporter] [Translations] [Storage]  â”‚ â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                          â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                   External APIs (CDN)                 â”‚       â”‚
â”‚  â”‚  [MediaPipe Pose] [MediaPipe Gesture] [Gemini API]   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Layer Architecture (4 Layers)

| Layer | à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ | Modules |
|-------|--------|---------|
| **Presentation** | à¹à¸ªà¸”à¸‡à¸œà¸¥ UI, à¸£à¸±à¸š input, à¸§à¸²à¸” Canvas | ui_manager, drawing_manager, chatbot, tutorial_manager |
| **Business Logic** | à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¸«à¸¥à¸±à¸, à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸—à¹ˆà¸² | script.js, heuristics_engine, calibration_manager, scoring_manager |
| **Data** | à¸ˆà¸±à¸”à¸à¸²à¸£à¸‚à¹‰à¸­à¸¡à¸¹à¸¥, Session, Export | session_manager, data_exporter, translations |
| **External APIs** | à¸šà¸£à¸´à¸à¸²à¸£à¸ à¸²à¸¢à¸™à¸­à¸ | MediaPipe Pose, MediaPipe Gesture, Gemini API |

**à¸«à¸¥à¸±à¸à¸à¸²à¸£:** à¹à¸•à¹ˆà¸¥à¸° Layer à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸à¸±à¸š Layer à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸•à¸´à¸”à¸à¸±à¸™à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ (Loose Coupling)

> ğŸ“ **UML Diagram:** à¸”à¸¹ [LayerArchitecture.wsd](../diagrams/LayerArchitecture.wsd)

### 2.3 Technology Stack

#### 2.3.1 Frontend Technologies

| Technology | Version | Purpose |
|------------|:-------:|---------|
| **HTML5** | - | Page Structure |
| **CSS3** | - | Styling |
| **JavaScript** | ES6+ | Core Logic (22 modules) |
| **TailwindCSS** | 3.x | Utility CSS Framework |
| **Google Fonts** | - | Sarabun Thai Font |

#### 2.3.2 AI / Machine Learning

| Technology | Version | Purpose |
|------------|:-------:|---------|
| **MediaPipe Pose** | @latest | Pose Detection (33 landmarks) |
| **MediaPipe Tasks Vision** | @0.10.8 | Hand Gesture Recognition (ğŸ‘âœŠ) |
| **Gemini API** | - | AI Chatbot (Optional) |

#### 2.3.3 Browser APIs

| API | Purpose |
|-----|---------|
| **Canvas API** | à¸§à¸²à¸” Skeleton, Path, Trail, Ghost |
| **Web Speech API** | Text-to-Speech à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸•à¸·à¸­à¸™ |
| **LocalStorage API** | à¸šà¸±à¸™à¸—à¸¶à¸ Calibration, Settings |
| **Fullscreen API** | à¹‚à¸«à¸¡à¸”à¹€à¸•à¹‡à¸¡à¸ˆà¸­ |
| **Fetch API** | à¸ªà¹ˆà¸‡ Bug Report |

### 2.4 File Structure

```
TaijiFlow/
â”œâ”€â”€ ğŸ“„ index.html                    # Landing Page (Entry Point)
â”œâ”€â”€ ğŸ“„ app.html                      # Training Application (Main App)
â”œâ”€â”€ ğŸ“„ data_collector.html           # à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Reference
â”‚
â”œâ”€â”€ ğŸ“ css/                          # Stylesheets (4 files)
â”‚   â”œâ”€â”€ styles.css                   # Main Styles (App)
â”‚   â”œâ”€â”€ landing.css                  # Landing Page Styles
â”‚   â”œâ”€â”€ chatbot.css                  # Chatbot Popup Styles
â”‚   â””â”€â”€ feedback.css                 # Feedback Modal Styles
â”‚
â”œâ”€â”€ ğŸ“ js/                           # JavaScript Modules (22 files)
â”‚   â”œâ”€â”€ script.js                    # Main Controller (~72KB)
â”‚   â”œâ”€â”€ heuristics_engine.js         # 8 Rules Analysis (~51KB)
â”‚   â”œâ”€â”€ calibration_manager.js       # T-Pose Calibration (~15KB)
â”‚   â”œâ”€â”€ scoring_manager.js           # Score Calculation (~11KB)
â”‚   â”œâ”€â”€ drawing_manager.js           # Canvas Rendering (~25KB)
â”‚   â”œâ”€â”€ ghost_manager.js             # Instructor Overlay (~8KB)
â”‚   â”œâ”€â”€ silhouette_manager.js        # User Silhouette (~3KB)
â”‚   â”œâ”€â”€ ui_manager.js                # Theme, Notifications (~41KB)
â”‚   â”œâ”€â”€ audio_manager.js             # Text-to-Speech (~31KB)
â”‚   â”œâ”€â”€ score_popup_manager.js       # Result Popup (~7KB)
â”‚   â”œâ”€â”€ tutorial_manager.js          # Tutorial Popup (~30KB)
â”‚   â”œâ”€â”€ gesture_manager.js           # Hand Control (~14KB)
â”‚   â”œâ”€â”€ feedback_manager.js          # Bug Report (~4KB)
â”‚   â”œâ”€â”€ chatbot.js                   # Gemini AI Chatbot (~26KB)
â”‚   â”œâ”€â”€ rules_config_manager.js      # Settings UI (~12KB)
â”‚   â”œâ”€â”€ display_controller.js        # Display Options (~7KB)
â”‚   â”œâ”€â”€ keyboard_controller.js       # Keyboard Shortcuts (~9KB)
â”‚   â”œâ”€â”€ data_exporter.js             # Export JSON/CSV (~8KB)
â”‚   â”œâ”€â”€ path_generator.js            # Dynamic Path (~5KB)
â”‚   â”œâ”€â”€ session_manager.js           # User/Session ID (~5KB)
â”‚   â”œâ”€â”€ translations.js              # i18n TH/EN (~23KB)
â”‚   â””â”€â”€ silk-animation.js            # Landing Animation (~7KB)
â”‚
â”œâ”€â”€ ğŸ“ data/                         # Reference Data
â”‚   â”œâ”€â”€ {exercise}.json              # Ghost landmarks
â”‚   â”œâ”€â”€ {exercise}.webm              # Instructor video
â”‚   â””â”€â”€ {exercise}_silhouette.webm   # Silhouette video
â”‚
â””â”€â”€ ğŸ“ docs/                         # Documentation
    â”œâ”€â”€ diagrams/                    # UML Diagrams (15 files)
    â”œâ”€â”€ srs/SRS.md                   # Requirements
    â””â”€â”€ sdd/SDD.md                   # This file
```

#### File Statistics

| Category | Files | Total Size |
|----------|:-----:|:----------:|
| Core Managers | 3 | ~77 KB |
| Display Managers | 3 | ~36 KB |
| UI Managers | 8 | ~165 KB |
| Controllers | 2 | ~16 KB |
| Utilities | 4 | ~41 KB |
| Main Controller | 1 | ~72 KB |
| Landing Page | 1 | ~7 KB |
| **Total JS** | **22** | **~414 KB** |

---

## 3. à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¹‚à¸¡à¸”à¸¹à¸¥ (Module Design)

### 3.1 Module Overview

à¸£à¸°à¸šà¸šà¸›à¸£à¸°à¸à¸­à¸šà¸”à¹‰à¸§à¸¢ 22 JavaScript modules à¹à¸šà¹ˆà¸‡à¹€à¸›à¹‡à¸™ 6 à¸à¸¥à¸¸à¹ˆà¸¡:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        script.js                                 â”‚
â”‚                     (Main Controller)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Core Managers                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Heuristics    â”‚ â”‚ Calibration   â”‚ â”‚   Scoring     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  Engine       â”‚ â”‚   Manager     â”‚ â”‚   Manager     â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Display Managers                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   Drawing     â”‚ â”‚    Ghost      â”‚ â”‚  Silhouette   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   Manager     â”‚ â”‚   Manager     â”‚ â”‚   Manager     â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     UI Managers                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚   UI    â”‚ â”‚  Audio  â”‚ â”‚ Score   â”‚ â”‚Tutorial â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ Manager â”‚ â”‚ Manager â”‚ â”‚ Popup   â”‚ â”‚ Manager â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚ Gesture â”‚ â”‚Feedback â”‚ â”‚ Chatbot â”‚ â”‚ Rules   â”‚        â”‚   â”‚
â”‚  â”‚  â”‚ Manager â”‚ â”‚ Manager â”‚ â”‚         â”‚ â”‚ Config  â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Controllers                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚ Display Controllerâ”‚ â”‚ Keyboard Controllerâ”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       Utilities                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚  Data   â”‚ â”‚  Path   â”‚ â”‚ Session â”‚ â”‚ Trans-  â”‚        â”‚   â”‚
â”‚  â”‚  â”‚Exporter â”‚ â”‚Generatorâ”‚ â”‚ Manager â”‚ â”‚ lations â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ“ **UML Diagram:** à¸”à¸¹ [ClassDiagram.wsd](../diagrams/ClassDiagram.wsd)

### 3.2 Core Managers

#### 3.2.1 HeuristicsEngine

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸—à¹ˆà¸²à¸—à¸²à¸‡à¸•à¸²à¸¡à¸«à¸¥à¸±à¸à¹„à¸—à¹‰à¹€à¸à¹Šà¸ 8 à¸à¸

```javascript
class HeuristicsEngine {
    // Configuration
    - CONFIG: object           // à¸„à¹ˆà¸²à¸„à¸‡à¸—à¸µà¹ˆ (thresholds, weights)
    - calibrationData: object  // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ T-Pose
    - RULES_CONFIG: object     // à¸à¸à¹à¸•à¹ˆà¸¥à¸°à¸£à¸°à¸”à¸±à¸š
    
    // Methods
    + analyze(landmarks): Feedback[]     // à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸—à¹ˆà¸²à¸—à¸²à¸‡
    + setCalibration(data)               // à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² calibration
    + updateRuleConfig(level)            // à¸­à¸±à¸›à¹€à¸”à¸•à¸à¸à¸•à¸²à¸¡à¸£à¸°à¸”à¸±à¸š
    
    // 8 Rules (Private Methods)
    - checkPathShape()        // Rule 1: à¸£à¸¹à¸›à¸—à¸£à¸‡à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡
    - checkArmRotation()      // Rule 2: à¸à¸²à¸£à¸«à¸¡à¸¸à¸™à¹à¸‚à¸™
    - checkElbowSinking()     // Rule 3: à¸¨à¸­à¸à¸ˆà¸¡
    - checkWaistInitiation()  // Rule 4: à¹€à¸­à¸§à¸™à¸³
    - checkVerticalStability()// Rule 5: à¸„à¸§à¸²à¸¡à¸¡à¸±à¹ˆà¸™à¸„à¸‡
    - checkSmoothness()       // Rule 6: à¸„à¸§à¸²à¸¡à¸™à¸¸à¹ˆà¸¡à¸™à¸§à¸¥
    - checkContinuity()       // Rule 7: à¸„à¸§à¸²à¸¡à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡
    - checkWeightShift()      // Rule 8: à¸–à¹ˆà¸²à¸¢à¸™à¹‰à¸³à¸«à¸™à¸±à¸
}
```

**8 Heuristic Rules:**

| Rule ID | à¸Šà¸·à¹ˆà¸­à¸à¸ | à¸«à¸¥à¸±à¸à¸à¸²à¸£ | à¸£à¸°à¸”à¸±à¸šà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰ |
|:-------:|--------|--------|:----------:|
| R-01 | Path Shape | à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸¡à¸·à¸­à¹€à¸›à¹‡à¸™à¸§à¸‡à¸£à¸µà¹„à¸¡à¹ˆà¸šà¸´à¸”à¹€à¸šà¸µà¹‰à¸¢à¸§ | L1, L2, L3 |
| R-02 | Arm Rotation | à¸›à¸¥à¸²à¸¢à¹à¸‚à¸™à¸«à¸¡à¸¸à¸™à¸•à¸²à¸¡à¸—à¸´à¸¨à¸—à¸²à¸‡à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸” | L2, L3 |
| R-03 | Elbow Sinking | à¸¨à¸­à¸à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²à¹„à¸«à¸¥à¹ˆà¸•à¸¥à¸­à¸”à¹€à¸§à¸¥à¸² | L1, L2, L3 |
| R-04 | Waist Initiation | à¹€à¸­à¸§à¸™à¸³à¸à¸²à¸£à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸«à¸§à¸à¹ˆà¸­à¸™à¹à¸‚à¸™ | L3 |
| R-05 | Vertical Stability | à¸¥à¸³à¸•à¸±à¸§à¸•à¸±à¹‰à¸‡à¸•à¸£à¸‡à¹„à¸¡à¹ˆà¹€à¸­à¸µà¸¢à¸‡ | L1, L2, L3 |
| R-06 | Smoothness | à¸„à¸§à¸²à¸¡à¹€à¸£à¹‡à¸§à¸ªà¸¡à¹ˆà¸³à¹€à¸ªà¸¡à¸­ à¹„à¸¡à¹ˆà¸à¸£à¸°à¸•à¸¸à¸ | L2, L3 |
| R-07 | Continuity | à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸«à¸§à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡à¹„à¸¡à¹ˆà¸«à¸¢à¸¸à¸”à¸Šà¸°à¸‡à¸±à¸ | L2, L3 |
| R-08 | Weight Shift | à¸–à¹ˆà¸²à¸¢à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸‹à¹‰à¸²à¸¢-à¸‚à¸§à¸²à¸•à¸²à¸¡à¸ˆà¸±à¸‡à¸«à¸§à¸° | L3 |

#### 3.2.2 CalibrationManager

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸›à¸£à¸±à¸šà¹€à¸—à¸µà¸¢à¸šà¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢à¸”à¹‰à¸§à¸¢à¸—à¹ˆà¸² T-Pose

```javascript
class CalibrationManager {
    // State
    - isActive: boolean
    - level: string           // L1, L2, L3
    - calibrationData: object
    - frameBuffer: array      // 30 frames
    
    // Methods
    + start()                    // à¹€à¸£à¸´à¹ˆà¸¡ calibration
    + cancel()                   // à¸¢à¸à¹€à¸¥à¸´à¸
    + process(landmarks): object // à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¸—à¸¸à¸ frame
    + getCalibrationData()       // à¸”à¸¶à¸‡à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ
    
    // Validation
    - checkVisibility(landmarks) // à¸•à¸£à¸§à¸ˆà¸§à¹ˆà¸²à¹€à¸«à¹‡à¸™à¸„à¸£à¸š
    - checkTPose(landmarks)      // à¸•à¸£à¸§à¸ˆà¸—à¹ˆà¸² T-Pose
    - calculateDimensions()      // à¸„à¸³à¸™à¸§à¸“à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™
}
```

**Calibration Data Structure:**

```javascript
calibrationData = {
    armLength: number,      // à¸„à¸§à¸²à¸¡à¸¢à¸²à¸§à¹à¸‚à¸™ (pixels)
    shoulderWidth: number,  // à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¹„à¸«à¸¥à¹ˆ
    torsoHeight: number,    // à¸„à¸§à¸²à¸¡à¸ªà¸¹à¸‡à¸¥à¸³à¸•à¸±à¸§
    hipWidth: number,       // à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¸ªà¸°à¹‚à¸à¸
    level: string,          // L1, L2, L3
    timestamp: number       // à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆ calibrate
}
```

#### 3.2.3 ScoringManager

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸„à¸³à¸™à¸§à¸“à¸„à¸°à¹à¸™à¸™à¹à¸¥à¸°à¸ªà¸£à¸¸à¸›à¸œà¸¥à¸à¸²à¸£à¸à¸¶à¸

```javascript
class ScoringManager {
    // State
    - isRecording: boolean
    - frameData: array         // à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸¸à¸ frame
    - ruleScores: object       // à¸„à¸°à¹à¸™à¸™à¹à¸•à¹ˆà¸¥à¸°à¸à¸
    
    // Methods
    + start()                        // à¹€à¸£à¸´à¹ˆà¸¡à¸šà¸±à¸™à¸—à¸¶à¸
    + recordFrame(feedbacks)         // à¸šà¸±à¸™à¸—à¸¶à¸à¸œà¸¥ frame
    + getSummary(): ScoreSummary     // à¸ªà¸£à¸¸à¸›à¸œà¸¥
    - calculateGrade(score)          // à¸•à¸±à¸”à¹€à¸à¸£à¸” A-F
    - getTopErrors(n)                // Top N à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”
}
```

**Score Summary Structure:**

```javascript
scoreSummary = {
    overallScore: number,    // 0-100%
    grade: string,           // A, B, C, D, F
    totalFrames: number,     // à¸ˆà¸³à¸™à¸§à¸™ frame à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
    durationSeconds: number, // à¹€à¸§à¸¥à¸²à¸à¸¶à¸
    ruleScores: {
        "R-01": number,      // à¸„à¸°à¹à¸™à¸™à¹à¸•à¹ˆà¸¥à¸°à¸à¸
        "R-02": number,
        // ...
    },
    topErrors: [             // Top 3 à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”
        { rule: "R-03", count: 45, feedback: "à¸¨à¸­à¸à¸ªà¸¹à¸‡à¹€à¸à¸´à¸™à¹„à¸›" }
    ]
}
```

### 3.3 Display Managers

#### 3.3.1 DrawingManager

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸§à¸²à¸”à¸à¸£à¸²à¸Ÿà¸´à¸à¸šà¸™ Canvas (Skeleton, Path, Trail)

```javascript
class DrawingManager {
    // Dependencies
    - ctx: CanvasRenderingContext2D
    - calibrationData: object
    
    // Methods
    + drawSkeleton(landmarks, color)    // à¸§à¸²à¸”à¹‚à¸„à¸£à¸‡à¸à¸£à¸°à¸”à¸¹à¸
    + drawPath(landmarks, exerciseType) // à¸§à¸²à¸”à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡
    + drawTrail(trailHistory)           // à¸§à¸²à¸”à¸£à¸­à¸¢à¸—à¸²à¸‡
    + drawDebugInfo(landmarks)          // à¹à¸ªà¸”à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ debug
    + clear()                           // à¸¥à¹‰à¸²à¸‡ canvas
}
```

**Drawing Order (Z-Index):**

| Order | Layer | Module | Blend Mode |
|:-----:|-------|--------|:----------:|
| 1 | Webcam Video | HTML Video | normal |
| 2 | Silhouette | silhouette_manager | lighten |
| 3 | Ghost Overlay | ghost_manager | lighten |
| 4 | Instructor Video | ghost_manager | normal |
| 5 | Path | drawing_manager | normal |
| 6 | Skeleton | drawing_manager | normal |
| 7 | Trail | drawing_manager | normal |

#### 3.3.2 GhostManager

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¹à¸ªà¸”à¸‡à¹€à¸‡à¸²à¸„à¸£à¸¹à¸œà¸¹à¹‰à¸ªà¸­à¸™ (Video/Skeleton)

```javascript
class GhostManager {
    // State
    - isVisible: boolean
    - referenceData: object[]  // Ghost landmarks
    - videoElement: HTMLVideoElement
    
    // Methods
    + loadReference(exerciseId)      // à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
    + show() / hide()                // à¹à¸ªà¸”à¸‡/à¸‹à¹ˆà¸­à¸™
    + drawGhost(ctx, frameIndex)     // à¸§à¸²à¸” skeleton
    + syncWithVideo(currentTime)     // sync à¸à¸±à¸šà¸§à¸´à¸”à¸µà¹‚à¸­
}
```

### 3.4 Controllers

#### 3.4.1 DisplayController

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸ˆà¸±à¸”à¸à¸²à¸£ Display Options 6 à¸£à¸¹à¸›à¹à¸šà¸š

```javascript
class DisplayController {
    // Display Options
    - showGhostOverlay: boolean   // à¹€à¸‡à¸²à¸„à¸£à¸¹
    - showPath: boolean           // à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡
    - showSkeleton: boolean       // à¹‚à¸„à¸£à¸‡à¸à¸£à¸°à¸”à¸¹à¸
    - showSilhouette: boolean     // à¹€à¸‡à¸²à¸œà¸¹à¹‰à¸à¸¶à¸
    - showTrail: boolean          // à¸£à¸­à¸¢à¸—à¸²à¸‡
    - trailHistory: array         // à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸ˆà¸¸à¸”
    
    // Methods
    + init()                      // Initialize checkboxes
    + toggleInstructor(show)      // à¹à¸ªà¸”à¸‡/à¸‹à¹ˆà¸­à¸™ instructor
    + resetToDefaults()           // à¸£à¸µà¹€à¸‹à¹‡à¸•à¸„à¹ˆà¸² default
    + addTrailPoint(x, y)         // à¹€à¸à¸´à¹ˆà¸¡à¸ˆà¸¸à¸” trail
    + clearTrail()                // à¸¥à¹‰à¸²à¸‡ trail
}
```

#### 3.4.2 KeyboardController

**à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ:** à¸ˆà¸±à¸”à¸à¸²à¸£ Keyboard Shortcuts 14 à¸›à¸¸à¹ˆà¸¡

| Key | Action | Module |
|:---:|--------|--------|
| `Space` | Start/Stop Training | script.js |
| `R` | Reset Calibration | calibration_manager |
| `G` | Toggle Ghost | ghost_manager |
| `P` | Toggle Path | drawing_manager |
| `S` | Toggle Skeleton | drawing_manager |
| `T` | Toggle Trail | drawing_manager |
| `I` | Toggle Instructor | ghost_manager |
| `F` | Toggle Fullscreen | Browser API |
| `M` | Toggle Mute | audio_manager |
| `D` | Toggle Dark Mode | ui_manager |
| `L` | Toggle Language | translations |
| `H` | Toggle Debug | drawing_manager |
| `?` | Show Shortcuts | keyboard_controller |
| `Esc` | Cancel/Close | script.js |

---

## 4. à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (Data Design)

### 4.1 Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Webcam  â”‚â”€â”€â”€â–¶â”‚ MediaPipe    â”‚â”€â”€â”€â–¶â”‚ 33 Landmarks    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Pose         â”‚    â”‚ (x, y, z, vis)  â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                                           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Calibration   â”‚                           â”‚  Heuristics   â”‚
            â”‚ Manager       â”‚                           â”‚  Engine       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                           â”‚
                    â–¼                                           â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ calibration   â”‚                           â”‚ feedbacks[]   â”‚
            â”‚ Data          â”‚                           â”‚               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                                    â–¼                                   â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Scoring       â”‚                   â”‚ UI Manager    â”‚
                            â”‚ Manager       â”‚                   â”‚ (Display)     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Data Structures

#### 4.2.1 Pose Landmark

```javascript
landmark = {
    x: number,          // 0.0 - 1.0 (normalized)
    y: number,          // 0.0 - 1.0 (normalized)
    z: number,          // à¸„à¸§à¸²à¸¡à¸¥à¸¶à¸ (à¸„à¹ˆà¸²à¸¥à¸š = à¹ƒà¸à¸¥à¹‰à¸à¸¥à¹‰à¸­à¸‡)
    visibility: number  // 0.0 - 1.0 (confidence)
}
```

**33 Landmark Points:**

| Index | Name | Index | Name |
|:-----:|------|:-----:|------|
| 0 | nose | 17 | right_pinky |
| 11 | left_shoulder | 18 | left_index |
| 12 | right_shoulder | 19 | right_index |
| 13 | left_elbow | 20 | left_thumb |
| 14 | right_elbow | 21 | right_thumb |
| 15 | left_wrist | 23 | left_hip |
| 16 | right_wrist | 24 | right_hip |

#### 4.2.2 Feedback Object

```javascript
feedback = {
    rule: string,       // "R-01" - "R-08"
    type: string,       // "error", "warning", "info"
    message: string,    // à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸•à¸·à¸­à¸™
    landmark: string,   // à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸œà¸´à¸” (optional)
    severity: number    // 1-3 (à¸„à¸§à¸²à¸¡à¸£à¸¸à¸™à¹à¸£à¸‡)
}
```

#### 4.2.3 Reference Data (JSON)

```javascript
// data/rh_cw_L1.json
referenceData = {
    exerciseId: "rh_cw_L1",
    exerciseName: "Right Hand Clockwise Level 1",
    frames: [
        {
            frameIndex: 0,
            landmarks: [ /* 33 landmarks */ ],
            timestamp: 0.0
        },
        // ... ~600 frames (20 seconds @ 30fps)
    ],
    metadata: {
        duration: 20.0,
        fps: 30,
        totalFrames: 600
    }
}
```

### 4.3 Storage Design

#### 4.3.1 LocalStorage Keys

| Key | Data Type | Purpose |
|-----|-----------|---------|
| `taijiflow_calibration` | JSON | à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ calibration |
| `taijiflow_settings` | JSON | à¸„à¹ˆà¸²à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² (theme, language) |
| `taijiflow_session` | JSON | Session ID, User ID |
| `taijiflow_rules_config` | JSON | à¸„à¹ˆà¸²à¸à¸à¸—à¸µà¹ˆà¸›à¸£à¸±à¸šà¹à¸•à¹ˆà¸‡ |

#### 4.3.2 Settings Structure

```javascript
settings = {
    theme: "dark" | "light",
    language: "th" | "en",
    audioEnabled: boolean,
    audioVolume: number,     // 0.0 - 1.0
    displayOptions: {
        showGhost: boolean,
        showPath: boolean,
        showSkeleton: boolean,
        showSilhouette: boolean,
        showTrail: boolean
    }
}
```

---

## 5. à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸ªà¹ˆà¸§à¸™à¸•à¹ˆà¸­à¸›à¸£à¸°à¸ªà¸²à¸™ (Interface Design)

### 5.1 Module Interfaces

#### 5.1.1 script.js (Main Controller)

```javascript
// Entry Point - à¹€à¸£à¸µà¸¢à¸à¸ˆà¸²à¸ app.html
async function initializeApp() {
    await loadMediaPipe();
    initializeManagers();
    setupEventListeners();
    startCamera();
}

// Training Flow
function startTrainingFlow() { }
function endTrainingSession() { }

// MediaPipe Callback
function onResults(results) {
    // à¹€à¸£à¸µà¸¢à¸à¸—à¸¸à¸ frame (~30 fps)
    // results.poseLandmarks = 33 points
}
```

#### 5.1.2 Inter-Module Communication

```javascript
// Pattern: Direct Method Calls
calibrationManager.start();
const feedbacks = heuristicsEngine.analyze(landmarks);
scoringManager.recordFrame(feedbacks);

// Pattern: Event-Based (à¹ƒà¸Šà¹‰à¸à¸±à¸š UI)
document.dispatchEvent(new CustomEvent('languageChange', {
    detail: { language: 'en' }
}));

// Pattern: Callback
audioManager.speak(message, {
    onEnd: () => { /* speaking finished */ }
});
```

### 5.2 External API Interfaces

#### 5.2.1 MediaPipe Pose Landmarker

```javascript
const poseLandmarker = await PoseLandmarker.createFromOptions(vision, {
    baseOptions: {
        modelAssetPath: "pose_landmarker_full.task",
        delegate: "GPU"
    },
    runningMode: "VIDEO",
    numPoses: 1,
    minPoseDetectionConfidence: 0.5,
    minPosePresenceConfidence: 0.5,
    minTrackingConfidence: 0.5
});

// Detect
const results = poseLandmarker.detectForVideo(video, timestamp);
// results.landmarks[0] = 33 NormalizedLandmark
```

#### 5.2.2 MediaPipe Gesture Recognizer

```javascript
const gestureRecognizer = await GestureRecognizer.createFromOptions(vision, {
    baseOptions: {
        modelAssetPath: "gesture_recognizer.task",
        delegate: "GPU"
    },
    runningMode: "VIDEO",
    numHands: 2
});

// Recognize
const results = gestureRecognizer.recognizeForVideo(video, timestamp);
// results.gestures[0][0].categoryName = "Thumb_Up" | "Closed_Fist"
```

#### 5.2.3 Gemini API (Optional)

```javascript
const response = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=${API_KEY}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        contents: [{
            parts: [{ text: userMessage }]
        }],
        systemInstruction: {
            parts: [{ text: SYSTEM_PROMPT }]
        }
    })
});
```

---

## 6. à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸š User Interface (UI Design)

### 6.1 Screen Layout

#### 6.1.1 Landing Page (index.html)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜¯ï¸ TaijiFlow AI    à¸«à¸™à¹‰à¸²à¹à¸£à¸  à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š  à¸„à¸¹à¹ˆà¸¡à¸·à¸­  à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡  [à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¶à¸]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                     [Silk Animation]                             â”‚
â”‚                                                                  â”‚
â”‚                     TaijiFlow AI                                 â”‚
â”‚                 à¸£à¸°à¸šà¸š AI à¹€à¸à¸·à¹ˆà¸­à¸Šà¹ˆà¸§à¸¢à¸à¸¶à¸ Silk Reeling                â”‚
â”‚                                                                  â”‚
â”‚                 [à¹€à¸£à¸´à¹ˆà¸¡à¸à¸²à¸£à¸à¸¶à¸]  [à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹‚à¸„à¸£à¸‡à¸à¸²à¸£]                â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹‚à¸„à¸£à¸‡à¸à¸²à¸£                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ à¸—à¸µà¹ˆà¸¡à¸²     â”‚ â”‚ à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µ  â”‚ â”‚ à¸ˆà¸¸à¸”à¹€à¸”à¹ˆà¸™   â”‚ â”‚ à¸à¸´à¸•à¸•à¸´à¸à¸£à¸£à¸¡ â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“š à¸„à¸¹à¹ˆà¸¡à¸·à¸­à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™                                               â”‚
â”‚     [1] à¹€à¸¥à¸·à¸­à¸à¸—à¹ˆà¸²  â†’  [2] à¹€à¸¥à¸·à¸­à¸à¸£à¸°à¸”à¸±à¸š  â†’  [3] à¸à¸”à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¶à¸          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“š à¹€à¸£à¸µà¸¢à¸™à¸£à¸¹à¹‰à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚ â”‚ à¸§à¸´à¸”à¸µà¹‚à¸­    â”‚ â”‚ à¸«à¸¥à¸±à¸à¸à¸²à¸£   â”‚ â”‚ 8 à¸à¸     â”‚                      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Â© 2026 TaijiFlow AI                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6.1.2 Training Application (app.html)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜¯ï¸ TaijiFlow AI    [Exerciseâ–¼] [Levelâ–¼]  âš™ï¸ ğŸŒ™ â“  [â–¶ à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¶à¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚ â”‚       [Webcam + Canvas Overlay]              â”‚Instructorâ”‚   â”‚ â”‚
â”‚ â”‚                                              â”‚ Video   â”‚    â”‚ â”‚
â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚ â”‚    â”‚  [Start Overlay]            â”‚                         â”‚ â”‚
â”‚ â”‚    â”‚  â˜¯ï¸ à¸à¸£à¹‰à¸­à¸¡à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¶à¸           â”‚                         â”‚ â”‚
â”‚ â”‚    â”‚  -----                      â”‚                         â”‚ â”‚
â”‚ â”‚    â”‚  ğŸ‘ à¸¢à¸à¸‚à¸¶à¹‰à¸™ à¸«à¸£à¸·à¸­ à¸à¸” Space    â”‚                         â”‚ â”‚
â”‚ â”‚    â”‚  âœŠ à¸à¸³à¸¡à¸·à¸­ à¸«à¸£à¸·à¸­ à¸à¸” Esc à¹€à¸à¸·à¹ˆà¸­à¸«à¸¢à¸¸à¸”â”‚                        â”‚ â”‚
â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚  [Silhouette] [Ghost] [Path] [Skeleton] [Trail]            â”‚ â”‚
â”‚ â”‚                                                            â”‚ â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚  â”‚ ğŸ”Š à¸¨à¸­à¸à¸ªà¸¹à¸‡à¹€à¸à¸´à¸™à¹„à¸› - à¸¥à¸­à¸‡à¸«à¸¢à¹ˆà¸­à¸™à¸¨à¸­à¸à¸¥à¸‡à¸­à¸µà¸à¸™à¸´à¸”              â”‚ â”‚ â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Display: â˜‘ï¸Ghost â˜‘ï¸Path â˜‘ï¸Skeleton â˜Silhouette â˜Trail         â”‚
â”‚ Keyboard Shortcuts: Space(Start) G(Ghost) P(Path) S(Skel) ?    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 UI Components

#### 6.2.1 Score Popup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ† à¸ªà¸£à¸¸à¸›à¸œà¸¥à¸à¸²à¸£à¸à¸¶à¸                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚               â­â­â­â­â­                     â”‚
â”‚               à¹€à¸à¸£à¸”: A                        â”‚
â”‚                                             â”‚
â”‚      à¸„à¸°à¹à¸™à¸™à¸£à¸§à¸¡: 92.5%  à¹€à¸§à¸¥à¸²: 02:30           â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ Path Shape 95%  â”‚   â”‚
â”‚  â”‚ â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬› Elbow Sink 90%  â”‚   â”‚
â”‚  â”‚ â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬›â¬› Stability 88%   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  ğŸ“‰ à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸„à¸§à¸£à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡:                       â”‚
â”‚  â€¢ à¸¨à¸­à¸à¸ªà¸¹à¸‡à¹€à¸à¸´à¸™à¹„à¸› (12 à¸„à¸£à¸±à¹‰à¸‡)                  â”‚
â”‚  â€¢ à¹€à¸„à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸«à¸§à¹„à¸¡à¹ˆà¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡ (8 à¸„à¸£à¸±à¹‰à¸‡)          â”‚
â”‚                                             â”‚
â”‚  [ğŸ”„ à¸à¸¶à¸à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡]  [ğŸ“Š à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´]  [âœ• à¸›à¸´à¸”]    â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. UML Diagrams

### 7.1 Diagram Index

| Diagram Type | File | Description |
|--------------|------|-------------|
| **Use Case** | UseCaseDiagram.wsd | 6 Use Cases (UC-01 to UC-06) |
| **Class** | ClassDiagram.wsd | 22 Classes à¹ƒà¸™ 6 Packages |
| **Sequence** | SequenceDiagram_TrainingFlow.wsd | Training Flow à¸«à¸¥à¸±à¸ |
| **Sequence** | SequenceDiagram_RealtimeAnalysis.wsd | Real-time Pose Analysis |
| **Sequence** | SequenceDiagram_Calibration.wsd | Calibration Process |
| **State** | StateDiagram_TrainingSession.wsd | 5 States à¸‚à¸­à¸‡ Training Session |
| **Activity** | ActivityDiagram_UC01.wsd | UC-01: System Settings |
| **Activity** | ActivityDiagram_UC02.wsd | UC-02: Perform Training |
| **Activity** | ActivityDiagram_UC03.wsd | UC-03: View Results |
| **Activity** | ActivityDiagram_UC04.wsd | UC-04: Tutorial |
| **Activity** | ActivityDiagram_UC05.wsd | UC-05: AI Chatbot |
| **Activity** | ActivityDiagram_UC06.wsd | UC-06: Manage Reference Data |
| **Activity** | ActivityDiagram_Heuristics.wsd | 8 Heuristic Rules Flow |
| **Component** | SystemArchitecture.wsd | à¸ à¸²à¸à¸£à¸§à¸¡à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š |
| **Component** | ModuleDependencies.wsd | 22 Modules Dependencies |
| **Component** | LayerArchitecture.wsd | 4-Layer Architecture |
| **Data Flow** | DataFlowDiagram.wsd | à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸£à¸°à¸šà¸š |

### 7.2 Key Diagrams

> ğŸ“ **à¸”à¸¹ UML Diagrams à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸µà¹ˆ:** [/docs/diagrams/](../diagrams/)

#### 7.2.1 Use Case Diagram Overview

```text
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚             TaijiFlow AI System                   â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚                                                   â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                        â”‚  â”‚         Training System (à¸œà¸¹à¹‰à¸à¸¶à¸)             â”‚ â”‚
                        â”‚  â”‚  (UC-01) Calibrate Body                     â”‚ â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚  (UC-02) Perform Training  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
   â”‚  Trainee â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  (UC-03) View Training Results        â”‚      â”‚ â”‚
   â”‚  (à¸œà¸¹à¹‰à¸à¸¶à¸) â”‚        â”‚  â”‚              â–²                       â”‚      â”‚ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚              â”‚<<include>>             â”‚      â”‚ â”‚
                        â”‚  â”‚              â””â”€â”€â”€UC-02â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                        â”‚                                                   â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                        â”‚  â”‚         User Support (à¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™)             â”‚ â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚  (UC-04) View Tutorial                      â”‚ â”‚
   â”‚  Trainee â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  (UC-05) Manage Settings                    â”‚ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                        â”‚                                                   â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                        â”‚  â”‚         Admin Tools (à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥)               â”‚ â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚  (UC-06) Manage Reference Data              â”‚ â”‚
   â”‚  Admin/  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚         (à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¹ˆà¸²à¸•à¹‰à¸™à¹à¸šà¸š)                   â”‚ â”‚
   â”‚Instructorâ”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                                                   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ“ **UML Diagram:** à¸”à¸¹ [UseCaseDiagram.wsd](../diagrams/UseCaseDiagram.wsd)

#### 7.2.2 State Diagram - Training Session

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Training Session States                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  [*] â”€â”€â–¶ â—‹ IDLE                                                 â”‚
â”‚              â”‚                                                   â”‚
â”‚              â”‚ start()                                           â”‚
â”‚              â–¼                                                   â”‚
â”‚          â—‹ CALIBRATING                                          â”‚
â”‚              â”‚                                                   â”‚
â”‚              â”‚ calibration complete                              â”‚
â”‚              â–¼                                                   â”‚
â”‚          â—‹ COUNTDOWN (3-2-1)                                    â”‚
â”‚              â”‚                                                   â”‚
â”‚              â”‚ countdown = 0                                     â”‚
â”‚              â–¼                                                   â”‚
â”‚          â—‹ TRAINING  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚              â”‚                        â”‚                          â”‚
â”‚              â”‚ stop()                 â”‚ restart()                â”‚
â”‚              â–¼                        â”‚                          â”‚
â”‚          â—‹ ENDED â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚              â”‚                                                   â”‚
â”‚              â”‚                                                   â”‚
â”‚              â–¼                                                   â”‚
â”‚            [*]                                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Design Patterns

### 8.1 Patterns Used

| Pattern | Where Used | Purpose |
|---------|------------|---------|
| **Module Pattern** | à¸—à¸¸à¸ Manager classes | Encapsulation - à¹à¸¢à¸ scope |
| **Singleton** | ghostManager, uiManager | Single Instance - à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸ªà¸£à¹‰à¸²à¸‡à¸‹à¹‰à¸³ |
| **Observer** | Event Listeners | Reactive UI - à¸­à¸±à¸›à¹€à¸”à¸•à¹€à¸¡à¸·à¹ˆà¸­ state à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ |
| **Facade** | script.js | Simplify Access - à¸£à¸§à¸¡ dependencies |
| **Factory** | generateDynamicPath() | Create Objects - à¸ªà¸£à¹‰à¸²à¸‡ path à¸•à¸²à¸¡à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™ |
| **Strategy** | HeuristicsEngine rules | Swappable Algorithms - à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¸à¸à¹„à¸”à¹‰ |
| **Controller** | KeyboardController | Separation of Concerns |

### 8.2 Pattern Examples

```javascript
// Singleton Pattern
const ghostManager = new GhostManager();
window.ghostManager = ghostManager;

// Module Pattern
class HeuristicsEngine {
    constructor() {
        this.CONFIG = { /* Private config */ };
    }
    analyze() { /* Public method */ }
}

// Observer Pattern
document.addEventListener('languageChange', () => {
    uiManager.updateAllTexts();
});

// Strategy Pattern
this.RULES_CONFIG = {
    L1: { checkPath: true, checkWaist: false },
    L3: { checkPath: true, checkWaist: true }
};

// Factory Pattern
function generateDynamicPath(calibration, exercise) {
    const { armLength, shoulderWidth } = calibration;
    return createEllipsePath(armLength * 0.8, shoulderWidth * 0.6);
}
```

---

## 9. Error Handling

### 9.1 Error Categories

| Category | Example | Handling |
|----------|---------|----------|
| **Camera Error** | à¹„à¸¡à¹ˆà¸à¸š Webcam | à¹à¸ªà¸”à¸‡ modal à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ + à¸„à¸³à¹à¸™à¸°à¸™à¸³ |
| **MediaPipe Error** | à¹‚à¸«à¸¥à¸” model à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ | Retry 3 à¸„à¸£à¸±à¹‰à¸‡ + fallback message |
| **Network Error** | à¸ªà¹ˆà¸‡ Bug Report à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ | à¹à¸ªà¸”à¸‡ notification + à¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹ƒà¸™ localStorage |
| **Calibration Error** | T-Pose à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ | à¹à¸ªà¸”à¸‡à¸„à¸³à¹à¸™à¸°à¸™à¸³ + à¹ƒà¸«à¹‰à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ |
| **Runtime Error** | JavaScript exception | Log to console + notification |

### 9.2 Error Handling Flow

```javascript
// Global Error Handler
window.onerror = (message, source, lineno, colno, error) => {
    console.error('Global error:', error);
    uiManager.showNotification('à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸” à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ', 'error');
};

// Camera Error
async function startCamera() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({
            video: { width: 1280, height: 720 }
        });
    } catch (error) {
        if (error.name === 'NotAllowedError') {
            showCameraPermissionModal();
        } else if (error.name === 'NotFoundError') {
            showNoCameraModal();
        }
    }
}

// MediaPipe Error
async function loadMediaPipe() {
    for (let attempt = 1; attempt <= 3; attempt++) {
        try {
            await poseLandmarker.createFromOptions(vision, options);
            return;
        } catch (error) {
            if (attempt === 3) {
                uiManager.showNotification('à¹‚à¸«à¸¥à¸” AI Model à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ', 'error');
            }
            await delay(1000 * attempt);
        }
    }
}
```

---

## 10. Security Considerations

### 10.1 Data Privacy

| Data Type | Storage | Privacy |
|-----------|---------|---------|
| **Webcam Video** | Memory only | à¹„à¸¡à¹ˆà¸šà¸±à¸™à¸—à¸¶à¸ à¹„à¸¡à¹ˆà¸ªà¹ˆà¸‡à¸­à¸­à¸ |
| **Pose Landmarks** | Memory only | à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ |
| **Calibration Data** | LocalStorage | à¹€à¸à¹‡à¸šà¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ |
| **Settings** | LocalStorage | à¹€à¸à¹‡à¸šà¹ƒà¸™à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ |
| **Bug Reports** | Google Form | à¸ªà¹ˆà¸‡à¹€à¸‰à¸à¸²à¸°à¹€à¸¡à¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸à¸”à¸ªà¹ˆà¸‡ |

### 10.2 Security Measures

1. **No Server-Side Processing**: à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥à¸šà¸™ Client
2. **No Personal Data Collection**: à¹„à¸¡à¹ˆà¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥
3. **HTTPS Only**: à¸šà¸±à¸‡à¸„à¸±à¸šà¹ƒà¸Šà¹‰ HTTPS à¸ªà¸³à¸«à¸£à¸±à¸š production
4. **Content Security Policy**: à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ XSS attacks
5. **API Key Protection**: Gemini API Key à¹€à¸à¹‡à¸šà¹ƒà¸™ environment variable

### 10.3 API Key Handling

```javascript
// âŒ à¹„à¸¡à¹ˆà¸„à¸§à¸£à¸—à¸³ - API Key à¹ƒà¸™ code
const API_KEY = "AIza...";

// âœ… à¹à¸™à¸°à¸™à¸³ - à¹ƒà¸Šà¹‰ environment variable à¸«à¸£à¸·à¸­ proxy
const API_KEY = import.meta.env.VITE_GEMINI_API_KEY;

// à¸«à¸£à¸·à¸­à¹ƒà¸Šà¹‰ serverless function à¹€à¸›à¹‡à¸™ proxy
const response = await fetch('/api/chat', {
    method: 'POST',
    body: JSON.stringify({ message })
});
```

---

## 11. Traceability Matrix (SRS â†’ SDD)

### 11.1 Functional Requirements to Modules

| F-ID | Requirement | Primary Module | Supporting Modules |
|:----:|-------------|----------------|-------------------|
| F-01 | Body Calibration | calibration_manager.js | script.js, ui_manager.js |
| F-02 | Silk Reeling Training | script.js | heuristics_engine.js, drawing_manager.js |
| F-03 | 8 Rules Analysis | heuristics_engine.js | scoring_manager.js |
| F-04 | Real-time Feedback | audio_manager.js, ui_manager.js | heuristics_engine.js |
| F-05 | Training Result | score_popup_manager.js, scoring_manager.js | - |
| F-06 | Tutorial | tutorial_manager.js | translations.js |
| F-07 | System Settings | ui_manager.js, rules_config_manager.js | LocalStorage |
| F-08 | Display Options | display_controller.js | drawing_manager.js, ghost_manager.js |
| F-09 | Gesture Control | gesture_manager.js | script.js |
| F-10 | AI Chatbot | chatbot.js | Gemini API |
| F-11 | Feedback Report | feedback_manager.js | Google Form |
| F-12 | Reference Data Management | data_collector.html | data_exporter.js |

### 11.2 Non-Functional Requirements to Design

| NFR-ID | Requirement | Design Solution |
|:------:|-------------|-----------------|
| NFR-01 | Response Time < 100ms | Client-side processing, GPU delegate |
| NFR-02 | 30 FPS Minimum | requestAnimationFrame, skip frames if needed |
| NFR-03 | Works Offline (after load) | All resources cached, no server dependency |
| NFR-04 | Thai/English Support | translations.js with 200+ keys |
| NFR-05 | Dark/Light Theme | CSS variables, localStorage persistence |
| NFR-06 | Privacy | Client-only processing, no data upload |

---

## 12. à¸ à¸²à¸„à¸œà¸™à¸§à¸ (Appendix)

### 12.1 Glossary

| Term | Definition |
|------|------------|
| **Canvas** | HTML5 element à¸ªà¸³à¸«à¸£à¸±à¸šà¸§à¸²à¸”à¸à¸£à¸²à¸Ÿà¸´à¸ 2D |
| **CDN** | Content Delivery Network - à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¸à¸£à¸°à¸ˆà¸²à¸¢à¹€à¸™à¸·à¹‰à¸­à¸«à¸² |
| **Landmark** | à¸ˆà¸¸à¸”à¸à¸´à¸à¸±à¸”à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸•à¹ˆà¸­à¸—à¸µà¹ˆà¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¹‚à¸”à¸¢ AI |
| **MediaPipe** | AI Framework à¸‚à¸­à¸‡ Google à¸ªà¸³à¸«à¸£à¸±à¸š Vision |
| **Pose** | à¸—à¹ˆà¸²à¸—à¸²à¸‡à¸‚à¸­à¸‡à¸£à¹ˆà¸²à¸‡à¸à¸²à¸¢à¸—à¸µà¹ˆà¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¹„à¸”à¹‰ |
| **Skeleton** | à¹‚à¸„à¸£à¸‡à¸à¸£à¸°à¸”à¸¹à¸à¸—à¸µà¹ˆà¸§à¸²à¸”à¸ˆà¸²à¸ landmarks |
| **TTS** | Text-to-Speech - à¹à¸›à¸¥à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¹€à¸ªà¸µà¸¢à¸‡ |

### 12.2 Version History

| Version | Date | Author | Changes |
|:-------:|------|--------|---------|
| 1.0 | 2026-01-09 | TaijiFlow Team | Initial SDD based on ISO 29110 |

### 12.3 Document Approval

| Role | Name | Date | Signature |
|------|------|------|-----------|
| Author | - | 2026-01-09 | - |
| Reviewer | - | - | - |
| Approver | - | - | - |

---

**End of Document**
