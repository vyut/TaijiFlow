<!--
================================================================================
TaijiFlow AI - Main Application (index.html)
================================================================================

‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô TaijiFlow AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ù‡∏∂‡∏Å‡∏ó‡πà‡∏≤‡∏°‡πâ‡∏ß‡∏ô‡πÑ‡∏´‡∏°

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å:
  1. HEAD
    - Meta tags ‡πÅ‡∏•‡∏∞ Favicon
    - Stylesheets (TailwindCSS, Google Fonts, Custom CSS)
    - External Scripts (MediaPipe Pose, Camera, Drawing, Gesture)
    - App Modules (JS files with defer)

  2. BODY
    - Privacy Modal: ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î)
    - Header: ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô
    - Main Card:
      - Top Bar: Dropdowns (Exercise/Level) + Settings (Audio/Language/Theme)
      - Canvas Container: Video + Skeleton + Overlays
      - Control Buttons: Start/Stop Training
      - Instructions (hidden)
    - Hidden Legacy Elements: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö backward compatibility ‡∏Å‡∏±‡∏ö script.js
    - Notification Container: Toast notifications

  3. OVERLAYS (inside Canvas Container)
    - Loading: ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î AI Model
    - Start: ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÅ‡∏™‡∏î‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å)
    - Countdown: 3-2-1 (‡πÅ‡∏™‡∏î‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å)
    - Fullscreen Button: ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á (‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ù‡∏∂‡∏Å)
    - Training Controls: Timer + Stop Button ‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á (‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ù‡∏∂‡∏Å)

Dependencies:
  - MediaPipe: Pose Detection, Camera Utils, Drawing Utils, Gesture Recognition
  - TailwindCSS: Styling (CDN)
  - Google Fonts: Sarabun
  - Custom: css/styles.css, css/chatbot.css

Related Files:
  - js/script.js: Main controller
  - js/translations.js: i18n strings
  - js/ui_manager.js: UI state management

Version: 0.4 (2024-12-17)
================================================================================
-->
<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TaijiFlow AI</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png" />

    <!-- Stylesheets -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/chatbot.css" />
    <link rel="stylesheet" href="css/feedback.css" />

    <!-- MediaPipe -->
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"
      crossorigin="anonymous"
      defer
    ></script>
    <!-- MediaPipe Drawing Utils -->
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
      crossorigin="anonymous"
      defer
    ></script>
    <!-- MediaPipe Pose -->
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"
      crossorigin="anonymous"
      defer
    ></script>
    <!-- MediaPipe Gesture Recognition -->
    <!-- <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/vision_bundle.js"
      crossorigin="anonymous"
      defer
    ></script> -->
    <!-- MediaPipe Selfie Segmentation (for Silhouette) -->
    <script
      src="https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js"
      crossorigin="anonymous"
      defer
    ></script>

    <!-- =========================================================================
        App Modules - ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° Dependencies (‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡∏Å‡πà‡∏≠‡∏ô)
        ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: defer = ‡πÇ‡∏´‡∏•‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏° HTML ‡πÅ‡∏ï‡πà‡∏£‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á DOM ‡∏û‡∏£‡πâ‡∏≠‡∏°
        ========================================================================= -->
    <!-- 1. Core Managers - ‡πÑ‡∏°‡πà‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô -->
    <!-- T-Pose Calibration -->
    <script src="js/calibration_manager.js" defer></script>
    <!-- 8 ‡∏Å‡∏é‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡πà‡∏≤ -->
    <script src="js/heuristics_engine.js" defer></script>
    <!-- ‡∏ß‡∏≤‡∏î Skeleton/Path -->
    <script src="js/drawing_manager.js" defer></script>
    <!-- Export JSON/CSV -->
    <script src="js/data_exporter.js" defer></script>
    <!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏π‡∏î TTS -->
    <script src="js/audio_manager.js" defer></script>
    <!-- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -->
    <script src="js/scoring_manager.js" defer></script>
    <!-- Ghost Overlay -->
    <script src="js/ghost_manager.js" defer></script>
    <!-- Silhouette Overlay -->
    <script src="js/silhouette_manager.js" defer></script>

    <!-- 2. UI/Translation - ‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤ Core Managers -->
    <!-- i18n TH/EN -->
    <script src="js/translations.js" defer></script>
    <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ UI State -->
    <script src="js/ui_manager.js" defer></script>
    <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ UI State -->
    <script src="js/gesture_manager.js" defer></script>
    <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ UI State -->
    <script src="js/tutorial_manager.js" defer></script>
    <!-- Popup Tutorial -->
    <script src="js/chatbot.js" defer></script>
    <!-- Gemini Chatbot -->
    <script src="js/feedback_manager.js" defer></script>
    <!-- Feedback Popup -->

    <!-- 3. Main Controller - ‡∏û‡∏∂‡πà‡∏á‡∏û‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô -->
    <script src="js/script.js" defer></script>
    <!-- Entry Point ‡∏´‡∏•‡∏±‡∏Å -->

    <!-- MediaPipe Tasks Vision for Gesture Recognition (loaded as module) -->
    <script type="module">
      import {
        GestureRecognizer,
        FilesetResolver,
      } from "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8";
      window.GestureRecognizerClass = GestureRecognizer;
      window.FilesetResolverClass = FilesetResolver;
      window.dispatchEvent(new Event("mediapipe-ready"));
    </script>
  </head>
  <body
    class="flex flex-col items-center justify-center min-h-screen p-4 bg-gray-900"
  >
    <!-- Privacy Popup Modal (‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤) -->
    <div
      id="privacy-modal"
      class="fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center p-4"
    >
      <div
        class="bg-gray-800 rounded-xl p-6 max-w-md w-full shadow-2xl border border-purple-500/30"
      >
        <h2
          id="privacy-title"
          class="text-xl font-bold text-purple-400 mb-4 text-center"
        >
          üîí ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        </h2>
        <ul class="text-gray-300 text-sm space-y-3 mb-6">
          <li id="privacy-item1" class="flex items-start gap-2">
            <span class="text-green-400">‚úì</span>
            <span>‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
          </li>
          <li id="privacy-item2" class="flex items-start gap-2">
            <span class="text-green-400">‚úì</span>
            <span>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</span>
          </li>
          <li id="privacy-item3" class="flex items-start gap-2">
            <span class="text-blue-400">‚Ñπ</span>
            <span>Chatbot ‡πÉ‡∏ä‡πâ Gemini API (‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ Google)</span>
          </li>
        </ul>
        <button
          id="privacy-accept-btn"
          class="w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors"
        >
          ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß ‚úì
        </button>
      </div>
    </div>

    <!-- Header -->
    <h1 id="app-title" class="text-3xl font-bold mb-4 text-purple-400">
      TaijiFlow AI: ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ù‡∏∂‡∏Å‡∏°‡∏ß‡∏¢‡πÑ‡∏ó‡πâ‡πÄ‡∏Å‡πä‡∏Å (v0.4)
    </h1>

    <!-- Main Container -->
    <div
      id="main-card"
      class="bg-gray-800 px-6 pt-6 pb-1 rounded-lg shadow-lg text-right w-full max-w-6xl"
    >
      <!-- Top Bar: Selectors + Settings + Timer -->
      <div class="mb-4 flex flex-wrap justify-between items-center gap-4">
        <!-- Left: Dropdowns -->
        <div class="flex gap-4 flex-wrap">
          <!-- Category Dropdown (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏¢‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï) -->
          <div>
            <select
              id="category-select"
              class="px-4 py-2 rounded bg-gray-700 text-white border border-gray-600 focus:border-purple-500 focus:outline-none"
            >
              <option value="" disabled>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà --</option>
              <option value="silk_single" selected>
                ‡∏ó‡πà‡∏≤‡∏°‡πâ‡∏ß‡∏ô‡πÑ‡∏´‡∏° - ‡∏°‡∏∑‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
              </option>
              <option value="silk_double" disabled>‡∏ó‡πà‡∏≤‡∏°‡πâ‡∏ß‡∏ô‡πÑ‡∏´‡∏° - ‡∏™‡∏≠‡∏á‡∏°‡∏∑‡∏≠</option>
            </select>
          </div>
          <!-- Exercise Dropdown -->
          <div>
            <select
              id="exercise-select"
              class="px-4 py-2 rounded bg-gray-700 text-white border border-gray-600 focus:border-purple-500 focus:outline-none"
            >
              <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡∏ù‡∏∂‡∏Å --</option>
              <option value="rh_cw">1. ‡∏°‡∏∑‡∏≠‡∏Ç‡∏ß‡∏≤ - ‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡πá‡∏°</option>
              <option value="rh_ccw">2. ‡∏°‡∏∑‡∏≠‡∏Ç‡∏ß‡∏≤ - ‡∏ó‡∏ß‡∏ô‡πÄ‡∏Ç‡πá‡∏°</option>
              <option value="lh_cw">3. ‡∏°‡∏∑‡∏≠‡∏ã‡πâ‡∏≤‡∏¢ - ‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡πá‡∏°</option>
              <option value="lh_ccw">4. ‡∏°‡∏∑‡∏≠‡∏ã‡πâ‡∏≤‡∏¢ - ‡∏ó‡∏ß‡∏ô‡πÄ‡∏Ç‡πá‡∏°</option>
            </select>
          </div>
          <div>
            <select
              id="level-select"
              class="px-4 py-2 rounded bg-gray-700 text-white border border-gray-600 focus:border-purple-500 focus:outline-none"
            >
              <option value="" disabled selected>-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö --</option>
              <option value="L1">1. ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πà‡∏á</option>
              <option value="L2">2. ‡∏ó‡πà‡∏≤‡∏¢‡∏∑‡∏ô</option>
              <option value="L3">3. ‡∏ó‡πà‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡πà‡∏≠</option>
            </select>
          </div>
          <!-- Display Options Dropdown -->
          <div class="relative" id="display-dropdown-container">
            <button
              id="display-btn"
              class="px-3 py-2 bg-gray-700 text-white border border-gray-600 rounded hover:bg-gray-600 transition-colors"
              title="‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•"
            >
              üëÅÔ∏è
            </button>
            <!-- Dropdown Menu -->
            <div
              id="display-menu"
              class="hidden absolute left-0 mt-2 w-48 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50"
            >
              <div
                class="p-2 text-sm text-center border-b border-gray-600"
                style="color: white"
              >
                Display Option
              </div>
              <!-- 1. Ghost (‡πÄ‡∏á‡∏≤‡∏Ñ‡∏£‡∏π‡∏ù‡∏∂‡∏Å) - Default ON -->
              <label
                class="flex items-center px-3 py-2 hover:bg-gray-700 cursor-pointer"
                title="Show instructor shadow guide"
              >
                <input type="checkbox" id="check-ghost" class="mr-2" checked />
                <span style="color: white">üëª Ghost (G)</span>
              </label>
              <!-- 2. Path (‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á) - Default OFF -->
              <label
                class="flex items-center px-3 py-2 hover:bg-gray-700 cursor-pointer"
                title="Show reference wrist path"
              >
                <input type="checkbox" id="check-path" class="mr-2" />
                <span style="color: white">üü¢ Path (P)</span>
              </label>
              <!-- 3. Skeleton (‡πÇ‡∏Ñ‡∏£‡∏á‡∏ú‡∏π‡πâ‡∏ù‡∏∂‡∏Å) - Default OFF -->
              <label
                class="flex items-center px-3 py-2 hover:bg-gray-700 cursor-pointer"
                title="Show your skeleton overlay"
              >
                <input type="checkbox" id="check-skeleton" class="mr-2" />
                <span style="color: white">ü¶¥ Skeleton (B)</span>
              </label>
              <!-- 4. Silhouette (‡πÄ‡∏á‡∏≤‡∏ú‡∏π‡πâ‡∏ù‡∏∂‡∏Å) - Default OFF -->
              <label
                class="flex items-center px-3 py-2 hover:bg-gray-700 cursor-pointer"
                title="Show your silhouette overlay"
              >
                <input type="checkbox" id="check-silhouette" class="mr-2" />
                <span style="color: white">üé≠ Silhouette (S)</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Right: Settings Buttons -->
        <div class="flex gap-2">
          <!-- Audio Button -->
          <button
            id="audio-btn"
            class="px-3 py-2 bg-green-600 text-white border border-green-700 rounded hover:bg-green-700 transition-colors"
            title="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏π‡∏î"
          >
            üîä
          </button>

          <!-- Language Button -->
          <button
            id="lang-btn"
            class="px-3 py-2 bg-gray-700 text-white border border-gray-600 rounded hover:bg-gray-600 font-bold transition-colors"
          >
            üáπüá≠
          </button>
          <!-- Theme Button -->
          <button
            id="theme-btn"
            class="px-3 py-2 bg-gray-700 text-white border border-gray-600 rounded hover:bg-gray-600 transition-colors"
          >
            üåô
          </button>
          <!-- Tutorial/Help Button -->
          <button
            id="tutorial-btn"
            class="px-3 py-2 bg-gray-700 text-white border border-gray-600 rounded hover:bg-gray-600 transition-colors"
            title="‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å (H)"
          >
            ‚ùì
          </button>
        </div>
      </div>

      <!-- Canvas Container (Full Width) -->
      <div
        class="canvas-container bg-black rounded overflow-hidden shadow-xl mb-6"
      >
        <video
          id="input_video"
          style="display: none"
          autoplay
          playsinline
        ></video>
        <canvas id="output_canvas" width="1280" height="720"></canvas>

        <!-- Loading Overlay -->
        <div
          id="loading-overlay"
          class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-80 text-white text-xl z-20 hidden rounded-lg"
        >
          <div class="flex flex-col items-center">
            <svg
              class="animate-spin h-10 w-10 text-white mb-3"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
            <span id="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏• AI...</span>
          </div>
        </div>

        <!-- Start Overlay (‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô) -->
        <div
          id="start-overlay"
          class="absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-70 z-10 rounded-lg transition-opacity duration-300 p-8"
        >
          <h2
            id="overlay-title"
            class="text-white text-2xl font-bold mb-6 drop-shadow-md"
          >
            üìã ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
          </h2>
          <div class="text-white text-lg text-left space-y-3 max-w-md">
            <p class="flex items-center gap-3">
              <span
                class="bg-purple-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"
                >1</span
              >
              <span id="overlay-step1"
                >‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <strong>"‡∏ó‡πà‡∏≤‡∏ù‡∏∂‡∏Å"</strong> ‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</span
              >
            </p>
            <p class="flex items-center gap-3">
              <span
                class="bg-purple-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"
                >2</span
              >
              <span id="overlay-step2"
                >‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <strong>"‡∏£‡∏∞‡∏î‡∏±‡∏ö"</strong> ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</span
              >
            </p>
            <p class="flex items-center gap-3">
              <span
                class="bg-green-600 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"
                >3</span
              >
              <span id="overlay-step3"
                >‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <strong>"üèÉ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å"</strong></span
              >
            </p>
          </div>
          <p id="overlay-note" class="text-gray-400 mt-6 text-sm text-center">
            ‚è±Ô∏è ‡∏ù‡∏∂‡∏Å‡∏ó‡πà‡∏≤‡∏•‡∏∞ 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‚Ä¢ ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ | üìè
            ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
          </p>
        </div>

        <!-- Countdown Overlay (3-2-1) -->
        <div id="countdown-overlay" class="countdown-overlay hidden">
          <span id="countdown-number" class="countdown-number">3</span>
        </div>

        <!-- Fullscreen Button (‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ù‡∏∂‡∏Å) -->
        <div
          id="fullscreen-overlay-btn"
          class="absolute bottom-4 right-4 z-20 hidden"
        >
          <button
            id="video-fullscreen-btn"
            class="flex items-center gap-2 bg-black bg-opacity-70 px-3 py-2 rounded-full text-white font-bold hover:bg-opacity-90 transition"
            title="‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠"
          >
            ‚õ∂ <span id="fullscreen-btn-text">‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠</span>
          </button>
        </div>

        <!-- Training Timer Overlay (‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ù‡∏∂‡∏Å) -->
        <div
          id="training-controls"
          class="absolute bottom-4 left-4 z-20 hidden"
        >
          <div
            class="flex items-center gap-3 bg-black bg-opacity-70 px-4 py-2 rounded-full"
          >
            <span class="text-white font-bold">‚è±Ô∏è</span>
            <span id="training-timer-overlay" class="text-white font-bold"
              >5:00</span
            >
            <span class="text-gray-400">|</span>
            <button
              id="stop-training-overlay-btn"
              class="text-red-400 hover:text-red-300 font-bold flex items-center gap-1 transition-colors"
              title="‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å"
            >
              üõë <span id="stop-btn-text">‡∏´‡∏¢‡∏∏‡∏î</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Control Buttons (Start/Stop - Separate) -->
      <div class="flex justify-center gap-4 mb-6">
        <button
          id="start-training-btn"
          class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg transition text-lg opacity-50 cursor-not-allowed"
          disabled
        >
          üèÉ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å
        </button>
        <button
          id="stop-training-btn"
          class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg transition text-lg opacity-50 cursor-not-allowed"
          disabled
        >
          ‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å
        </button>
      </div>

      <!-- Instructions (Hidden for now - will add more useful tips later) -->
      <div class="instructions-box p-4 rounded text-left hidden">
        <h3 id="instr-title" class="font-bold mb-2">üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</h3>
        <ul class="list-disc list-inside text-sm space-y-1">
          <li id="instr-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡πà‡∏≤‡∏ù‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å'</li>
          <li id="instr-2">‡∏¢‡∏∑‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏ï‡∏±‡∏ß ‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πâ‡∏≠‡∏á 2-3 ‡πÄ‡∏°‡∏ï‡∏£</li>
          <li id="instr-3">‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å</li>
        </ul>
      </div>
    </div>

    <!-- Hidden Legacy Elements (for script.js compatibility) -->
    <div class="hidden">
      <button id="small-calibrate-btn"></button>
      <button id="cancel-calib-btn"></button>
      <button id="fullscreen-btn"></button>
      <button id="record-btn"></button>
      <div id="level-buttons">
        <button class="level-btn" data-level="L1"></button>
        <button class="level-btn" data-level="L2"></button>
        <button class="level-btn" data-level="L3"></button>
      </div>
    </div>

    <!-- Notification Container -->
    <div
      id="notification-container"
      class="fixed top-5 right-5 z-50 flex flex-col items-end gap-3"
    >
      <!-- Notifications will be injected here by JavaScript -->
    </div>
  </body>
</html>
