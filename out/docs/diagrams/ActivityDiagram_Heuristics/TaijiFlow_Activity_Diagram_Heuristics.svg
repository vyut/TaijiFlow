<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1873px" preserveAspectRatio="none" style="width:780px;height:1873px;" version="1.1" viewBox="0 0 780 1873" width="780px" zoomAndPan="magnify"><defs><filter height="300%" id="f1k4kd2dl2j36y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="382.25" cy="20" fill="#000000" filter="url(#f1k4kd2dl2j36y)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="246" x="259.25" y="50"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="226" x="269.25" y="72.816">รับ Pose Landmarks (33 จุด) จาก MediaPipe</text><path d="M470.75,95.6 L470.75,164.2 L450.75,168.2 L470.75,172.2 L470.75,240.8 A0,0 0 0 0 470.75,240.8 L635.75,240.8 A0,0 0 0 0 635.75,240.8 L635.75,105.6 L625.75,95.6 L470.75,95.6 A0,0 0 0 0 470.75,95.6 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M625.75,95.6 L625.75,105.6 L635.75,105.6 L625.75,95.6 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="131" x="476.75" y="114.484">- Wrist (ข้อมือ) - [15, 16]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="142" x="476.75" y="131.384">- Shoulder (ไหล่) - [11, 12]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="127" x="476.75" y="148.284">- Elbow (ศอก) - [13, 14]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="144" x="476.75" y="165.184">- Thumb (นิ้วโป้ง) - [21, 22]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="136" x="476.75" y="182.084">- Pinky (นิ้วก้อย) - [17, 18]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="125" x="476.75" y="198.984">- Hip (สะโพก) - [23, 24]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="137" x="476.75" y="215.884">- Ankle (ข้อเท้า) - [27, 28]</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="476.75" y="232.784">- Nose (จมูก) - [0]</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="137" x="313.75" y="150.4"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="117" x="323.75" y="173.216">ดึง Keypoints ที่ต้องการ</text><path d="M486.75,250.8 L486.75,327.85 L466.75,331.85 L486.75,335.85 L486.75,412.9 A0,0 0 0 0 486.75,412.9 L715.75,412.9 A0,0 0 0 0 715.75,412.9 L715.75,260.8 L705.75,250.8 L486.75,250.8 A0,0 0 0 0 486.75,250.8 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M705.75,250.8 L705.75,260.8 L715.75,260.8 L705.75,250.8 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="492.75" y="269.684">L1 (นั่ง) - 3 กฎ:</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="197" x="492.75" y="286.584">✓ R1 Path, R3 Elbow, R7 Continuity</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="0" x="495.75" y="303.484"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83" x="492.75" y="320.384">L2 (ยืน) - 6 กฎ:</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="191" x="492.75" y="337.284">✓ R1 Path, R2 Rotation, R3 Elbow,</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="202" x="498.75" y="354.184">R4 Waist, R5 Stability, R7 Continuity</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="0" x="495.75" y="371.084"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="492.75" y="387.984">L3 (ยืนย่อ) - 8 กฎ:</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="205" x="492.75" y="404.884">✓ ทุกกฎ (รวม R6 Smooth, R8 Weight)</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="169" x="297.75" y="314.05"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="149" x="307.75" y="336.866">โหลด Rules Config ตาม Level</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="925.948" style="stroke:#000000;stroke-width:2.0;" width="752.875" x="11" y="422.9"/><path d="M221,422.9 L221,434.1 L211,444.1 L11,444.1 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="200" x="14" y="438.852">ตรวจสอบ 9 กฎ (ตาม Level Config)</text><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="481" y1="461.1" y2="461.1"/><path d="M158,528.348 L158,554.698 L138,558.698 L158,562.698 L158,589.048 A0,0 0 0 0 158,589.048 L317,589.048 A0,0 0 0 0 317,589.048 L317,538.348 L307,528.348 L158,528.348 A0,0 0 0 0 158,528.348 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M307,528.348 L307,538.348 L317,538.348 L307,528.348 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="103" x="164" y="547.232">ตรวจ Wrist History</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="164" y="564.132">ใช้ Cross Product</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="138" x="164" y="581.032">วัด Direction Consistency</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="100" x="38" y="540.898"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="80" x="48" y="563.714">R1: Path Shape</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="44.5,481.1,131.5,481.1,143.5,493.1,131.5,505.1,44.5,505.1,32.5,493.1,44.5,481.1" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="92" y="516.848">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="87" x="44.5" y="497.698">checkPath = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="88,614.198,100,626.198,88,638.198,76,626.198,88,614.198" style="stroke:#A80036;stroke-width:1.5;"/><path d="M163.5,722.348 L163.5,740.248 L143.5,744.248 L163.5,748.248 L163.5,766.148 A0,0 0 0 0 163.5,766.148 L300.5,766.148 A0,0 0 0 0 300.5,766.148 L300.5,732.348 L290.5,722.348 L163.5,722.348 A0,0 0 0 0 163.5,722.348 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M290.5,722.348 L290.5,732.348 L300.5,732.348 L290.5,722.348 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="116" x="169.5" y="741.232">ตรวจ Thumb vs Pinky</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="102" x="169.5" y="758.132">ขึ้น/ลง = หงาย/คว่ำ</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="111" x="32.5" y="726.448"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="91" x="42.5" y="749.264">R2: Arm Rotation</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="35,673.198,141,673.198,153,685.198,141,697.198,35,697.198,23,685.198,35,673.198" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="92" y="708.946">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="106" x="35" y="689.796">checkRotation = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="88,791.298,100,803.298,88,815.298,76,803.298,88,791.298" style="stroke:#A80036;stroke-width:1.5;"/><path d="M164.5,903.798 L164.5,913.248 L144.5,917.248 L164.5,921.248 L164.5,930.698 A0,0 0 0 0 164.5,930.698 L285.5,930.698 A0,0 0 0 0 285.5,930.698 L285.5,913.798 L275.5,903.798 L164.5,903.798 A0,0 0 0 0 164.5,903.798 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M275.5,903.798 L275.5,913.798 L285.5,913.798 L275.5,903.798 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="100" x="170.5" y="922.682">ศอกต้องต่ำกว่าไหล่</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="113" x="31.5" y="899.448"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="93" x="41.5" y="922.264">R3: Elbow Sinking</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="41.5,850.298,134.5,850.298,146.5,862.298,134.5,874.298,41.5,874.298,29.5,862.298,41.5,850.298" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="92" y="886.046">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="93" x="41.5" y="866.896">checkElbow = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="88,960.198,100,972.198,88,984.198,76,972.198,88,960.198" style="stroke:#A80036;stroke-width:1.5;"/><path d="M169,1072.698 L169,1082.148 L149,1086.148 L169,1090.148 L169,1099.598 A0,0 0 0 0 169,1099.598 L307,1099.598 A0,0 0 0 0 307,1099.598 L307,1082.698 L297,1072.698 L169,1072.698 A0,0 0 0 0 169,1072.698 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M297,1072.698 L297,1082.698 L307,1082.698 L297,1072.698 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="117" x="175" y="1091.582">ความเร็วสะโพก &gt; ไหล่</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="122" x="27" y="1068.348"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="102" x="37" y="1091.164">R4: Waist Initiation</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="42,1019.198,134,1019.198,146,1031.198,134,1043.198,42,1043.198,30,1031.198,42,1019.198" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="92" y="1054.946">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="92" x="42" y="1035.796">checkWaist = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="88,1129.098,100,1141.098,88,1153.098,76,1141.098,88,1129.098" style="stroke:#A80036;stroke-width:1.5;"/><path d="M171.5,1241.598 L171.5,1251.048 L151.5,1255.048 L171.5,1259.048 L171.5,1268.498 A0,0 0 0 0 171.5,1268.498 L355.5,1268.498 A0,0 0 0 0 355.5,1268.498 L355.5,1251.598 L345.5,1241.598 L171.5,1241.598 A0,0 0 0 0 171.5,1241.598 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M345.5,1241.598 L345.5,1251.598 L355.5,1251.598 L345.5,1241.598 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="163" x="177.5" y="1260.482">Head Y Variance &lt; Threshold</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="127" x="24.5" y="1237.248"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="107" x="34.5" y="1260.064">R5: Vertical Stability</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="35.5,1188.098,140.5,1188.098,152.5,1200.098,140.5,1212.098,35.5,1212.098,23.5,1200.098,35.5,1188.098" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="92" y="1223.846">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="105" x="35.5" y="1204.696">checkStability = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="88,1292.848,100,1304.848,88,1316.848,76,1304.848,88,1292.848" style="stroke:#A80036;stroke-width:1.5;"/><path d="M553.5,633.798 L553.5,643.248 L533.5,647.248 L553.5,651.248 L553.5,660.698 A0,0 0 0 0 553.5,660.698 L716.5,660.698 A0,0 0 0 0 716.5,660.698 L716.5,643.798 L706.5,633.798 L553.5,633.798 A0,0 0 0 0 553.5,633.798 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M706.5,633.798 L706.5,643.798 L716.5,643.798 L706.5,633.798 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="142" x="559.5" y="652.682">Acceleration &lt; Threshold</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="105" x="428.5" y="629.448"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="85" x="438.5" y="652.264">R6: Smoothness</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="430,580.298,532,580.298,544,592.298,532,604.298,430,604.298,418,592.298,430,580.298" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="485" y="616.046">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="102" x="430" y="596.896">checkSmooth = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="481,690.198,493,702.198,481,714.198,469,702.198,481,690.198" style="stroke:#A80036;stroke-width:1.5;"/><path d="M549.5,802.698 L549.5,812.148 L529.5,816.148 L549.5,820.148 L549.5,829.598 A0,0 0 0 0 549.5,829.598 L690.5,829.598 A0,0 0 0 0 690.5,829.598 L690.5,812.698 L680.5,802.698 L549.5,802.698 A0,0 0 0 0 549.5,802.698 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M680.5,802.698 L680.5,812.698 L690.5,812.698 L680.5,802.698 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="120" x="555.5" y="821.582">ไม่หยุดนิ่ง &gt; 15 frames</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="97" x="432.5" y="798.348"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="77" x="442.5" y="821.164">R7: Continuity</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="424,749.198,538,749.198,550,761.198,538,773.198,424,773.198,412,761.198,424,749.198" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="485" y="784.946">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="114" x="424" y="765.796">checkContinuity = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="481,859.098,493,871.098,481,883.098,469,871.098,481,859.098" style="stroke:#A80036;stroke-width:1.5;"/><path d="M553.5,971.598 L553.5,981.048 L533.5,985.048 L553.5,989.048 L553.5,998.498 A0,0 0 0 0 553.5,998.498 L693.5,998.498 A0,0 0 0 0 693.5,998.498 L693.5,981.598 L683.5,971.598 L553.5,971.598 A0,0 0 0 0 553.5,971.598 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M683.5,971.598 L683.5,981.598 L693.5,981.598 L683.5,971.598 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="119" x="559.5" y="990.482">Hip อยู่ในฐาน (Ankles)</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="105" x="428.5" y="967.248"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="85" x="438.5" y="990.064">R8: Weight Shift</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="431.5,918.098,530.5,918.098,542.5,930.098,530.5,942.098,431.5,942.098,419.5,930.098,431.5,918.098" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="485" y="953.846">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="99" x="431.5" y="934.696">checkWeight = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="481,1027.998,493,1039.998,481,1051.998,469,1039.998,481,1027.998" style="stroke:#A80036;stroke-width:1.5;"/><path d="M556,1140.498 L556,1149.948 L536,1153.948 L556,1157.948 L556,1167.398 A0,0 0 0 0 556,1167.398 L728,1167.398 A0,0 0 0 0 728,1167.398 L728,1150.498 L718,1140.498 L556,1140.498 A0,0 0 0 0 556,1140.498 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M718,1140.498 L718,1150.498 L728,1150.498 L718,1140.498 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="151" x="562" y="1159.382">มือและสะโพกไปทางเดียวกัน</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="110" x="426" y="1136.148"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="90" x="436" y="1158.964">R9: Coordination</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="417.5,1086.998,544.5,1086.998,556.5,1098.998,544.5,1110.998,417.5,1110.998,405.5,1098.998,417.5,1086.998" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="485" y="1122.746">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="127" x="417.5" y="1103.596">checkCoordination = true?</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="481,1196.898,493,1208.898,481,1220.898,469,1208.898,481,1196.898" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="481" y1="1336.848" y2="1336.848"/><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="151" x="306.75" y="1368.848"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="131" x="316.75" y="1391.664">รวบรวมข้อผิดพลาดทั้งหมด</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="345.75,1424.448,418.75,1424.448,430.75,1436.448,418.75,1448.448,345.75,1448.448,333.75,1436.448,345.75,1424.448" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="73" x="345.75" y="1441.046">พบข้อผิดพลาด?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="322.75" y="1433.896">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="430.75" y="1433.896">ไม่</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="270.9" style="stroke:#000000;stroke-width:2.0;" width="332.5" x="70.375" y="1458.448"/><path d="M210.375,1458.448 L210.375,1469.648 L200.375,1479.648 L70.375,1479.648 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="130" x="73.375" y="1474.4">Priority &amp; Sticky Logic</text><path d="M273.875,1496.648 L273.875,1539.898 L253.875,1543.898 L273.875,1547.898 L273.875,1591.148 A0,0 0 0 0 273.875,1591.148 L392.875,1591.148 A0,0 0 0 0 392.875,1591.148 L392.875,1506.648 L382.875,1496.648 L273.875,1496.648 A0,0 0 0 0 273.875,1496.648 " fill="#FFFFE0" filter="url(#f1k4kd2dl2j36y)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M382.875,1496.648 L382.875,1506.648 L392.875,1506.648 L382.875,1496.648 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="63" x="279.875" y="1515.532">สำคัญที่สุด:</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="279.875" y="1532.432">1. Path Accuracy</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="98" x="279.875" y="1549.332">2. Waist Initiation</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="82" x="279.875" y="1566.232">3. Weight Shift</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="9" x="279.875" y="1583.132">...</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="161" x="92.875" y="1526.098"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="141" x="102.875" y="1548.914">เรียงลำดับตาม Priority (1-8)</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="177" x="84.875" y="1626.148"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="157" x="94.875" y="1648.964">เลือกแสดงเฉพาะข้อที่สำคัญที่สุด</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="186" x="80.375" y="1681.748"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="166" x="90.375" y="1704.564">อัปเดต lastFeedbackMsg + Time</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="121" x="112.875" y="1749.348"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="101" x="122.875" y="1772.164">ส่ง Feedback [1 ข้อ]</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="545.625,1458.448,636.625,1458.448,648.625,1470.448,636.625,1482.448,545.625,1482.448,533.625,1470.448,545.625,1458.448" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="91" x="545.625" y="1475.046">ยังอยู่ใน Hold Time?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="522.625" y="1467.896">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="648.625" y="1467.896">ไม่</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="147" x="432.875" y="1492.448"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="127" x="442.875" y="1515.264">แสดงข้อความเดิม (Sticky)</text><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="152" x="599.875" y="1492.448"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="132" x="609.875" y="1515.264">เคลียร์ Feedback (ถูกต้อง!)</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="591.125,1534.048,603.125,1546.048,591.125,1558.048,579.125,1546.048,591.125,1534.048" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="196" x="493.125" y="1593.048"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="176" x="503.125" y="1615.864">ส่ง Result { feedback, errorJoints }</text><polygon fill="#FEFECE" filter="url(#f1k4kd2dl2j36y)" points="382.25,1790.948,394.25,1802.948,382.25,1814.948,370.25,1802.948,382.25,1790.948" style="stroke:#A80036;stroke-width:1.5;"/><ellipse cx="382.25" cy="1845.948" fill="#FFFFFF" filter="url(#f1k4kd2dl2j36y)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="382.25" cy="1845.948" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="30" y2="50"/><polygon fill="#000000" points="378.25,40,382.25,50,386.25,40,382.25,44" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="85.6" y2="150.4"/><polygon fill="#000000" points="378.25,140.4,382.25,150.4,386.25,140.4,382.25,144.4" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="186" y2="314.05"/><polygon fill="#000000" points="378.25,304.05,382.25,314.05,386.25,304.05,382.25,308.05" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="505.1" y2="540.898"/><polygon fill="#000000" points="84,530.898,88,540.898,92,530.898,88,534.898" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="143.5" x2="327" y1="493.1" y2="493.1"/><polygon fill="#000000" points="323,548.698,327,558.698,331,548.698,327,552.698" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="327" x2="327" y1="493.1" y2="626.198"/><line style="stroke:#000000;stroke-width:1.5;" x1="327" x2="100" y1="626.198" y2="626.198"/><polygon fill="#000000" points="110,622.198,100,626.198,110,630.198,106,626.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="576.498" y2="614.198"/><polygon fill="#000000" points="84,604.198,88,614.198,92,604.198,88,608.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="697.198" y2="726.448"/><polygon fill="#000000" points="84,716.448,88,726.448,92,716.448,88,720.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="153" x2="310.5" y1="685.198" y2="685.198"/><polygon fill="#000000" points="306.5,734.248,310.5,744.248,314.5,734.248,310.5,738.248" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="310.5" x2="310.5" y1="685.198" y2="803.298"/><line style="stroke:#000000;stroke-width:1.5;" x1="310.5" x2="100" y1="803.298" y2="803.298"/><polygon fill="#000000" points="110,799.298,100,803.298,110,807.298,106,803.298" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="762.048" y2="791.298"/><polygon fill="#000000" points="84,781.298,88,791.298,92,781.298,88,785.298" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="638.198" y2="673.198"/><polygon fill="#000000" points="84,663.198,88,673.198,92,663.198,88,667.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="874.298" y2="899.448"/><polygon fill="#000000" points="84,889.448,88,899.448,92,889.448,88,893.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="146.5" x2="295.5" y1="862.298" y2="862.298"/><polygon fill="#000000" points="291.5,907.248,295.5,917.248,299.5,907.248,295.5,911.248" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="295.5" x2="295.5" y1="862.298" y2="972.198"/><line style="stroke:#000000;stroke-width:1.5;" x1="295.5" x2="100" y1="972.198" y2="972.198"/><polygon fill="#000000" points="110,968.198,100,972.198,110,976.198,106,972.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="935.048" y2="960.198"/><polygon fill="#000000" points="84,950.198,88,960.198,92,950.198,88,954.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="815.298" y2="850.298"/><polygon fill="#000000" points="84,840.298,88,850.298,92,840.298,88,844.298" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="1043.198" y2="1068.348"/><polygon fill="#000000" points="84,1058.348,88,1068.348,92,1058.348,88,1062.348" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="146" x2="317" y1="1031.198" y2="1031.198"/><polygon fill="#000000" points="313,1076.148,317,1086.148,321,1076.148,317,1080.148" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="317" x2="317" y1="1031.198" y2="1141.098"/><line style="stroke:#000000;stroke-width:1.5;" x1="317" x2="100" y1="1141.098" y2="1141.098"/><polygon fill="#000000" points="110,1137.098,100,1141.098,110,1145.098,106,1141.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="1103.948" y2="1129.098"/><polygon fill="#000000" points="84,1119.098,88,1129.098,92,1119.098,88,1123.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="984.198" y2="1019.198"/><polygon fill="#000000" points="84,1009.198,88,1019.198,92,1009.198,88,1013.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="1212.098" y2="1237.248"/><polygon fill="#000000" points="84,1227.248,88,1237.248,92,1227.248,88,1231.248" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="152.5" x2="365.5" y1="1200.098" y2="1200.098"/><polygon fill="#000000" points="361.5,1245.048,365.5,1255.048,369.5,1245.048,365.5,1249.048" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="365.5" x2="365.5" y1="1200.098" y2="1304.848"/><line style="stroke:#000000;stroke-width:1.5;" x1="365.5" x2="100" y1="1304.848" y2="1304.848"/><polygon fill="#000000" points="110,1300.848,100,1304.848,110,1308.848,106,1304.848" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="1272.848" y2="1292.848"/><polygon fill="#000000" points="84,1282.848,88,1292.848,92,1282.848,88,1286.848" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="1153.098" y2="1188.098"/><polygon fill="#000000" points="84,1178.098,88,1188.098,92,1178.098,88,1182.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="604.298" y2="629.448"/><polygon fill="#000000" points="477,619.448,481,629.448,485,619.448,481,623.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="544" x2="726.5" y1="592.298" y2="592.298"/><polygon fill="#000000" points="722.5,637.248,726.5,647.248,730.5,637.248,726.5,641.248" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="726.5" x2="726.5" y1="592.298" y2="702.198"/><line style="stroke:#000000;stroke-width:1.5;" x1="726.5" x2="493" y1="702.198" y2="702.198"/><polygon fill="#000000" points="503,698.198,493,702.198,503,706.198,499,702.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="665.048" y2="690.198"/><polygon fill="#000000" points="477,680.198,481,690.198,485,680.198,481,684.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="773.198" y2="798.348"/><polygon fill="#000000" points="477,788.348,481,798.348,485,788.348,481,792.348" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="550" x2="700.5" y1="761.198" y2="761.198"/><polygon fill="#000000" points="696.5,806.148,700.5,816.148,704.5,806.148,700.5,810.148" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="700.5" x2="700.5" y1="761.198" y2="871.098"/><line style="stroke:#000000;stroke-width:1.5;" x1="700.5" x2="493" y1="871.098" y2="871.098"/><polygon fill="#000000" points="503,867.098,493,871.098,503,875.098,499,871.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="833.948" y2="859.098"/><polygon fill="#000000" points="477,849.098,481,859.098,485,849.098,481,853.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="714.198" y2="749.198"/><polygon fill="#000000" points="477,739.198,481,749.198,485,739.198,481,743.198" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="942.098" y2="967.248"/><polygon fill="#000000" points="477,957.248,481,967.248,485,957.248,481,961.248" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="542.5" x2="703.5" y1="930.098" y2="930.098"/><polygon fill="#000000" points="699.5,975.048,703.5,985.048,707.5,975.048,703.5,979.048" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="703.5" x2="703.5" y1="930.098" y2="1039.998"/><line style="stroke:#000000;stroke-width:1.5;" x1="703.5" x2="493" y1="1039.998" y2="1039.998"/><polygon fill="#000000" points="503,1035.998,493,1039.998,503,1043.998,499,1039.998" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="1002.848" y2="1027.998"/><polygon fill="#000000" points="477,1017.998,481,1027.998,485,1017.998,481,1021.998" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="883.098" y2="918.098"/><polygon fill="#000000" points="477,908.098,481,918.098,485,908.098,481,912.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="1110.998" y2="1136.148"/><polygon fill="#000000" points="477,1126.148,481,1136.148,485,1126.148,481,1130.148" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="556.5" x2="738" y1="1098.998" y2="1098.998"/><polygon fill="#000000" points="734,1143.948,738,1153.948,742,1143.948,738,1147.948" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="738" x2="738" y1="1098.998" y2="1208.898"/><line style="stroke:#000000;stroke-width:1.5;" x1="738" x2="493" y1="1208.898" y2="1208.898"/><polygon fill="#000000" points="503,1204.898,493,1208.898,503,1212.898,499,1208.898" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="1171.748" y2="1196.898"/><polygon fill="#000000" points="477,1186.898,481,1196.898,485,1186.898,481,1190.898" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="1051.998" y2="1086.998"/><polygon fill="#000000" points="477,1076.998,481,1086.998,485,1076.998,481,1080.998" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="462.6" y2="481.1"/><polygon fill="#000000" points="84,471.1,88,481.1,92,471.1,88,475.1" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="462.6" y2="580.298"/><polygon fill="#000000" points="477,570.298,481,580.298,485,570.298,481,574.298" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="88" x2="88" y1="1316.848" y2="1336.848"/><polygon fill="#000000" points="84,1326.848,88,1336.848,92,1326.848,88,1330.848" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="481" x2="481" y1="1220.898" y2="1336.848"/><polygon fill="#000000" points="477,1326.848,481,1336.848,485,1326.848,481,1330.848" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="349.65" y2="461.1"/><polygon fill="#000000" points="378.25,451.1,382.25,461.1,386.25,451.1,382.25,455.1" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="1338.348" y2="1368.848"/><polygon fill="#000000" points="378.25,1358.848,382.25,1368.848,386.25,1358.848,382.25,1362.848" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="173.375" x2="173.375" y1="1561.698" y2="1626.148"/><polygon fill="#000000" points="169.375,1616.148,173.375,1626.148,177.375,1616.148,173.375,1620.148" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="173.375" x2="173.375" y1="1661.748" y2="1681.748"/><polygon fill="#000000" points="169.375,1671.748,173.375,1681.748,177.375,1671.748,173.375,1675.748" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="173.375" x2="173.375" y1="1717.348" y2="1749.348"/><polygon fill="#000000" points="169.375,1739.348,173.375,1749.348,177.375,1739.348,173.375,1743.348" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="533.625" x2="506.375" y1="1470.448" y2="1470.448"/><line style="stroke:#000000;stroke-width:1.5;" x1="506.375" x2="506.375" y1="1470.448" y2="1492.448"/><polygon fill="#000000" points="502.375,1482.448,506.375,1492.448,510.375,1482.448,506.375,1486.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="648.625" x2="675.875" y1="1470.448" y2="1470.448"/><line style="stroke:#000000;stroke-width:1.5;" x1="675.875" x2="675.875" y1="1470.448" y2="1492.448"/><polygon fill="#000000" points="671.875,1482.448,675.875,1492.448,679.875,1482.448,675.875,1486.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="506.375" x2="506.375" y1="1528.048" y2="1546.048"/><line style="stroke:#000000;stroke-width:1.5;" x1="506.375" x2="579.125" y1="1546.048" y2="1546.048"/><polygon fill="#000000" points="569.125,1542.048,579.125,1546.048,569.125,1550.048,573.125,1546.048" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="675.875" x2="675.875" y1="1528.048" y2="1546.048"/><line style="stroke:#000000;stroke-width:1.5;" x1="675.875" x2="603.125" y1="1546.048" y2="1546.048"/><polygon fill="#000000" points="613.125,1542.048,603.125,1546.048,613.125,1550.048,609.125,1546.048" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="591.125" x2="591.125" y1="1558.048" y2="1593.048"/><polygon fill="#000000" points="587.125,1583.048,591.125,1593.048,595.125,1583.048,591.125,1587.048" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="333.75" x2="173.375" y1="1436.448" y2="1436.448"/><line style="stroke:#000000;stroke-width:1.5;" x1="173.375" x2="173.375" y1="1436.448" y2="1526.098"/><polygon fill="#000000" points="169.375,1516.098,173.375,1526.098,177.375,1516.098,173.375,1520.098" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="430.75" x2="591.125" y1="1436.448" y2="1436.448"/><line style="stroke:#000000;stroke-width:1.5;" x1="591.125" x2="591.125" y1="1436.448" y2="1458.448"/><polygon fill="#000000" points="587.125,1448.448,591.125,1458.448,595.125,1448.448,591.125,1452.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="173.375" x2="173.375" y1="1784.948" y2="1802.948"/><line style="stroke:#000000;stroke-width:1.5;" x1="173.375" x2="370.25" y1="1802.948" y2="1802.948"/><polygon fill="#000000" points="360.25,1798.948,370.25,1802.948,360.25,1806.948,364.25,1802.948" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="591.125" x2="591.125" y1="1628.648" y2="1802.948"/><line style="stroke:#000000;stroke-width:1.5;" x1="591.125" x2="394.25" y1="1802.948" y2="1802.948"/><polygon fill="#000000" points="404.25,1798.948,394.25,1802.948,404.25,1806.948,400.25,1802.948" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="1404.448" y2="1424.448"/><polygon fill="#000000" points="378.25,1414.448,382.25,1424.448,386.25,1414.448,382.25,1418.448" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382.25" x2="382.25" y1="1814.948" y2="1834.948"/><polygon fill="#000000" points="378.25,1824.948,382.25,1834.948,386.25,1824.948,382.25,1828.948" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[f844a3d9e565ca2e7e4b745eec8becf4]
@startuml TaijiFlow_Activity_Diagram_Heuristics
' ============================================================================
' TaijiFlow AI - Activity Diagram: Heuristics Engine (8 Rules Analysis)
' ============================================================================
' แสดงขั้นตอนการวิเคราะห์ท่าทางตามหลักไท่จี๋ 8 ข้อ
' อ้างอิงจาก: heuristics_engine.js -> analyze() method
' ============================================================================

skinparam defaultFontName "sarabun"
skinparam activity {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam note {
    BackgroundColor LightYellow
}

start

:รับ Pose Landmarks (33 จุด) จาก MediaPipe;

:ดึง Keypoints ที่ต้องการ;
note right
    - Wrist (ข้อมือ) - [15, 16]
    - Shoulder (ไหล่) - [11, 12]
    - Elbow (ศอก) - [13, 14]
    - Thumb (นิ้วโป้ง) - [21, 22]
    - Pinky (นิ้วก้อย) - [17, 18]
    - Hip (สะโพก) - [23, 24]
    - Ankle (ข้อเท้า) - [27, 28]
    - Nose (จมูก) - [0]
end note

:โหลด Rules Config ตาม Level;
note right
    **L1 (นั่ง) - 3 กฎ:**
    ✓ R1 Path, R3 Elbow, R7 Continuity

    **L2 (ยืน) - 6 กฎ:**
    ✓ R1 Path, R2 Rotation, R3 Elbow,
      R4 Waist, R5 Stability, R7 Continuity

    **L3 (ยืนย่อ) - 8 กฎ:**
    ✓ ทุกกฎ (รวม R6 Smooth, R8 Weight)
end note

partition "ตรวจสอบ 9 กฎ (ตาม Level Config)" {
    
split
    if (checkPath = true?) then (ใช่)
        :R1: Path Shape;
        note right
            ตรวจ Wrist History
            ใช้ Cross Product
            วัด Direction Consistency
        end note
    endif
    
    if (checkRotation = true?) then (ใช่)
        :R2: Arm Rotation;
        note right
            ตรวจ Thumb vs Pinky
            ขึ้น/ลง = หงาย/คว่ำ
        end note
    endif
    
    if (checkElbow = true?) then (ใช่)
        :R3: Elbow Sinking;
        note right
            ศอกต้องต่ำกว่าไหล่
        end note
    endif
    
    if (checkWaist = true?) then (ใช่)
        :R4: Waist Initiation;
        note right
            ความเร็วสะโพก > ไหล่
        end note
    endif
    
    if (checkStability = true?) then (ใช่)
        :R5: Vertical Stability;
        note right
            Head Y Variance < Threshold
        end note
    endif
    
split again
    ' ========== คอลัมน์ขวา: Rules 6-9 ==========
    
    if (checkSmooth = true?) then (ใช่)
        :R6: Smoothness;
        note right
            Acceleration < Threshold
        end note
    endif
    
    if (checkContinuity = true?) then (ใช่)
        :R7: Continuity;
        note right
            ไม่หยุดนิ่ง > 15 frames
        end note
    endif
    
    if (checkWeight = true?) then (ใช่)
        :R8: Weight Shift;
        note right
            Hip อยู่ในฐาน (Ankles)
        end note
    endif

    if (checkCoordination = true?) then (ใช่)
        :R9: Coordination;
        note right
            มือและสะโพกไปทางเดียวกัน
        end note
    endif

end split

}

:รวบรวมข้อผิดพลาดทั้งหมด;

if (พบข้อผิดพลาด?) then (ใช่)
    partition "Priority & Sticky Logic" {
        :เรียงลำดับตาม Priority (1-8);
        note right
            **สำคัญที่สุด:**
            1. Path Accuracy
            2. Waist Initiation
            3. Weight Shift
            ...
        end note
        :เลือกแสดงเฉพาะข้อที่สำคัญที่สุด;
        :อัปเดต lastFeedbackMsg + Time;
    }
    :ส่ง Feedback [1 ข้อ];
else (ไม่)
    if (ยังอยู่ใน Hold Time?) then (ใช่)
        :แสดงข้อความเดิม (Sticky);
    else (ไม่)
        :เคลียร์ Feedback (ถูกต้อง!);
    endif
    :ส่ง Result { feedback, errorJoints };
endif

stop
@enduml

@startuml TaijiFlow_Activity_Diagram_Heuristics

skinparam defaultFontName "sarabun"
skinparam activity {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam note {
    BackgroundColor LightYellow
}

start

:รับ Pose Landmarks (33 จุด) จาก MediaPipe;

:ดึง Keypoints ที่ต้องการ;
note right
    - Wrist (ข้อมือ) - [15, 16]
    - Shoulder (ไหล่) - [11, 12]
    - Elbow (ศอก) - [13, 14]
    - Thumb (นิ้วโป้ง) - [21, 22]
    - Pinky (นิ้วก้อย) - [17, 18]
    - Hip (สะโพก) - [23, 24]
    - Ankle (ข้อเท้า) - [27, 28]
    - Nose (จมูก) - [0]
end note

:โหลด Rules Config ตาม Level;
note right
    **L1 (นั่ง) - 3 กฎ:**
    ✓ R1 Path, R3 Elbow, R7 Continuity

    **L2 (ยืน) - 6 กฎ:**
    ✓ R1 Path, R2 Rotation, R3 Elbow,
      R4 Waist, R5 Stability, R7 Continuity

    **L3 (ยืนย่อ) - 8 กฎ:**
    ✓ ทุกกฎ (รวม R6 Smooth, R8 Weight)
end note

partition "ตรวจสอบ 9 กฎ (ตาม Level Config)" {
    
split
    if (checkPath = true?) then (ใช่)
        :R1: Path Shape;
        note right
            ตรวจ Wrist History
            ใช้ Cross Product
            วัด Direction Consistency
        end note
    endif
    
    if (checkRotation = true?) then (ใช่)
        :R2: Arm Rotation;
        note right
            ตรวจ Thumb vs Pinky
            ขึ้น/ลง = หงาย/คว่ำ
        end note
    endif
    
    if (checkElbow = true?) then (ใช่)
        :R3: Elbow Sinking;
        note right
            ศอกต้องต่ำกว่าไหล่
        end note
    endif
    
    if (checkWaist = true?) then (ใช่)
        :R4: Waist Initiation;
        note right
            ความเร็วสะโพก > ไหล่
        end note
    endif
    
    if (checkStability = true?) then (ใช่)
        :R5: Vertical Stability;
        note right
            Head Y Variance < Threshold
        end note
    endif
    
split again
    
    if (checkSmooth = true?) then (ใช่)
        :R6: Smoothness;
        note right
            Acceleration < Threshold
        end note
    endif
    
    if (checkContinuity = true?) then (ใช่)
        :R7: Continuity;
        note right
            ไม่หยุดนิ่ง > 15 frames
        end note
    endif
    
    if (checkWeight = true?) then (ใช่)
        :R8: Weight Shift;
        note right
            Hip อยู่ในฐาน (Ankles)
        end note
    endif

    if (checkCoordination = true?) then (ใช่)
        :R9: Coordination;
        note right
            มือและสะโพกไปทางเดียวกัน
        end note
    endif

end split

}

:รวบรวมข้อผิดพลาดทั้งหมด;

if (พบข้อผิดพลาด?) then (ใช่)
    partition "Priority & Sticky Logic" {
        :เรียงลำดับตาม Priority (1-8);
        note right
            **สำคัญที่สุด:**
            1. Path Accuracy
            2. Waist Initiation
            3. Weight Shift
            ...
        end note
        :เลือกแสดงเฉพาะข้อที่สำคัญที่สุด;
        :อัปเดต lastFeedbackMsg + Time;
    }
    :ส่ง Feedback [1 ข้อ];
else (ไม่)
    if (ยังอยู่ใน Hold Time?) then (ใช่)
        :แสดงข้อความเดิม (Sticky);
    else (ไม่)
        :เคลียร์ Feedback (ถูกต้อง!);
    endif
    :ส่ง Result { feedback, errorJoints };
endif

stop
@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>