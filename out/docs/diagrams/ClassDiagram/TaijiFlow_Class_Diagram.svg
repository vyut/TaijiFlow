<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1697px" preserveAspectRatio="none" style="width:1500px;height:1697px;" version="1.1" viewBox="0 0 1500 1697" width="1500px" zoomAndPan="magnify"><defs><filter height="300%" id="f1v5f3d2ypspkg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ed1d20ea533a2a0e7df5ba3c35e56ced]
cluster Controllers--><rect fill="#E3F2FD" filter="url(#f1v5f3d2ypspkg)" height="356" style="stroke:#000000;stroke-width:1.5;" width="758.5" x="46" y="200.5"/><text fill="#000000" font-family="sarabun" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="387.25" y="217.452">«Controller»</text><text fill="#000000" font-family="sarabun" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="73" x="388.75" y="235.652">Controllers</text><!--MD5=[1fc7141c6f48660c71a2006c6bf2683f]
cluster Core Managers--><rect fill="#FFF3E0" filter="url(#f1v5f3d2ypspkg)" height="269" style="stroke:#000000;stroke-width:1.5;" width="600" x="888" y="960.5"/><text fill="#000000" font-family="sarabun" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="42" x="1167" y="977.452">«Core»</text><text fill="#000000" font-family="sarabun" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="95" x="1140.5" y="995.652">Core Managers</text><!--MD5=[af552435e54b04649ea7481a5d22641b]
cluster Display Managers--><rect fill="#E0F7FA" filter="url(#f1v5f3d2ypspkg)" height="745" style="stroke:#000000;stroke-width:1.5;" width="237" x="857" y="191.5"/><text fill="#000000" font-family="sarabun" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="58" x="946.5" y="208.452">«Display»</text><text fill="#000000" font-family="sarabun" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109" x="921" y="226.652">Display Managers</text><!--MD5=[7ac1916149c3369d001f628ff410a677]
cluster UI & Feedback--><rect fill="#E8F5E9" filter="url(#f1v5f3d2ypspkg)" height="618" style="stroke:#000000;stroke-width:1.5;" width="512.5" x="320.5" y="580.5"/><text fill="#000000" font-family="sarabun" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="27" x="563.25" y="597.452">«UI»</text><text fill="#000000" font-family="sarabun" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="531.25" y="615.652">UI &amp; Feedback</text><!--MD5=[0b7db6fcd588f8499928e45a474751dc]
cluster Utilities--><rect fill="#F3E5F5" filter="url(#f1v5f3d2ypspkg)" height="463" style="stroke:#000000;stroke-width:1.5;" width="315" x="294" y="1222.5"/><text fill="#000000" font-family="sarabun" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="49" x="427" y="1239.452">«Utility»</text><text fill="#000000" font-family="sarabun" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="51" x="426" y="1257.652">Utilities</text><!--MD5=[d0d7b0900e371541ba11cbff692d2bc7]
class Script--><rect codeLine="35" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="157.3" id="Script" style="stroke:#000000;stroke-width:1.5;" width="146" x="69" y="382.85"/><ellipse cx="117.25" cy="403.45" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M119.7231,409.5931 Q119.1421,409.8919 118.5029,410.0413 Q117.8638,410.1907 117.1582,410.1907 Q114.6514,410.1907 113.3315,408.5389 Q112.0117,406.887 112.0117,403.7659 Q112.0117,400.6365 113.3315,398.9847 Q114.6514,397.3328 117.1582,397.3328 Q117.8638,397.3328 118.5112,397.4822 Q119.1587,397.6316 119.7231,397.9305 L119.7231,400.6531 Q119.0923,400.0721 118.4988,399.8023 Q117.9053,399.5325 117.2744,399.5325 Q115.9297,399.5325 115.2449,400.5992 Q114.5601,401.6658 114.5601,403.7659 Q114.5601,405.8577 115.2449,406.9244 Q115.9297,407.991 117.2744,407.991 Q117.9053,407.991 118.4988,407.7212 Q119.0923,407.4515 119.7231,406.8704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="39" x="138.75" y="400.666">«Main»</text><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="41" x="137.75" y="416.266">script.js</text><line style="stroke:#000000;stroke-width:1.5;" x1="70" x2="214" y1="424.05" y2="424.05"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="77" y="432.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="120" x="89" y="439.798">isTrainingMode: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="77" y="446.35"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="109" x="89" y="454.098">currentExercise: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="77" y="460.65"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="95" x="89" y="468.398">currentLevel: string</text><line style="stroke:#000000;stroke-width:1.0;" x1="70" x2="214" y1="474.95" y2="474.95"/><ellipse cx="80" cy="485.95" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="91" x="89" y="490.698">startTrainingFlow()</text><ellipse cx="80" cy="500.25" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="101" x="89" y="504.998">endTrainingSession()</text><ellipse cx="80" cy="514.55" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="86" x="89" y="519.298">onResults(results)</text><ellipse cx="80" cy="528.85" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="99" x="89" y="533.598">loadReferenceData()</text><!--MD5=[8efddad45aa6a4eb444717d204646b2a]
class KeyboardController--><rect codeLine="46" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="90.9" id="KeyboardController" style="stroke:#000000;stroke-width:1.5;" width="135" x="384" y="370.05"/><ellipse cx="399" cy="386.05" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M401.4731,392.1931 Q400.8921,392.4919 400.2529,392.6413 Q399.6138,392.7907 398.9082,392.7907 Q396.4014,392.7907 395.0815,391.1389 Q393.7617,389.487 393.7617,386.3659 Q393.7617,383.2365 395.0815,381.5847 Q396.4014,379.9328 398.9082,379.9328 Q399.6138,379.9328 400.2612,380.0822 Q400.9087,380.2316 401.4731,380.5305 L401.4731,383.2531 Q400.8423,382.6721 400.2488,382.4023 Q399.6553,382.1325 399.0244,382.1325 Q397.6797,382.1325 396.9949,383.1992 Q396.3101,384.2658 396.3101,386.3659 Q396.3101,388.4577 396.9949,389.5244 Q397.6797,390.591 399.0244,390.591 Q399.6553,390.591 400.2488,390.3212 Q400.8423,390.0515 401.4731,389.4704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="103" x="413" y="391.066">KeyboardController</text><line style="stroke:#000000;stroke-width:1.5;" x1="385" x2="518" y1="402.05" y2="402.05"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="392" y="410.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="59" x="404" y="417.798">deps: object</text><line style="stroke:#000000;stroke-width:1.0;" x1="385" x2="518" y1="424.35" y2="424.35"/><ellipse cx="395" cy="435.35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="109" x="404" y="440.098">handleKeydown(event)</text><ellipse cx="395" cy="449.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="98" x="404" y="454.398">showShortcutsHelp()</text><!--MD5=[8172fdb26fe0b4f66f8ce07666356cda]
class DisplayController--><rect codeLine="53" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="205.3" id="DisplayController" style="stroke:#000000;stroke-width:1.5;" width="159" x="629.5" y="255.85"/><ellipse cx="661.15" cy="271.85" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M663.6231,277.9931 Q663.0421,278.2919 662.4029,278.4413 Q661.7638,278.5907 661.0582,278.5907 Q658.5514,278.5907 657.2315,276.9389 Q655.9117,275.287 655.9117,272.1659 Q655.9117,269.0365 657.2315,267.3847 Q658.5514,265.7328 661.0582,265.7328 Q661.7638,265.7328 662.4112,265.8822 Q663.0587,266.0316 663.6231,266.3305 L663.6231,269.0531 Q662.9923,268.4721 662.3988,268.2023 Q661.8053,267.9325 661.1744,267.9325 Q659.8297,267.9325 659.1449,268.9992 Q658.4601,270.0658 658.4601,272.1659 Q658.4601,274.2577 659.1449,275.3244 Q659.8297,276.391 661.1744,276.391 Q661.8053,276.391 662.3988,276.1212 Q662.9923,275.8515 663.6231,275.2704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="90" x="678.85" y="276.866">DisplayController</text><line style="stroke:#000000;stroke-width:1.5;" x1="630.5" x2="787.5" y1="287.85" y2="287.85"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="637.5" y="295.85"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="133" x="649.5" y="303.598">showGhostOverlay: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="637.5" y="310.15"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="91" x="649.5" y="317.898">showPath: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="637.5" y="324.45"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="111" x="649.5" y="332.198">showSkeleton: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="637.5" y="338.75"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="119" x="649.5" y="346.498">showSilhouette: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="637.5" y="353.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="91" x="649.5" y="360.798">showTrail: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="637.5" y="367.35"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="85" x="649.5" y="375.098">trailHistory: array</text><line style="stroke:#000000;stroke-width:1.0;" x1="630.5" x2="787.5" y1="381.65" y2="381.65"/><ellipse cx="640.5" cy="392.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="22" x="649.5" y="397.398">init()</text><ellipse cx="640.5" cy="406.95" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="108" x="649.5" y="411.698">toggleInstructor(show)</text><ellipse cx="640.5" cy="421.25" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="84" x="649.5" y="425.998">resetToDefaults()</text><ellipse cx="640.5" cy="435.55" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="87" x="649.5" y="440.298">addTrailPoint(x, y)</text><ellipse cx="640.5" cy="449.85" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="52" x="649.5" y="454.598">clearTrail()</text><path d="M62,255.7 L62,333.3 L222,333.3 L222,265.7 L212,255.7 L62,255.7 " fill="#FBFB77" filter="url(#f1v5f3d2ypspkg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M212,255.7 L212,265.7 L222,265.7 L212,255.7 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137" x="68" y="274.584">จัดการ Application Flow</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="136" x="68" y="291.484">Script = Main Controller</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="139" x="68" y="308.384">Keyboard = 14 Shortcuts</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="107" x="68" y="325.284">Display = 6 Options</text><!--MD5=[acf674d2eee96cced2a8b22730b1989e]
class HeuristicsEngine--><rect codeLine="81" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="198.15" id="HeuristicsEngine" style="stroke:#000000;stroke-width:1.5;" width="177" x="1118" y="1015.43"/><ellipse cx="1158.65" cy="1031.43" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M1161.1231,1037.5731 Q1160.5421,1037.8719 1159.9029,1038.0213 Q1159.2638,1038.1707 1158.5582,1038.1707 Q1156.0514,1038.1707 1154.7315,1036.5189 Q1153.4117,1034.867 1153.4117,1031.7459 Q1153.4117,1028.6165 1154.7315,1026.9647 Q1156.0514,1025.3128 1158.5582,1025.3128 Q1159.2638,1025.3128 1159.9112,1025.4622 Q1160.5587,1025.6116 1161.1231,1025.9105 L1161.1231,1028.6331 Q1160.4923,1028.0521 1159.8988,1027.7823 Q1159.3053,1027.5125 1158.6744,1027.5125 Q1157.3297,1027.5125 1156.6449,1028.5792 Q1155.9601,1029.6458 1155.9601,1031.7459 Q1155.9601,1033.8377 1156.6449,1034.9044 Q1157.3297,1035.971 1158.6744,1035.971 Q1159.3053,1035.971 1159.8988,1035.7012 Q1160.4923,1035.4315 1161.1231,1034.8504 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="88" x="1178.35" y="1036.446">HeuristicsEngine</text><line style="stroke:#000000;stroke-width:1.5;" x1="1119" x2="1294" y1="1047.43" y2="1047.43"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1055.43"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="66" x="1138" y="1063.178">config: object</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1069.73"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="111" x="1138" y="1077.478">calibrationData: object</text><line style="stroke:#000000;stroke-width:1.0;" x1="1119" x2="1294" y1="1084.03" y2="1084.03"/><ellipse cx="1129" cy="1095.03" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="151" x="1138" y="1099.778">analyze(landmarks): Feedback[]</text><ellipse cx="1129" cy="1109.33" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="96" x="1138" y="1114.078">setCalibration(data)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1120.63"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="85" x="1138" y="1128.378">checkPathShape()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1134.93"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="96" x="1138" y="1142.678">checkElbowSinking()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1149.23"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="82" x="1138" y="1156.978">checkContinuity()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1163.53"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="82" x="1138" y="1171.278">checkContinuity()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1126" y="1177.83"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="94" x="1138" y="1185.578">checkArmRotation()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1119" x2="1172.5" y1="1199.28" y2="1199.28"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="68" x="1172.5" y="1203.378">+4 more rules</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="1240.5" x2="1294" y1="1199.28" y2="1199.28"/><!--MD5=[2695471b11f4afe9b2f935479e6afc73]
class CalibrationManager--><rect codeLine="95" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="176.7" id="CalibrationManager" style="stroke:#000000;stroke-width:1.5;" width="137" x="1335" y="1032.15"/><ellipse cx="1350.9" cy="1048.15" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M1353.3731,1054.2931 Q1352.7921,1054.5919 1352.1529,1054.7413 Q1351.5138,1054.8907 1350.8082,1054.8907 Q1348.3014,1054.8907 1346.9815,1053.2389 Q1345.6617,1051.587 1345.6617,1048.4659 Q1345.6617,1045.3365 1346.9815,1043.6847 Q1348.3014,1042.0328 1350.8082,1042.0328 Q1351.5138,1042.0328 1352.1612,1042.1822 Q1352.8087,1042.3316 1353.3731,1042.6305 L1353.3731,1045.3531 Q1352.7423,1044.7721 1352.1488,1044.5023 Q1351.5553,1044.2325 1350.9244,1044.2325 Q1349.5797,1044.2325 1348.8949,1045.2992 Q1348.2101,1046.3658 1348.2101,1048.4659 Q1348.2101,1050.5577 1348.8949,1051.6244 Q1349.5797,1052.691 1350.9244,1052.691 Q1351.5553,1052.691 1352.1488,1052.4212 Q1352.7423,1052.1515 1353.3731,1051.5704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="103" x="1365.1" y="1053.166">CalibrationManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="1336" x2="1471" y1="1064.15" y2="1064.15"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1343" y="1072.15"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="83" x="1355" y="1079.898">isActive: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1343" y="1086.45"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="111" x="1355" y="1094.198">calibrationData: object</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1343" y="1100.75"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="57" x="1355" y="1108.498">level: string</text><line style="stroke:#000000;stroke-width:1.0;" x1="1336" x2="1471" y1="1115.05" y2="1115.05"/><ellipse cx="1346" cy="1126.05" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="29" x="1355" y="1130.798">start()</text><ellipse cx="1346" cy="1140.35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="27" x="1355" y="1145.098">stop()</text><ellipse cx="1346" cy="1154.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="37" x="1355" y="1159.398">cancel()</text><ellipse cx="1346" cy="1168.95" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="93" x="1355" y="1173.698">process(landmarks)</text><ellipse cx="1346" cy="1183.25" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="70" x="1355" y="1187.998">setLevel(level)</text><ellipse cx="1346" cy="1197.55" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="79" x="1355" y="1202.298">drawOverlay(ctx)</text><!--MD5=[49faa9a638d20fb09fbea4482760b511]
class ScoringManager--><rect codeLine="108" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="119.5" id="ScoringManager" style="stroke:#000000;stroke-width:1.5;" width="143" x="904" y="1072.75"/><ellipse cx="931.15" cy="1088.75" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M933.6231,1094.8931 Q933.0421,1095.1919 932.4029,1095.3413 Q931.7638,1095.4907 931.0582,1095.4907 Q928.5514,1095.4907 927.2315,1093.8389 Q925.9117,1092.187 925.9117,1089.0659 Q925.9117,1085.9365 927.2315,1084.2847 Q928.5514,1082.6328 931.0582,1082.6328 Q931.7638,1082.6328 932.4112,1082.7822 Q933.0587,1082.9316 933.6231,1083.2305 L933.6231,1085.9531 Q932.9923,1085.3721 932.3988,1085.1023 Q931.8053,1084.8325 931.1744,1084.8325 Q929.8297,1084.8325 929.1449,1085.8992 Q928.4601,1086.9658 928.4601,1089.0659 Q928.4601,1091.1577 929.1449,1092.2244 Q929.8297,1093.291 931.1744,1093.291 Q931.8053,1093.291 932.3988,1093.0212 Q932.9923,1092.7515 933.6231,1092.1704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="84" x="947.85" y="1093.766">ScoringManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="905" x2="1046" y1="1104.75" y2="1104.75"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="912" y="1112.75"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="78" x="924" y="1120.498">totalFrames: int</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="912" y="1127.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="89" x="924" y="1134.798">correctFrames: int</text><line style="stroke:#000000;stroke-width:1.0;" x1="905" x2="1046" y1="1141.35" y2="1141.35"/><ellipse cx="915" cy="1152.35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="29" x="924" y="1157.098">start()</text><ellipse cx="915" cy="1166.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="117" x="924" y="1171.398">recordFrame(feedbacks)</text><ellipse cx="915" cy="1180.95" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="103" x="924" y="1185.698">getSummary(): object</text><!--MD5=[7065e7be84ffd0ebe64c11e25c182e37]
class DrawingManager--><rect codeLine="123" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="219.6" id="DrawingManager" style="stroke:#000000;stroke-width:1.5;" width="200" x="875.5" y="700.7"/><ellipse cx="928.25" cy="716.7" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M930.7231,722.8431 Q930.1421,723.1419 929.5029,723.2913 Q928.8638,723.4407 928.1582,723.4407 Q925.6514,723.4407 924.3315,721.7889 Q923.0117,720.137 923.0117,717.0159 Q923.0117,713.8865 924.3315,712.2347 Q925.6514,710.5828 928.1582,710.5828 Q928.8638,710.5828 929.5112,710.7322 Q930.1587,710.8816 930.7231,711.1805 L930.7231,713.9031 Q930.0923,713.3221 929.4988,713.0523 Q928.9053,712.7825 928.2744,712.7825 Q926.9297,712.7825 926.2449,713.8492 Q925.5601,714.9158 925.5601,717.0159 Q925.5601,719.1077 926.2449,720.1744 Q926.9297,721.241 928.2744,721.241 Q928.9053,721.241 929.4988,720.9712 Q930.0923,720.7015 930.7231,720.1204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="86" x="948.75" y="721.716">DrawingManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="876.5" x2="1074.5" y1="732.7" y2="732.7"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="883.5" y="740.7"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="153" x="895.5" y="748.448">ctx: CanvasRenderingContext2D</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="883.5" y="755"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="95" x="895.5" y="762.748">isMirrored: boolean</text><line style="stroke:#000000;stroke-width:1.0;" x1="876.5" x2="1074.5" y1="769.3" y2="769.3"/><ellipse cx="886.5" cy="780.3" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="121" x="895.5" y="785.048">drawSkeleton(landmarks)</text><ellipse cx="886.5" cy="794.6" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="103" x="895.5" y="799.348">drawPath(path, color)</text><ellipse cx="886.5" cy="808.9" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="84" x="895.5" y="813.648">drawTrail(history)</text><ellipse cx="886.5" cy="823.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="151" x="895.5" y="827.948">drawFeedbackPanel(feedbacks)</text><ellipse cx="886.5" cy="837.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="145" x="895.5" y="842.248">drawDebugOverlay(debugInfo)</text><ellipse cx="886.5" cy="851.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="149" x="895.5" y="856.548">drawGhostSkeleton(landmarks)</text><ellipse cx="886.5" cy="866.1" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="174" x="895.5" y="870.848">drawSilhouetteVideo(video, opacity)</text><ellipse cx="886.5" cy="880.4" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="134" x="895.5" y="885.148">drawSilhouette(mask, color)</text><ellipse cx="886.5" cy="894.7" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="157" x="895.5" y="899.448">drawGestureFeedback(feedback)</text><ellipse cx="886.5" cy="909" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="147" x="895.5" y="913.748">drawCircularityIndicator(score)</text><!--MD5=[27430a77e3018f6a78460c75ee8741e0]
class GhostManager--><rect codeLine="139" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="219.6" id="GhostManager" style="stroke:#000000;stroke-width:1.5;" width="205" x="873" y="246.7"/><ellipse cx="932.75" cy="262.7" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M935.2231,268.8431 Q934.6421,269.1419 934.0029,269.2913 Q933.3638,269.4407 932.6582,269.4407 Q930.1514,269.4407 928.8315,267.7889 Q927.5117,266.137 927.5117,263.0159 Q927.5117,259.8865 928.8315,258.2347 Q930.1514,256.5828 932.6582,256.5828 Q933.3638,256.5828 934.0112,256.7322 Q934.6587,256.8816 935.2231,257.1805 L935.2231,259.9031 Q934.5923,259.3221 933.9988,259.0523 Q933.4053,258.7825 932.7744,258.7825 Q931.4297,258.7825 930.7449,259.8492 Q930.0601,260.9158 930.0601,263.0159 Q930.0601,265.1077 930.7449,266.1744 Q931.4297,267.241 932.7744,267.241 Q933.4053,267.241 933.9988,266.9712 Q934.5923,266.7015 935.2231,266.1204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="77" x="953.25" y="267.716">GhostManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="874" x2="1077" y1="278.7" y2="278.7"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="881" y="286.7"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="88" x="893" y="294.448">isPlaying: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="881" y="301"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="78" x="893" y="308.748">opacity: number</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="881" y="315.3"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="179" x="893" y="323.048">silhouetteVideo: HTMLVideoElement</text><line style="stroke:#000000;stroke-width:1.0;" x1="874" x2="1077" y1="329.6" y2="329.6"/><ellipse cx="884" cy="340.6" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="49" x="893" y="345.348">load(data)</text><ellipse cx="884" cy="354.9" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="118" x="893" y="359.648">loadSilhouetteVideo(url)</text><ellipse cx="884" cy="369.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="29" x="893" y="373.948">start()</text><ellipse cx="884" cy="383.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="27" x="893" y="388.248">stop()</text><ellipse cx="884" cy="397.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="40" x="893" y="402.548">update()</text><ellipse cx="884" cy="412.1" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="40" x="893" y="416.848">update()</text><ellipse cx="884" cy="426.4" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="89" x="893" y="431.148">getCurrentFrame()</text><ellipse cx="884" cy="440.7" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="80" x="893" y="445.448">setSpeed(speed)</text><ellipse cx="884" cy="455" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="92" x="893" y="459.748">setOpacity(opacity)</text><!--MD5=[6806bdef0702a1d9cf2b16e2b3cf84cb]
class SilhouetteManager--><rect codeLine="155" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="133.8" id="SilhouetteManager" style="stroke:#000000;stroke-width:1.5;" width="200" x="875.5" y="516.6"/><ellipse cx="921.25" cy="532.6" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M923.7231,538.7431 Q923.1421,539.0419 922.5029,539.1913 Q921.8638,539.3407 921.1582,539.3407 Q918.6514,539.3407 917.3315,537.6889 Q916.0117,536.037 916.0117,532.9159 Q916.0117,529.7865 917.3315,528.1347 Q918.6514,526.4828 921.1582,526.4828 Q921.8638,526.4828 922.5112,526.6322 Q923.1587,526.7816 923.7231,527.0805 L923.7231,529.8031 Q923.0923,529.2221 922.4988,528.9523 Q921.9053,528.6825 921.2744,528.6825 Q919.9297,528.6825 919.2449,529.7492 Q918.5601,530.8158 918.5601,532.9159 Q918.5601,535.0077 919.2449,536.0744 Q919.9297,537.141 921.2744,537.141 Q921.9053,537.141 922.4988,536.8712 Q923.0923,536.6015 923.7231,536.0204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="100" x="941.75" y="537.616">SilhouetteManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="876.5" x2="1074.5" y1="548.6" y2="548.6"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="883.5" y="556.6"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="92" x="895.5" y="564.348">isEnabled: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="883.5" y="570.9"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="58" x="895.5" y="578.648">color: string</text><line style="stroke:#000000;stroke-width:1.0;" x1="876.5" x2="1074.5" y1="585.2" y2="585.2"/><ellipse cx="886.5" cy="596.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="39" x="895.5" y="600.948">enable()</text><ellipse cx="886.5" cy="610.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="41" x="895.5" y="615.248">disable()</text><ellipse cx="886.5" cy="624.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="37" x="895.5" y="629.548">toggle()</text><ellipse cx="886.5" cy="639.1" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="174" x="895.5" y="643.848">drawSilhouetteFromMask(ctx, mask)</text><!--MD5=[d602b77267d5088762cb6a59b8ed96b1]
class UIManager--><rect codeLine="176" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="119.5" id="UIManager" style="stroke:#000000;stroke-width:1.5;" width="134" x="384.5" y="1038.75"/><ellipse cx="419.75" cy="1054.75" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M422.2231,1060.8931 Q421.6421,1061.1919 421.0029,1061.3413 Q420.3638,1061.4907 419.6582,1061.4907 Q417.1514,1061.4907 415.8315,1059.8389 Q414.5117,1058.187 414.5117,1055.0659 Q414.5117,1051.9365 415.8315,1050.2847 Q417.1514,1048.6328 419.6582,1048.6328 Q420.3638,1048.6328 421.0112,1048.7822 Q421.6587,1048.9316 422.2231,1049.2305 L422.2231,1051.9531 Q421.5923,1051.3721 420.9988,1051.1023 Q420.4053,1050.8325 419.7744,1050.8325 Q418.4297,1050.8325 417.7449,1051.8992 Q417.0601,1052.9658 417.0601,1055.0659 Q417.0601,1057.1577 417.7449,1058.2244 Q418.4297,1059.291 419.7744,1059.291 Q420.4053,1059.291 420.9988,1059.0212 Q421.5923,1058.7515 422.2231,1058.1704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="57" x="438.25" y="1059.766">UIManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="385.5" x2="517.5" y1="1070.75" y2="1070.75"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="392.5" y="1078.75"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="93" x="404.5" y="1086.498">currentLang: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="392.5" y="1093.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="102" x="404.5" y="1100.798">currentTheme: string</text><line style="stroke:#000000;stroke-width:1.0;" x1="385.5" x2="517.5" y1="1107.35" y2="1107.35"/><ellipse cx="395.5" cy="1118.35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="85" x="404.5" y="1123.098">toggleLanguage()</text><ellipse cx="395.5" cy="1132.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="70" x="404.5" y="1137.398">toggleTheme()</text><ellipse cx="395.5" cy="1146.95" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="108" x="404.5" y="1151.698">showNotification(msg)</text><!--MD5=[347a6de240a7e533fe3f585d0ed7a7fe]
class AudioManager--><rect codeLine="185" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="133.8" id="AudioManager" style="stroke:#000000;stroke-width:1.5;" width="182" x="360.5" y="854.6"/><ellipse cx="409.25" cy="870.6" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M411.7231,876.7431 Q411.1421,877.0419 410.5029,877.1913 Q409.8638,877.3407 409.1582,877.3407 Q406.6514,877.3407 405.3315,875.6889 Q404.0117,874.037 404.0117,870.9159 Q404.0117,867.7865 405.3315,866.1347 Q406.6514,864.4828 409.1582,864.4828 Q409.8638,864.4828 410.5112,864.6322 Q411.1587,864.7816 411.7231,865.0805 L411.7231,867.8031 Q411.0923,867.2221 410.4988,866.9523 Q409.9053,866.6825 409.2744,866.6825 Q407.9297,866.6825 407.2449,867.7492 Q406.5601,868.8158 406.5601,870.9159 Q406.5601,873.0077 407.2449,874.0744 Q407.9297,875.141 409.2744,875.141 Q409.9053,875.141 410.4988,874.8712 Q411.0923,874.6015 411.7231,874.0204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="76" x="429.75" y="875.616">AudioManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="361.5" x2="541.5" y1="886.6" y2="886.6"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="368.5" y="894.6"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="84" x="380.5" y="902.348">enabled: boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="368.5" y="908.9"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="88" x="380.5" y="916.648">cooldown: number</text><line style="stroke:#000000;stroke-width:1.0;" x1="361.5" x2="541.5" y1="923.2" y2="923.2"/><ellipse cx="371.5" cy="934.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="77" x="380.5" y="938.948">speak(message)</text><ellipse cx="371.5" cy="948.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="129" x="380.5" y="953.248">speakFeedback(feedbacks)</text><ellipse cx="371.5" cy="962.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="98" x="380.5" y="967.548">waitForIdle(timeout)</text><ellipse cx="371.5" cy="977.1" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="156" x="380.5" y="981.848">getExerciseSpokenText(id, level)</text><!--MD5=[1dd07b0d44aee610d043a0002d5988d9]
class TutorialManager--><rect codeLine="195" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="90.9" id="TutorialManager" style="stroke:#000000;stroke-width:1.5;" width="119" x="392" y="714.05"/><ellipse cx="407" cy="730.05" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M409.4731,736.1931 Q408.8921,736.4919 408.2529,736.6413 Q407.6138,736.7907 406.9082,736.7907 Q404.4014,736.7907 403.0815,735.1389 Q401.7617,733.487 401.7617,730.3659 Q401.7617,727.2365 403.0815,725.5847 Q404.4014,723.9328 406.9082,723.9328 Q407.6138,723.9328 408.2612,724.0822 Q408.9087,724.2316 409.4731,724.5305 L409.4731,727.2531 Q408.8423,726.6721 408.2488,726.4023 Q407.6553,726.1325 407.0244,726.1325 Q405.6797,726.1325 404.9949,727.1992 Q404.3101,728.2658 404.3101,730.3659 Q404.3101,732.4577 404.9949,733.5244 Q405.6797,734.591 407.0244,734.591 Q407.6553,734.591 408.2488,734.3212 Q408.8423,734.0515 409.4731,733.4704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="87" x="421" y="735.066">TutorialManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="393" x2="510" y1="746.05" y2="746.05"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="400" y="754.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="78" x="412" y="761.798">isOpen: boolean</text><line style="stroke:#000000;stroke-width:1.0;" x1="393" x2="510" y1="768.35" y2="768.35"/><ellipse cx="403" cy="779.35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="51" x="412" y="784.098">open(lang)</text><ellipse cx="403" cy="793.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="31" x="412" y="798.398">close()</text><!--MD5=[1027430669dbe09cf3ac84b359d871ec]
class ScorePopupManager--><rect codeLine="202" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="76.6" id="ScorePopupManager" style="stroke:#000000;stroke-width:1.5;" width="141" x="638.5" y="1082.2"/><ellipse cx="653.5" cy="1098.2" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M655.9731,1104.3431 Q655.3921,1104.6419 654.7529,1104.7913 Q654.1138,1104.9407 653.4082,1104.9407 Q650.9014,1104.9407 649.5815,1103.2889 Q648.2617,1101.637 648.2617,1098.5159 Q648.2617,1095.3865 649.5815,1093.7347 Q650.9014,1092.0828 653.4082,1092.0828 Q654.1138,1092.0828 654.7612,1092.2322 Q655.4087,1092.3816 655.9731,1092.6805 L655.9731,1095.4031 Q655.3423,1094.8221 654.7488,1094.5523 Q654.1553,1094.2825 653.5244,1094.2825 Q652.1797,1094.2825 651.4949,1095.3492 Q650.8101,1096.4158 650.8101,1098.5159 Q650.8101,1100.6077 651.4949,1101.6744 Q652.1797,1102.741 653.5244,1102.741 Q654.1553,1102.741 654.7488,1102.4712 Q655.3423,1102.2015 655.9731,1101.6204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="109" x="667.5" y="1103.216">ScorePopupManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="639.5" x2="778.5" y1="1114.2" y2="1114.2"/><line style="stroke:#000000;stroke-width:1.0;" x1="639.5" x2="778.5" y1="1122.2" y2="1122.2"/><ellipse cx="649.5" cy="1133.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="108" x="658.5" y="1137.948">show(summary, grade)</text><ellipse cx="649.5" cy="1147.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="31" x="658.5" y="1152.248">close()</text><!--MD5=[ca58359f07f9a4065c7e5ec85443e727]
class RulesConfigManager--><rect codeLine="208" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="76.6" id="RulesConfigManager" style="stroke:#000000;stroke-width:1.5;" width="168" x="625" y="955.2"/><ellipse cx="653.05" cy="971.2" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M655.5231,977.3431 Q654.9421,977.6419 654.3029,977.7913 Q653.6638,977.9407 652.9582,977.9407 Q650.4514,977.9407 649.1315,976.2889 Q647.8117,974.637 647.8117,971.5159 Q647.8117,968.3865 649.1315,966.7347 Q650.4514,965.0828 652.9582,965.0828 Q653.6638,965.0828 654.3112,965.2322 Q654.9587,965.3816 655.5231,965.6805 L655.5231,968.4031 Q654.8923,967.8221 654.2988,967.5523 Q653.7053,967.2825 653.0744,967.2825 Q651.7297,967.2825 651.0449,968.3492 Q650.3601,969.4158 650.3601,971.5159 Q650.3601,973.6077 651.0449,974.6744 Q651.7297,975.741 653.0744,975.741 Q653.7053,975.741 654.2988,975.4712 Q654.8923,975.2015 655.5231,974.6204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="107" x="669.95" y="976.216">RulesConfigManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="626" x2="792" y1="987.2" y2="987.2"/><line style="stroke:#000000;stroke-width:1.0;" x1="626" x2="792" y1="995.2" y2="995.2"/><ellipse cx="636" cy="1006.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="142" x="645" y="1010.948">setRuleEnabled(key, enabled)</text><ellipse cx="636" cy="1020.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="84" x="645" y="1025.248">resetToDefaults()</text><!--MD5=[45ce707b976a738d2e4595cad6afaa40]
class GestureManager--><rect codeLine="214" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="90.9" id="GestureManager" style="stroke:#000000;stroke-width:1.5;" width="132" x="643" y="659.05"/><ellipse cx="664.3" cy="675.05" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M666.7731,681.1931 Q666.1921,681.4919 665.5529,681.6413 Q664.9138,681.7907 664.2082,681.7907 Q661.7014,681.7907 660.3815,680.1389 Q659.0617,678.487 659.0617,675.3659 Q659.0617,672.2365 660.3815,670.5847 Q661.7014,668.9328 664.2082,668.9328 Q664.9138,668.9328 665.5612,669.0822 Q666.2087,669.2316 666.7731,669.5305 L666.7731,672.2531 Q666.1423,671.6721 665.5488,671.4023 Q664.9553,671.1325 664.3244,671.1325 Q662.9797,671.1325 662.2949,672.1992 Q661.6101,673.2658 661.6101,675.3659 Q661.6101,677.4577 662.2949,678.5244 Q662.9797,679.591 664.3244,679.591 Q664.9553,679.591 665.5488,679.3212 Q666.1423,679.0515 666.7731,678.4704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="86" x="679.7" y="680.066">GestureManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="644" x2="774" y1="691.05" y2="691.05"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="651" y="699.05"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="82" x="663" y="706.798">isReady: boolean</text><line style="stroke:#000000;stroke-width:1.0;" x1="644" x2="774" y1="713.35" y2="713.35"/><ellipse cx="654" cy="724.35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="22" x="663" y="729.098">init()</text><ellipse cx="654" cy="738.65" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="106" x="663" y="743.398">detectGestures(video)</text><!--MD5=[a53eb7802fcf6e4afed3783382088263]
class FeedbackManager--><rect codeLine="221" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="105.2" id="FeedbackManager" style="stroke:#000000;stroke-width:1.5;" width="128" x="645" y="799.9"/><ellipse cx="660" cy="815.9" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M662.4731,822.0431 Q661.8921,822.3419 661.2529,822.4913 Q660.6138,822.6407 659.9082,822.6407 Q657.4014,822.6407 656.0815,820.9889 Q654.7617,819.337 654.7617,816.2159 Q654.7617,813.0865 656.0815,811.4347 Q657.4014,809.7828 659.9082,809.7828 Q660.6138,809.7828 661.2612,809.9322 Q661.9087,810.0816 662.4731,810.3805 L662.4731,813.1031 Q661.8423,812.5221 661.2488,812.2523 Q660.6553,811.9825 660.0244,811.9825 Q658.6797,811.9825 657.9949,813.0492 Q657.3101,814.1158 657.3101,816.2159 Q657.3101,818.3077 657.9949,819.3744 Q658.6797,820.441 660.0244,820.441 Q660.6553,820.441 661.2488,820.1712 Q661.8423,819.9015 662.4731,819.3204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="96" x="674" y="820.916">FeedbackManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="646" x2="772" y1="831.9" y2="831.9"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="653" y="839.9"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="71" x="665" y="847.648">formUrl: string</text><line style="stroke:#000000;stroke-width:1.0;" x1="646" x2="772" y1="854.2" y2="854.2"/><ellipse cx="656" cy="865.2" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="69" x="665" y="869.948">createButton()</text><ellipse cx="656" cy="879.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="60" x="665" y="884.248">showPopup()</text><ellipse cx="656" cy="893.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="46" x="665" y="898.548">getLang()</text><!--MD5=[f097a9da547c6f19ba7a5c97c093eb18]
class SessionManager--><rect codeLine="245" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="85.8" id="SessionManager" style="stroke:#000000;stroke-width:1.5;" width="122" x="390.5" y="1559.6"/><ellipse cx="408.2" cy="1580.2" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M410.6731,1586.3431 Q410.0921,1586.6419 409.4529,1586.7913 Q408.8138,1586.9407 408.1082,1586.9407 Q405.6014,1586.9407 404.2815,1585.2889 Q402.9617,1583.637 402.9617,1580.5159 Q402.9617,1577.3865 404.2815,1575.7347 Q405.6014,1574.0828 408.1082,1574.0828 Q408.8138,1574.0828 409.4612,1574.2322 Q410.1087,1574.3816 410.6731,1574.6805 L410.6731,1577.4031 Q410.0423,1576.8221 409.4488,1576.5523 Q408.8553,1576.2825 408.2244,1576.2825 Q406.8797,1576.2825 406.1949,1577.3492 Q405.5101,1578.4158 405.5101,1580.5159 Q405.5101,1582.6077 406.1949,1583.6744 Q406.8797,1584.741 408.2244,1584.741 Q408.8553,1584.741 409.4488,1584.4712 Q410.0423,1584.2015 410.6731,1583.6204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="442.3" y="1577.416">«Utility»</text><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="84" x="422.8" y="1593.016">SessionManager</text><line style="stroke:#000000;stroke-width:1.5;" x1="391.5" x2="511.5" y1="1600.8" y2="1600.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="391.5" x2="511.5" y1="1608.8" y2="1608.8"/><ellipse cx="401.5" cy="1619.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="96" x="410.5" y="1624.548">getOrCreateUserId()</text><ellipse cx="401.5" cy="1634.1" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="96" x="410.5" y="1638.848">generateSessionId()</text><!--MD5=[cbfd515719b6910b093ca89747820c68]
class PathGenerator--><rect codeLine="250" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="71.5" id="PathGenerator" style="stroke:#000000;stroke-width:1.5;" width="235" x="334" y="1437.75"/><ellipse cx="408.25" cy="1458.35" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M410.7231,1464.4931 Q410.1421,1464.7919 409.5029,1464.9413 Q408.8638,1465.0907 408.1582,1465.0907 Q405.6514,1465.0907 404.3315,1463.4389 Q403.0117,1461.787 403.0117,1458.6659 Q403.0117,1455.5365 404.3315,1453.8847 Q405.6514,1452.2328 408.1582,1452.2328 Q408.8638,1452.2328 409.5112,1452.3822 Q410.1587,1452.5316 410.7231,1452.8305 L410.7231,1455.5531 Q410.0923,1454.9721 409.4988,1454.7023 Q408.9053,1454.4325 408.2744,1454.4325 Q406.9297,1454.4325 406.2449,1455.4992 Q405.5601,1456.5658 405.5601,1458.6659 Q405.5601,1460.7577 406.2449,1461.8244 Q406.9297,1462.891 408.2744,1462.891 Q408.9053,1462.891 409.4988,1462.6212 Q410.0923,1462.3515 410.7231,1461.7704 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="445.25" y="1455.566">«Utility»</text><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="78" x="428.75" y="1471.166">PathGenerator</text><line style="stroke:#000000;stroke-width:1.5;" x1="335" x2="568" y1="1478.95" y2="1478.95"/><line style="stroke:#000000;stroke-width:1.5;" x1="335" x2="568" y1="1486.95" y2="1486.95"/><ellipse cx="345" cy="1497.95" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="209" x="354" y="1502.698">generateDynamicPath(landmarks, exercise)</text><!--MD5=[e219136ea99e406b0a84800811d2e145]
class DataExporter--><rect codeLine="254" fill="#FFFFFF" filter="url(#f1v5f3d2ypspkg)" height="85.8" id="DataExporter" style="stroke:#000000;stroke-width:1.5;" width="111" x="396" y="1301.6"/><ellipse cx="415.05" cy="1322.2" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M417.5231,1328.3431 Q416.9421,1328.6419 416.3029,1328.7913 Q415.6638,1328.9407 414.9582,1328.9407 Q412.4514,1328.9407 411.1315,1327.2889 Q409.8117,1325.637 409.8117,1322.5159 Q409.8117,1319.3865 411.1315,1317.7347 Q412.4514,1316.0828 414.9582,1316.0828 Q415.6638,1316.0828 416.3112,1316.2322 Q416.9587,1316.3816 417.5231,1316.6805 L417.5231,1319.4031 Q416.8923,1318.8221 416.2988,1318.5523 Q415.7053,1318.2825 415.0744,1318.2825 Q413.7297,1318.2825 413.0449,1319.3492 Q412.3601,1320.4158 412.3601,1322.5159 Q412.3601,1324.6077 413.0449,1325.6744 Q413.7297,1326.741 415.0744,1326.741 Q415.7053,1326.741 416.2988,1326.4712 Q416.8923,1326.2015 417.5231,1325.6204 Z " fill="#000000"/><text fill="#000000" font-family="sarabun" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="442.45" y="1319.416">«Utility»</text><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="70" x="429.95" y="1335.016">DataExporter</text><line style="stroke:#000000;stroke-width:1.5;" x1="397" x2="506" y1="1342.8" y2="1342.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="397" x2="506" y1="1350.8" y2="1350.8"/><ellipse cx="407" cy="1361.8" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="85" x="416" y="1366.548">exportJSON(data)</text><ellipse cx="407" cy="1376.1" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="78" x="416" y="1380.848">exportCSV(data)</text><path d="M6,6 L6,185 L278,185 L278,16 L268,6 L6,6 " fill="#FBFB77" filter="url(#f1v5f3d2ypspkg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M268,6 L268,16 L278,16 L268,6 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="12" y="24.884">TaijiFlow AI Architecture</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="0" x="15" y="41.784"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="172" x="12" y="58.684">MVC-like Pattern (5 Packages):</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="4" x="12" y="75.584">-</text><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="19" y="75.584">Controllers</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="170" x="86" y="75.584">: script.js + Keyboard + Display</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="4" x="12" y="92.484">-</text><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="19" y="92.484">Core</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="216" x="47" y="92.484">: HeuristicsEngine, Calibration, Scoring</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="4" x="12" y="109.384">-</text><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="43" x="19" y="109.384">Display</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="155" x="62" y="109.384">: Drawing, Ghost, Silhouette</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="4" x="12" y="126.284">-</text><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="13" x="19" y="126.284">UI</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="123" x="32" y="126.284">: UIManager + 6 more</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="4" x="12" y="143.184">-</text><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="19" y="143.184">Utility</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="134" x="57" y="143.184">: Session, Path, Exporter</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="0" x="15" y="160.084"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="164" x="12" y="176.984">Total: 18 Classes, 21 Modules</text><!--MD5=[32b2559013a2af7d3fbb88a153276af5]
link DrawingManager to GhostManager--><!--MD5=[8bc32212dad9a8717d16c822af8c8827]
link GhostManager to SilhouetteManager--><!--MD5=[51eaa1b43a149febd10d66dbba0f63b6]
link UIManager to AudioManager--><!--MD5=[206c125da6c0fa549c2eb92f359766ca]
link AudioManager to TutorialManager--><!--MD5=[a0969e0435b22411c39d04728eb08a32]
link TutorialManager to ScorePopupManager--><!--MD5=[17a773bcde99f8f6aad6ef435d752061]
link ScorePopupManager to RulesConfigManager--><!--MD5=[78b5e27333e049fa5626f7341eb605de]
link RulesConfigManager to GestureManager--><!--MD5=[ec4871536f25f262224859d313d60b14]
link GestureManager to FeedbackManager--><!--MD5=[8ecf8a2be7bc1144d736fe69cb3dc5d0]
link SessionManager to PathGenerator--><!--MD5=[b4153a4765cd3212441a027f5c92dbfd]
link PathGenerator to DataExporter--><!--MD5=[bf3c87166e1461fb0037a62116064262]
link Script to KeyboardController--><path codeLine="270" d="M215.35,421.9 C215.35,421.9 377.19,421.9 377.19,421.9 " fill="none" id="Script-to-KeyboardController" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="382.19,421.9,373.19,417.9,377.19,421.9,373.19,425.9,382.19,421.9" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[066c35afdd785367532baf5480047ad9]
link Script to DisplayController--><path codeLine="271" d="M215.39,478.88 C352.55,478.88 634,478.88 634,478.88 C634,478.88 634,468.14 634,468.14 " fill="none" id="Script-to-DisplayController" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="634,463.14,630,472.14,634,468.14,638,472.14,634,463.14" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[bb640fb10fb5d2929dca8b96a4ce4b2e]
link Script to HeuristicsEngine--><path codeLine="272" d="M215.13,504.03 C455.52,504.03 1206,504.03 1206,504.03 C1206,504.03 1206,1008.54 1206,1008.54 " fill="none" id="Script-to-HeuristicsEngine" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="1206,1013.54,1210,1004.54,1206,1008.54,1202,1004.54,1206,1013.54" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[df44e9dcfa25f6d6d0ebc55302acba7f]
link Script to CalibrationManager--><path codeLine="273" d="M215.25,491.45 C484.38,491.45 1403,491.45 1403,491.45 C1403,491.45 1403,1025.19 1403,1025.19 " fill="none" id="Script-to-CalibrationManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="1403,1030.19,1407,1021.19,1403,1025.19,1399,1021.19,1403,1030.19" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[e96b2d5337d6cc8c6fa37ff8fa78d55e]
link Script to DrawingManager--><path codeLine="274" d="M215.2,523.33 C390.52,523.33 820,523.33 820,523.33 C820,523.33 820,733.53 820,733.53 C820,733.53 868.75,733.53 868.75,733.53 " fill="none" id="Script-to-DrawingManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="873.75,733.53,864.75,729.53,868.75,733.53,864.75,737.53,873.75,733.53" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[6fbfb2b36488141d6f4cc532d3959812]
link Script to UIManager--><path codeLine="275" d="M157,540.57 C157,711.16 157,1098.5 157,1098.5 C157,1098.5 377.79,1098.5 377.79,1098.5 " fill="none" id="Script-to-UIManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="382.79,1098.5,373.79,1094.5,377.79,1098.5,373.79,1102.5,382.79,1098.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[1b30a48cdca0eca6112e471747dd5049]
link Script to AudioManager--><path codeLine="276" d="M215.41,533.42 C282.72,533.42 372,533.42 372,533.42 C372,533.42 372,847.83 372,847.83 " fill="none" id="Script-to-AudioManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="372,852.83,376,843.83,372,847.83,368,843.83,372,852.83" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[d3159cad506f0cb1a1310c2a9273c5ba]
link Script to TutorialManager--><path codeLine="277" d="M215.47,530.06 C307.14,530.06 452,530.06 452,530.06 C452,530.06 452,707.11 452,707.11 " fill="none" id="Script-to-TutorialManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="452,712.11,456,703.11,452,707.11,448,703.11,452,712.11" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[c9d5948225815dc913d981d595174205]
link Script to GestureManager--><path codeLine="278" d="M215.25,526.69 C368.53,526.69 709,526.69 709,526.69 C709,526.69 709,652.2 709,652.2 " fill="none" id="Script-to-GestureManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="709,657.2,713,648.2,709,652.2,705,648.2,709,657.2" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[054d7b1fdba22383893cfa838083967a]
link DisplayController to GhostManager--><path codeLine="281" d="M788.96,324.28 C788.96,324.28 866.34,324.28 866.34,324.28 " fill="none" id="DisplayController-to-GhostManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="871.34,324.28,862.34,320.28,866.34,324.28,862.34,328.28,871.34,324.28" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[1846a93d7a5701a9b0bddea8ba6ba875]
link DisplayController to SilhouetteManager--><path codeLine="282" d="M782,461.22 C782,493.06 782,519.96 782,519.96 C782,519.96 868.55,519.96 868.55,519.96 " fill="none" id="DisplayController-to-SilhouetteManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="873.55,519.96,864.55,515.96,868.55,519.96,864.55,523.96,873.55,519.96" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[114b1c542304188696707e3b7725b454]
link KeyboardController to DisplayController--><path codeLine="283" d="M519.49,415.5 C519.49,415.5 622.67,415.5 622.67,415.5 " fill="none" id="KeyboardController-to-DisplayController" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="627.67,415.5,618.6815,411.4743,622.67,415.4857,618.6586,419.4743,627.67,415.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[93c85ec313925d227df23d58d1ea3cf5]
link HeuristicsEngine to CalibrationManager--><path codeLine="286" d="M1295.49,1120.5 C1295.49,1120.5 1328.17,1120.5 1328.17,1120.5 " fill="none" id="HeuristicsEngine-to-CalibrationManager" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="1333.17,1120.5,1324.17,1116.5,1328.17,1120.5,1324.17,1124.5,1333.17,1120.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[f54eabe09eee0fd5b70ad09dfcf80d76]
reverse link ScoringManager to HeuristicsEngine--><path codeLine="287" d="M1053.84,1132.5 C1053.84,1132.5 1117.62,1132.5 1117.62,1132.5 " fill="none" id="ScoringManager-backto-HeuristicsEngine" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="1048.84,1132.5,1057.84,1136.5,1053.84,1132.5,1057.84,1128.5,1048.84,1132.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[8130cbae6e915c6bd816ad1177fd8668]
reverse link DrawingManager to HeuristicsEngine--><path codeLine="288" d="M1061,927.13 C1061,927.13 1061,1020.88 1061,1020.88 C1061,1020.88 1087.38,1020.88 1117.67,1020.88 " fill="none" id="DrawingManager-backto-HeuristicsEngine" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="1061,922.13,1057,931.13,1061,927.13,1065,931.13,1061,922.13" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[21cbf8643b8569618ababa145af3b81c]
link UIManager to ScorePopupManager--><path codeLine="291" d="M518.82,1132.9 C518.82,1132.9 631.51,1132.9 631.51,1132.9 " fill="none" id="UIManager-to-ScorePopupManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="636.51,1132.9,627.51,1128.9,631.51,1132.9,627.51,1136.9,636.51,1132.9" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[6cc97f7bc7c31b26f16b0bdedb965ee3]
link ScoringManager to ScorePopupManager--><path codeLine="292" d="M903.73,1120.5 C903.73,1120.5 786.49,1120.5 786.49,1120.5 " fill="none" id="ScoringManager-to-ScorePopupManager" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="781.49,1120.5,790.49,1124.5,786.49,1120.5,790.49,1116.5,781.49,1120.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[fefc158ffacc74b4ea6c698976d9bb28]
link Script to FeedbackManager--><path codeLine="293" d="M186,540.5 C186,648.72 186,829.78 186,829.78 C186,829.78 638.09,829.78 638.09,829.78 " fill="none" id="Script-to-FeedbackManager" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="643.09,829.77,634.09,825.77,638.09,829.77,634.09,833.77,643.09,829.77" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[9b185d876e8dca1007bb9a7007ca0ac2]
link RulesConfigManager to HeuristicsEngine--><path codeLine="294" d="M793.39,1026.34 C793.39,1026.34 1111.4,1026.34 1111.4,1026.34 " fill="none" id="RulesConfigManager-to-HeuristicsEngine" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="1116.4,1026.34,1107.4,1022.34,1111.4,1026.34,1107.4,1030.34,1116.4,1026.34" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[e978cfe7b79b9a9eecbc1f12c7812525]
link Script to SessionManager--><path codeLine="297" d="M98,540.38 C98,798.65 98,1602.5 98,1602.5 C98,1602.5 383.82,1602.5 383.82,1602.5 " fill="none" id="Script-to-SessionManager" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="388.82,1602.5,379.82,1598.5,383.82,1602.5,379.82,1606.5,388.82,1602.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[a0e975fe68959f3d5f45bfbb14c56c08]
link Script to PathGenerator--><path codeLine="298" d="M215.43,536.79 C274.25,536.79 347,536.79 347,536.79 C347,536.79 347,1430.84 347,1430.84 " fill="none" id="Script-to-PathGenerator" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="347,1435.84,351,1426.84,347,1430.84,343,1426.84,347,1435.84" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[107d199cd8363bbd797a6879dcd0743d]
link Script to DataExporter--><path codeLine="299" d="M127,540.64 C127,757.37 127,1344.5 127,1344.5 C127,1344.5 389.2,1344.5 389.2,1344.5 " fill="none" id="Script-to-DataExporter" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="394.2,1344.5,385.2,1340.5,389.2,1344.5,385.2,1348.5,394.2,1344.5" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[1acda22cdc12c3f803fa5f2529d1d7a5]
@startuml TaijiFlow_Class_Diagram
' ============================================================================
' TaijiFlow AI - Class Diagram v1.2 (Updated: 2026-01-07)
' ============================================================================
' จัดกลุ่มด้วย Packages เพื่อความชัดเจน
' อ้างอิง: 21 JavaScript Modules
' ============================================================================

skinparam defaultFontName "sarabun"
skinparam packageStyle rectangle

' === Line Style Settings (ลดเส้นซ้อนทับ) ===
left to right direction
skinparam linetype ortho
skinparam nodesep 50
skinparam ranksep 40

skinparam class {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam package {
    BackgroundColor<<Controller>> #E3F2FD
    BackgroundColor<<Core>> #FFF3E0
    BackgroundColor<<Display>> #E0F7FA
    BackgroundColor<<UI>> #E8F5E9
    BackgroundColor<<Utility>> #F3E5F5
}

' ============================================================================
' CONTROLLERS PACKAGE
' ============================================================================

package "Controllers" <<Controller>> {
    class "script.js" as Script <<Main>> {
        - isTrainingMode: boolean
        - currentExercise: string
        - currentLevel: string
        - -
        + startTrainingFlow()
        + endTrainingSession()
        + onResults(results)
        + loadReferenceData()
    }
    
    class KeyboardController {
        - deps: object
        - -
        + handleKeydown(event)
        + showShortcutsHelp()
    }
    
    class DisplayController {
        - showGhostOverlay: boolean
        - showPath: boolean
        - showSkeleton: boolean
        - showSilhouette: boolean
        - showTrail: boolean
        - trailHistory: array
        - -
        + init()
        + toggleInstructor(show)
        + resetToDefaults()
        + addTrailPoint(x, y)
        + clearTrail()
    }
    
    note as NC
        **จัดการ Application Flow**
        Script = Main Controller
        Keyboard = 14 Shortcuts
        Display = 6 Options
    end note
}

' ============================================================================
' CORE MANAGERS PACKAGE
' ============================================================================

package "Core Managers" <<Core>> {
    class HeuristicsEngine {
        - config: object
        - calibrationData: object
        - -
        + analyze(landmarks): Feedback[]
        + setCalibration(data)
        - checkPathShape()
        - checkElbowSinking()
        - checkContinuity()
        - checkContinuity()
        - checkArmRotation()
        .. +4 more rules ..
    }
    
    class CalibrationManager {
        - isActive: boolean
        - calibrationData: object
        - level: string
        - -
        + start()
        + stop()
        + cancel()
        + process(landmarks)
        + setLevel(level)
        + drawOverlay(ctx)
    }
    
    class ScoringManager {
        - totalFrames: int
        - correctFrames: int
        - -
        + start()
        + recordFrame(feedbacks)
        + getSummary(): object
    }
}

' ============================================================================
' DISPLAY MANAGERS PACKAGE (แยกจาก Core เพราะเป็น View/Render)
' ============================================================================

package "Display Managers" <<Display>> {
    class DrawingManager {
        - ctx: CanvasRenderingContext2D
        - isMirrored: boolean
        - -
        + drawSkeleton(landmarks)
        + drawPath(path, color)
        + drawTrail(history)
        + drawFeedbackPanel(feedbacks)
        + drawDebugOverlay(debugInfo)
        + drawGhostSkeleton(landmarks)
        + drawSilhouetteVideo(video, opacity)
        + drawSilhouette(mask, color)
        + drawGestureFeedback(feedback)
        + drawCircularityIndicator(score)
    }
    
    class GhostManager {
        - isPlaying: boolean
        - opacity: number
        - silhouetteVideo: HTMLVideoElement
        - -
        + load(data)
        + loadSilhouetteVideo(url)
        + start()
        + stop()
        + update()
        + update()
        + getCurrentFrame()
        + setSpeed(speed)
        + setOpacity(opacity)
    }
    
    class SilhouetteManager {
        - isEnabled: boolean
        - color: string
        - -
        + enable()
        + disable()
        + toggle()
        + drawSilhouetteFromMask(ctx, mask)
    }
    
    ' Force horizontal layout
    DrawingManager -[hidden]right- GhostManager
    GhostManager -[hidden]right- SilhouetteManager
}

' ============================================================================
' UI MANAGERS PACKAGE
' ============================================================================

package "UI & Feedback" <<UI>> {
    together {
        class UIManager {
            - currentLang: string
            - currentTheme: string
            - -
            + toggleLanguage()
            + toggleTheme()
            + showNotification(msg)
        }
        
        class AudioManager {
            - enabled: boolean
            - cooldown: number
            - -
            + speak(message)
            + speakFeedback(feedbacks)
            + waitForIdle(timeout)
            + getExerciseSpokenText(id, level)
        }
        
        class TutorialManager {
            - isOpen: boolean
            - -
            + open(lang)
            + close()
        }
        
        class ScorePopupManager {
            - -
            + show(summary, grade)
            + close()
        }
        
        class RulesConfigManager {
            - -
            + setRuleEnabled(key, enabled)
            + resetToDefaults()
        }
        
        class GestureManager {
            - isReady: boolean
            - -
            + init()
            + detectGestures(video)
        }
        
        class FeedbackManager {
            - formUrl: string
            - -
            + createButton()
            + showPopup()
            + getLang()
        }
    }
    
    ' Force horizontal layout
    UIManager -[hidden]right- AudioManager
    AudioManager -[hidden]right- TutorialManager
    TutorialManager -[hidden]right- ScorePopupManager
    ScorePopupManager -[hidden]right- RulesConfigManager
    RulesConfigManager -[hidden]right- GestureManager
    GestureManager -[hidden]right- FeedbackManager
}

' ============================================================================
' UTILITIES PACKAGE
' ============================================================================

package "Utilities" <<Utility>> {
    together {
        class SessionManager <<Utility>> {
            + getOrCreateUserId()
            + generateSessionId()
        }
        
        class PathGenerator <<Utility>> {
            + generateDynamicPath(landmarks, exercise)
        }
        
        class DataExporter <<Utility>> {
            + exportJSON(data)
            + exportCSV(data)
        }
    }
    
    ' Force horizontal layout
    SessionManager -[hidden]right- PathGenerator
    PathGenerator -[hidden]right- DataExporter
}

' ============================================================================
' RELATIONSHIPS (Simplified - ไม่มี label เพื่อความสะอาด)
' ============================================================================

' Controller relationships
Script - -> KeyboardController
Script - -> DisplayController
Script - -> HeuristicsEngine
Script - -> CalibrationManager
Script - -> DrawingManager
Script - -> UIManager
Script - -> AudioManager
Script - -> TutorialManager
Script - -> GestureManager

' Display Controller
DisplayController - -> GhostManager
DisplayController - -> SilhouetteManager
KeyboardController ..> DisplayController

' Core relationships
HeuristicsEngine ..> CalibrationManager
ScoringManager <.. HeuristicsEngine
DrawingManager <.. HeuristicsEngine

' UI relationships
UIManager - -> ScorePopupManager
ScoringManager .[norank].> ScorePopupManager
Script - -> FeedbackManager
RulesConfigManager - -> HeuristicsEngine

' Utilities (เส้นประ = indirect)
Script ..> SessionManager
Script ..> PathGenerator
Script ..> DataExporter

' ============================================================================
' ARCHITECTURE NOTE
' ============================================================================

note as N1
    **TaijiFlow AI Architecture**
    
    MVC-like Pattern (5 Packages):
    - **Controllers**: script.js + Keyboard + Display
    - **Core**: HeuristicsEngine, Calibration, Scoring
    - **Display**: Drawing, Ghost, Silhouette
    - **UI**: UIManager + 6 more
    - **Utility**: Session, Path, Exporter
    
    Total: 18 Classes, 21 Modules
end note

@enduml

@startuml TaijiFlow_Class_Diagram

skinparam defaultFontName "sarabun"
skinparam packageStyle rectangle

left to right direction
skinparam linetype ortho
skinparam nodesep 50
skinparam ranksep 40

skinparam class {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam package {
    BackgroundColor<<Controller>> #E3F2FD
    BackgroundColor<<Core>> #FFF3E0
    BackgroundColor<<Display>> #E0F7FA
    BackgroundColor<<UI>> #E8F5E9
    BackgroundColor<<Utility>> #F3E5F5
}


package "Controllers" <<Controller>> {
    class "script.js" as Script <<Main>> {
        - isTrainingMode: boolean
        - currentExercise: string
        - currentLevel: string
        - -
        + startTrainingFlow()
        + endTrainingSession()
        + onResults(results)
        + loadReferenceData()
    }
    
    class KeyboardController {
        - deps: object
        - -
        + handleKeydown(event)
        + showShortcutsHelp()
    }
    
    class DisplayController {
        - showGhostOverlay: boolean
        - showPath: boolean
        - showSkeleton: boolean
        - showSilhouette: boolean
        - showTrail: boolean
        - trailHistory: array
        - -
        + init()
        + toggleInstructor(show)
        + resetToDefaults()
        + addTrailPoint(x, y)
        + clearTrail()
    }
    
    note as NC
        **จัดการ Application Flow**
        Script = Main Controller
        Keyboard = 14 Shortcuts
        Display = 6 Options
    end note
}


package "Core Managers" <<Core>> {
    class HeuristicsEngine {
        - config: object
        - calibrationData: object
        - -
        + analyze(landmarks): Feedback[]
        + setCalibration(data)
        - checkPathShape()
        - checkElbowSinking()
        - checkContinuity()
        - checkContinuity()
        - checkArmRotation()
        .. +4 more rules ..
    }
    
    class CalibrationManager {
        - isActive: boolean
        - calibrationData: object
        - level: string
        - -
        + start()
        + stop()
        + cancel()
        + process(landmarks)
        + setLevel(level)
        + drawOverlay(ctx)
    }
    
    class ScoringManager {
        - totalFrames: int
        - correctFrames: int
        - -
        + start()
        + recordFrame(feedbacks)
        + getSummary(): object
    }
}


package "Display Managers" <<Display>> {
    class DrawingManager {
        - ctx: CanvasRenderingContext2D
        - isMirrored: boolean
        - -
        + drawSkeleton(landmarks)
        + drawPath(path, color)
        + drawTrail(history)
        + drawFeedbackPanel(feedbacks)
        + drawDebugOverlay(debugInfo)
        + drawGhostSkeleton(landmarks)
        + drawSilhouetteVideo(video, opacity)
        + drawSilhouette(mask, color)
        + drawGestureFeedback(feedback)
        + drawCircularityIndicator(score)
    }
    
    class GhostManager {
        - isPlaying: boolean
        - opacity: number
        - silhouetteVideo: HTMLVideoElement
        - -
        + load(data)
        + loadSilhouetteVideo(url)
        + start()
        + stop()
        + update()
        + update()
        + getCurrentFrame()
        + setSpeed(speed)
        + setOpacity(opacity)
    }
    
    class SilhouetteManager {
        - isEnabled: boolean
        - color: string
        - -
        + enable()
        + disable()
        + toggle()
        + drawSilhouetteFromMask(ctx, mask)
    }
    
    DrawingManager -[hidden]right- GhostManager
    GhostManager -[hidden]right- SilhouetteManager
}


package "UI & Feedback" <<UI>> {
    together {
        class UIManager {
            - currentLang: string
            - currentTheme: string
            - -
            + toggleLanguage()
            + toggleTheme()
            + showNotification(msg)
        }
        
        class AudioManager {
            - enabled: boolean
            - cooldown: number
            - -
            + speak(message)
            + speakFeedback(feedbacks)
            + waitForIdle(timeout)
            + getExerciseSpokenText(id, level)
        }
        
        class TutorialManager {
            - isOpen: boolean
            - -
            + open(lang)
            + close()
        }
        
        class ScorePopupManager {
            - -
            + show(summary, grade)
            + close()
        }
        
        class RulesConfigManager {
            - -
            + setRuleEnabled(key, enabled)
            + resetToDefaults()
        }
        
        class GestureManager {
            - isReady: boolean
            - -
            + init()
            + detectGestures(video)
        }
        
        class FeedbackManager {
            - formUrl: string
            - -
            + createButton()
            + showPopup()
            + getLang()
        }
    }
    
    UIManager -[hidden]right- AudioManager
    AudioManager -[hidden]right- TutorialManager
    TutorialManager -[hidden]right- ScorePopupManager
    ScorePopupManager -[hidden]right- RulesConfigManager
    RulesConfigManager -[hidden]right- GestureManager
    GestureManager -[hidden]right- FeedbackManager
}


package "Utilities" <<Utility>> {
    together {
        class SessionManager <<Utility>> {
            + getOrCreateUserId()
            + generateSessionId()
        }
        
        class PathGenerator <<Utility>> {
            + generateDynamicPath(landmarks, exercise)
        }
        
        class DataExporter <<Utility>> {
            + exportJSON(data)
            + exportCSV(data)
        }
    }
    
    SessionManager -[hidden]right- PathGenerator
    PathGenerator -[hidden]right- DataExporter
}


Script - -> KeyboardController
Script - -> DisplayController
Script - -> HeuristicsEngine
Script - -> CalibrationManager
Script - -> DrawingManager
Script - -> UIManager
Script - -> AudioManager
Script - -> TutorialManager
Script - -> GestureManager

DisplayController - -> GhostManager
DisplayController - -> SilhouetteManager
KeyboardController ..> DisplayController

HeuristicsEngine ..> CalibrationManager
ScoringManager <.. HeuristicsEngine
DrawingManager <.. HeuristicsEngine

UIManager - -> ScorePopupManager
ScoringManager .[norank].> ScorePopupManager
Script - -> FeedbackManager
RulesConfigManager - -> HeuristicsEngine

Script ..> SessionManager
Script ..> PathGenerator
Script ..> DataExporter


note as N1
    **TaijiFlow AI Architecture**
    
    MVC-like Pattern (5 Packages):
    - **Controllers**: script.js + Keyboard + Display
    - **Core**: HeuristicsEngine, Calibration, Scoring
    - **Display**: Drawing, Ghost, Silhouette
    - **UI**: UIManager + 6 more
    - **Utility**: Session, Path, Exporter
    
    Total: 18 Classes, 21 Modules
end note

@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>