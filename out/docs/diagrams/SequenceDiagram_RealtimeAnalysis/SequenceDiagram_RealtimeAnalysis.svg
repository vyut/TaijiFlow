<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1365px" preserveAspectRatio="none" style="width:880px;height:1365px;background:#00000000;" version="1.1" viewBox="0 0 880 1365" width="880px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ojl4w04z5yx4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="1165.9" style="stroke:#A80036;stroke-width:1.0;" width="10" x="180" y="119.2"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="382.1" style="stroke:#A80036;stroke-width:1.0;" width="10" x="360" y="176"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="1207.7" style="stroke:#000000;stroke-width:2.0;" width="856" x="10" y="77.4"/><rect fill="#FFF3E0" filter="url(#f1ojl4w04z5yx4)" height="431.9" style="stroke:#000000;stroke-width:2.0;" width="539" x="138" y="134.2"/><rect fill="#FFF3E0" filter="url(#f1ojl4w04z5yx4)" height="107.6" style="stroke:#000000;stroke-width:2.0;" width="440.5" x="138" y="580.1"/><rect fill="#E0F7FA" filter="url(#f1ojl4w04z5yx4)" height="461.7" style="stroke:#000000;stroke-width:2.0;" width="700" x="128" y="701.7"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="602.5" x="138" y="727.6"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="587.5" x="138" y="801.4"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="680" x="138" y="875.2"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="623.5" x="138" y="949"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="581.5" x="138" y="1022.8"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="602.5" x="138" y="1096.6"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="100.7" style="stroke:#000000;stroke-width:2.0;" width="718" x="138" y="1177.4"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="60.4" y2="1302.1"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="185" x2="185" y1="60.4" y2="1302.1"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="364.5" x2="364.5" y1="60.4" y2="1302.1"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="533.5" x2="533.5" y1="60.4" y2="1302.1"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="616.5" x2="616.5" y1="60.4" y2="1302.1"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="691.5" x2="691.5" y1="60.4" y2="1302.1"/><rect fill="#E8F5E9" filter="url(#f1ojl4w04z5yx4)" height="50.4" style="stroke:#A80036;stroke-width:1.5;" width="76" x="20" y="5"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="62" x="27" y="26.952">MediaPipe</text><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="29" x="43.5" y="45.152">Pose</text><rect fill="#E8F5E9" filter="url(#f1ojl4w04z5yx4)" height="50.4" style="stroke:#A80036;stroke-width:1.5;" width="76" x="20" y="1301.1"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="62" x="27" y="1323.052">MediaPipe</text><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="29" x="43.5" y="1341.252">Pose</text><rect fill="#E3F2FD" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="70" x="148" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="50" x="158" y="45.152">Training</text><rect fill="#E3F2FD" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="70" x="148" y="1301.1"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="50" x="158" y="1323.052">Training</text><rect fill="#FFF3E0" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="73" x="326.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="59" x="333.5" y="45.152">Heuristics</text><rect fill="#FFF3E0" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="73" x="326.5" y="1301.1"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="59" x="333.5" y="1323.052">Heuristics</text><rect fill="#FFF3E0" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="65" x="499.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="39" x="512.5" y="45.152">Scorer</text><rect fill="#FFF3E0" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="65" x="499.5" y="1301.1"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="39" x="512.5" y="1323.052">Scorer</text><rect fill="#E0F7FA" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="72" x="578.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="49" x="591.5" y="45.152">Drawing</text><rect fill="#E0F7FA" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="72" x="578.5" y="1301.1"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="49" x="591.5" y="1323.052">Drawing</text><rect fill="#E8F5E9" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="51" x="664.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="13" x="683.5" y="45.152">UI</text><rect fill="#E8F5E9" filter="url(#f1ojl4w04z5yx4)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="51" x="664.5" y="1301.1"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="13" x="683.5" y="1323.052">UI</text><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="1165.9" style="stroke:#A80036;stroke-width:1.0;" width="10" x="180" y="119.2"/><rect fill="#FFFFFF" filter="url(#f1ojl4w04z5yx4)" height="382.1" style="stroke:#A80036;stroke-width:1.0;" width="10" x="360" y="176"/><path d="M10,77.4 L82,77.4 L82,85.4 L72,95.4 L10,95.4 L10,77.4 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1207.7" style="stroke:#000000;stroke-width:2.0;" width="856" x="10" y="77.4"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="25" y="92.284">loop</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="97" y="91.148">[ทุก 3 Frames (~10 fps เพื่อประหยัด CPU)]</text><polygon fill="#A80036" points="168,115.2,178,119.2,168,123.2,172,119.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="60" x2="174" y1="119.2" y2="119.2"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="101" x="69.5" y="114.184">onResults(results)</text><path d="M138,134.2 L285,134.2 L285,142.2 L275,152.2 L138,152.2 L138,134.2 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="431.9" style="stroke:#000000;stroke-width:2.0;" width="539" x="138" y="134.2"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="102" x="153" y="149.084">วิเคราะห์ท่า (8 กฎ)</text><polygon fill="#A80036" points="348,172,358,176,348,180,352,176" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="354" y1="176" y2="176"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="111" x="219.5" y="170.984">analyze(landmarks)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="206.9" y2="206.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="206.9" y2="219.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="219.9" y2="219.9"/><polygon fill="#A80036" points="381,215.9,371,219.9,381,223.9,377,219.9" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="114" x="377" y="201.884">1. checkPathShape()</text><path d="M503,190.5 L503,216.5 L618,216.5 L618,200.5 L608,190.5 L503,190.5 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M608,190.5 L608,200.5 L618,200.5 L608,190.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="94" x="509" y="209.384">เส้นทางเป็นวงโค้ง</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="250.8" y2="250.8"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="250.8" y2="263.8"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="263.8" y2="263.8"/><polygon fill="#A80036" points="381,259.8,371,263.8,381,267.8,377,263.8" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="135" x="377" y="245.784">2. checkWaistInitiation()</text><path d="M524,234.4 L524,260.4 L653,260.4 L653,244.4 L643,234.4 L524,234.4 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M643,234.4 L643,244.4 L653,244.4 L643,234.4 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="108" x="530" y="253.284">เอวนำการเคลื่อนไหว</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="294.7" y2="294.7"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="294.7" y2="307.7"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="307.7" y2="307.7"/><polygon fill="#A80036" points="381,303.7,371,307.7,381,311.7,377,307.7" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="119" x="377" y="289.684">3. checkWeightShift()</text><path d="M508,278.3 L508,304.3 L619,304.3 L619,288.3 L609,278.3 L508,278.3 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M609,278.3 L609,288.3 L619,288.3 L609,278.3 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="90" x="514" y="297.184">ถ่ายน้ำหนักสมดุล</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="338.6" y2="338.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="338.6" y2="351.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="351.6" y2="351.6"/><polygon fill="#A80036" points="381,347.6,371,351.6,381,355.6,377,351.6" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="145" x="377" y="333.584">4. checkVerticalStability()</text><path d="M534,322.2 L534,348.2 L634,348.2 L634,332.2 L624,322.2 L534,322.2 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M624,322.2 L624,332.2 L634,332.2 L624,322.2 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="79" x="540" y="341.084">ศีรษะนิ่ง ไม่โยก</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="382.5" y2="382.5"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="382.5" y2="395.5"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="395.5" y2="395.5"/><polygon fill="#A80036" points="381,391.5,371,395.5,381,399.5,377,395.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="126" x="377" y="377.484">5. checkArmRotation()</text><path d="M515,366.1 L515,392.1 L622,392.1 L622,376.1 L612,366.1 L515,366.1 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M612,366.1 L612,376.1 L622,376.1 L612,366.1 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="86" x="521" y="384.984">หมุนฝ่ามือถูกทิศ</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="426.4" y2="426.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="426.4" y2="439.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="439.4" y2="439.4"/><polygon fill="#A80036" points="381,435.4,371,439.4,381,443.4,377,439.4" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="127" x="377" y="421.384">6. checkElbowSinking()</text><path d="M516,410 L516,436 L614,436 L614,420 L604,410 L516,410 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M604,410 L604,420 L614,420 L604,410 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="77" x="522" y="428.884">ศอกจม ไม่ลอย</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="470.3" y2="470.3"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="470.3" y2="483.3"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="483.3" y2="483.3"/><polygon fill="#A80036" points="381,479.3,371,483.3,381,487.3,377,483.3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="121" x="377" y="465.284">7. checkSmoothness()</text><path d="M510,453.9 L510,479.9 L624,479.9 L624,463.9 L614,453.9 L510,453.9 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M614,453.9 L614,463.9 L624,463.9 L614,453.9 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="516" y="472.784">เคลื่อนไหวลื่นไหล</text><line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="412" y1="514.2" y2="514.2"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="412" y1="514.2" y2="527.2"/><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="412" y1="527.2" y2="527.2"/><polygon fill="#A80036" points="381,523.2,371,527.2,381,531.2,377,527.2" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="111" x="377" y="509.184">8. checkContinuity()</text><path d="M500,497.8 L500,523.8 L616,523.8 L616,507.8 L606,497.8 L500,497.8 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M606,497.8 L606,507.8 L616,507.8 L606,497.8 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="95" x="506" y="516.684">ต่อเนื่อง ไม่หยุดนิ่ง</text><polygon fill="#A80036" points="201,554.1,191,558.1,201,562.1,197,558.1" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="195" x2="364" y1="558.1" y2="558.1"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="64" x="245.5" y="553.084">feedbacks[]</text><path d="M138,580.1 L320,580.1 L320,588.1 L310,598.1 L138,598.1 L138,580.1 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="107.6" style="stroke:#000000;stroke-width:2.0;" width="440.5" x="138" y="580.1"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137" x="153" y="594.984">บันทึกข้อมูล (Recording)</text><polygon fill="#A80036" points="522,617.9,532,621.9,522,625.9,526,621.9" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="528" y1="621.9" y2="621.9"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="138" x="293" y="616.884">recordFrame(feedbacks)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="232" y1="659.75" y2="659.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="232" x2="232" y1="659.75" y2="672.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191" x2="232" y1="672.75" y2="672.75"/><polygon fill="#A80036" points="201,668.75,191,672.75,201,676.75,197,672.75" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="156" x="197" y="654.734">recordedSessionData.push()</text><path d="M365,634.9 L365,677.9 L535,677.9 L535,644.9 L525,634.9 L365,634.9 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M525,634.9 L525,644.9 L535,644.9 L525,634.9 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="149" x="371" y="653.784">เก็บ: landmarks, feedbacks,</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="112" x="371" y="670.684">timestamp, visibility</text><path d="M128,701.7 L292,701.7 L292,709.7 L282,719.7 L128,719.7 L128,701.7 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="461.7" style="stroke:#000000;stroke-width:2.0;" width="700" x="128" y="701.7"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119" x="143" y="716.584">วาดภาพ (Rendering)</text><path d="M138,727.6 L203,727.6 L203,735.6 L193,745.6 L138,745.6 L138,727.6 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="602.5" x="138" y="727.6"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="153" y="742.484">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119" x="218" y="741.348">[showSilhouette = true]</text><polygon fill="#A80036" points="604.5,770.4,614.5,774.4,604.5,778.4,608.5,774.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="610.5" y1="774.4" y2="774.4"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="153" x="326.75" y="769.384">drawSilhouetteFromMask()</text><path d="M621,751.5 L621,777.5 L721,777.5 L721,761.5 L711,751.5 L621,751.5 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M711,751.5 L711,761.5 L721,761.5 L711,751.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="79" x="627" y="770.384">เงาผู้ฝึก (สีม่วง)</text><path d="M138,801.4 L203,801.4 L203,809.4 L193,819.4 L138,819.4 L138,801.4 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="587.5" x="138" y="801.4"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="153" y="816.284">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="135" x="218" y="815.148">[showGhostOverlay = true]</text><polygon fill="#A80036" points="604.5,844.2,614.5,848.2,604.5,852.2,608.5,848.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="610.5" y1="848.2" y2="848.2"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="256" x="275.25" y="843.184">drawSilhouetteVideo() / drawGhostSkeleton()</text><path d="M621,825.3 L621,851.3 L706,851.3 L706,835.3 L696,825.3 L621,825.3 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M696,825.3 L696,835.3 L706,835.3 L696,825.3 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="64" x="627" y="844.184">เงาครู (สีฟ้า)</text><path d="M138,875.2 L203,875.2 L203,883.2 L193,893.2 L138,893.2 L138,875.2 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="680" x="138" y="875.2"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="153" y="890.084">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="218" y="888.948">[showInstructor = true]</text><polygon fill="#A80036" points="680,918,690,922,680,926,684,922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="686" y1="922" y2="922"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="143" x="369.5" y="916.984">วาด Instructor Thumbnail</text><path d="M697,899.1 L697,925.1 L799,925.1 L799,909.1 L789,899.1 L697,899.1 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M789,899.1 L789,909.1 L799,909.1 L789,899.1 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="81" x="703" y="917.984">วิดีโอมุมขวาบน</text><path d="M138,949 L203,949 L203,957 L193,967 L138,967 L138,949 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="623.5" x="138" y="949"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="153" y="963.884">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="218" y="962.748">[showPath = true]</text><polygon fill="#A80036" points="604.5,991.8,614.5,995.8,604.5,999.8,608.5,995.8" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="610.5" y1="995.8" y2="995.8"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="143" x="331.75" y="990.784">drawPath(referencePath)</text><path d="M621,972.9 L621,998.9 L742,998.9 L742,982.9 L732,972.9 L621,972.9 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M732,972.9 L732,982.9 L742,982.9 L732,972.9 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="100" x="627" y="991.784">เส้นนำทาง (สีเขียว)</text><path d="M138,1022.8 L203,1022.8 L203,1030.8 L193,1040.8 L138,1040.8 L138,1022.8 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="581.5" x="138" y="1022.8"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="153" y="1037.684">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="218" y="1036.548">[showSkeleton = true]</text><polygon fill="#A80036" points="604.5,1065.6,614.5,1069.6,604.5,1073.6,608.5,1069.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="610.5" y1="1069.6" y2="1069.6"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="145" x="330.75" y="1064.584">drawSkeleton(landmarks)</text><path d="M621,1046.7 L621,1072.7 L700,1072.7 L700,1056.7 L690,1046.7 L621,1046.7 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M690,1046.7 L690,1056.7 L700,1056.7 L690,1046.7 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="58" x="627" y="1065.584">กระดูกผู้ฝึก</text><path d="M138,1096.6 L203,1096.6 L203,1104.6 L193,1114.6 L138,1114.6 L138,1096.6 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="602.5" x="138" y="1096.6"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="153" y="1111.484">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="218" y="1110.348">[showTrail = true]</text><polygon fill="#A80036" points="604.5,1139.4,614.5,1143.4,604.5,1147.4,608.5,1143.4" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="610.5" y1="1143.4" y2="1143.4"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="126" x="340.25" y="1138.384">drawTrail(trailHistory)</text><path d="M621,1120.5 L621,1146.5 L721,1146.5 L721,1130.5 L711,1120.5 L621,1120.5 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M711,1120.5 L711,1130.5 L721,1130.5 L711,1120.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="79" x="627" y="1139.384">รอยเส้นตามมือ</text><path d="M138,1177.4 L199,1177.4 L199,1185.4 L189,1195.4 L138,1195.4 L138,1177.4 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="100.7" style="stroke:#000000;stroke-width:2.0;" width="718" x="138" y="1177.4"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="1192.284">alt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="214" y="1191.148">[มี feedback ใหม่]</text><polygon fill="#A80036" points="680,1220.2,690,1224.2,680,1228.2,684,1224.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="686" y1="1224.2" y2="1224.2"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="146" x="368" y="1219.184">updateFeedbackOverlay()</text><path d="M697,1201.3 L697,1227.3 L837,1227.3 L837,1211.3 L827,1201.3 L697,1201.3 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M827,1201.3 L827,1211.3 L837,1211.3 L827,1201.3 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="119" x="703" y="1220.184">แสดงข้อความ (HTML)</text><polygon fill="#A80036" points="680,1261.1,690,1265.1,680,1269.1,684,1265.1" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190" x2="686" y1="1265.1" y2="1265.1"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="178" x="352" y="1260.084">audioManager.speakFeedback()</text><path d="M697,1242.2 L697,1268.2 L792,1268.2 L792,1252.2 L782,1242.2 L697,1242.2 " fill="#FBFB77" filter="url(#f1ojl4w04z5yx4)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M782,1242.2 L782,1252.2 L792,1252.2 L782,1242.2 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="74" x="703" y="1261.084">พูดเสียง (TTS)</text><!--MD5=[870b308fecafa8169df317f2c3f62cb2]
@startuml SequenceDiagram_RealtimeAnalysis
' ============================================================================
' TaijiFlow AI - Sequence Diagram: Real-time Pose Analysis
' ============================================================================
' แสดงการวิเคราะห์ท่าแบบ Real-time ในแต่ละ Frame
' อ้างอิง: onResults() callback ใน script.js (lines 1200-1470)
' ============================================================================

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent
skinparam sequenceMessageAlign center

' === Participants ===
participant "MediaPipe\nPose" as MediaPipe #E8F5E9
participant " Training " as Training #E3F2FD
participant "Heuristics" as Heuristics #FFF3E0
participant "  Scorer  " as Scorer #FFF3E0
participant "  Drawing " as Drawing #E0F7FA
participant "    UI    " as UI #E8F5E9

' ============================================================================
' MAIN LOOP: onResults Callback
' ============================================================================

loop ทุก 3 Frames (~10 fps เพื่อประหยัด CPU)
    
    MediaPipe -> Training : onResults(results)
    activate Training
    
    ' === Step 1: Analyze Pose (8 Rules) ===
    group #FFF3E0 วิเคราะห์ท่า (8 กฎ)
        Training -> Heuristics : analyze(landmarks)
        activate Heuristics
        
        Heuristics -> Heuristics : 1. checkPathShape()
        note right: เส้นทางเป็นวงโค้ง
        
        Heuristics -> Heuristics : 2. checkWaistInitiation()
        note right: เอวนำการเคลื่อนไหว
        
        Heuristics -> Heuristics : 3. checkWeightShift()
        note right: ถ่ายน้ำหนักสมดุล
        
        Heuristics -> Heuristics : 4. checkVerticalStability()
        note right: ศีรษะนิ่ง ไม่โยก
        
        Heuristics -> Heuristics : 5. checkArmRotation()
        note right: หมุนฝ่ามือถูกทิศ
        
        Heuristics -> Heuristics : 6. checkElbowSinking()
        note right: ศอกจม ไม่ลอย
        
        Heuristics -> Heuristics : 7. checkSmoothness()
        note right: เคลื่อนไหวลื่นไหล
        
        Heuristics -> Heuristics : 8. checkContinuity()
        note right: ต่อเนื่อง ไม่หยุดนิ่ง
        
        Heuristics - -> Training : feedbacks[]
        deactivate Heuristics
    end
    
    ' === Step 2: Record Data ===
    group #FFF3E0 บันทึกข้อมูล (Recording)
        Training -> Scorer : recordFrame(feedbacks)
        Training -> Training : recordedSessionData.push()
        note right
            เก็บ: landmarks, feedbacks,
            timestamp, visibility
        end note
    end
    
    ' === Step 3: Draw Visuals (ตามลำดับจาก code) ===
    group #E0F7FA วาดภาพ (Rendering)
        opt showSilhouette = true
            Training -> Drawing : drawSilhouetteFromMask()
            note right: เงาผู้ฝึก (สีม่วง)
        end
        
        opt showGhostOverlay = true
            Training -> Drawing : drawSilhouetteVideo() / drawGhostSkeleton()
            note right: เงาครู (สีฟ้า)
        end
        
        opt showInstructor = true
            Training -> UI : วาด Instructor Thumbnail
            note right: วิดีโอมุมขวาบน
        end
        
        opt showPath = true
            Training -> Drawing : drawPath(referencePath)
            note right: เส้นนำทาง (สีเขียว)
        end
        
        opt showSkeleton = true
            Training -> Drawing : drawSkeleton(landmarks)
            note right: กระดูกผู้ฝึก
        end
        
        opt showTrail = true
            Training -> Drawing : drawTrail(trailHistory)
            note right: รอยเส้นตามมือ
        end
    end
    
    ' === Step 4: Show Feedback ===
    alt มี feedback ใหม่
        Training -> UI : updateFeedbackOverlay()
        note right: แสดงข้อความ (HTML)
        Training -> UI : audioManager.speakFeedback()
        note right: พูดเสียง (TTS)
    end
    
    deactivate Training
end

@enduml

@startuml SequenceDiagram_RealtimeAnalysis

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent
skinparam sequenceMessageAlign center

participant "MediaPipe\nPose" as MediaPipe #E8F5E9
participant " Training " as Training #E3F2FD
participant "Heuristics" as Heuristics #FFF3E0
participant "  Scorer  " as Scorer #FFF3E0
participant "  Drawing " as Drawing #E0F7FA
participant "    UI    " as UI #E8F5E9


loop ทุก 3 Frames (~10 fps เพื่อประหยัด CPU)
    
    MediaPipe -> Training : onResults(results)
    activate Training
    
    group #FFF3E0 วิเคราะห์ท่า (8 กฎ)
        Training -> Heuristics : analyze(landmarks)
        activate Heuristics
        
        Heuristics -> Heuristics : 1. checkPathShape()
        note right: เส้นทางเป็นวงโค้ง
        
        Heuristics -> Heuristics : 2. checkWaistInitiation()
        note right: เอวนำการเคลื่อนไหว
        
        Heuristics -> Heuristics : 3. checkWeightShift()
        note right: ถ่ายน้ำหนักสมดุล
        
        Heuristics -> Heuristics : 4. checkVerticalStability()
        note right: ศีรษะนิ่ง ไม่โยก
        
        Heuristics -> Heuristics : 5. checkArmRotation()
        note right: หมุนฝ่ามือถูกทิศ
        
        Heuristics -> Heuristics : 6. checkElbowSinking()
        note right: ศอกจม ไม่ลอย
        
        Heuristics -> Heuristics : 7. checkSmoothness()
        note right: เคลื่อนไหวลื่นไหล
        
        Heuristics -> Heuristics : 8. checkContinuity()
        note right: ต่อเนื่อง ไม่หยุดนิ่ง
        
        Heuristics - -> Training : feedbacks[]
        deactivate Heuristics
    end
    
    group #FFF3E0 บันทึกข้อมูล (Recording)
        Training -> Scorer : recordFrame(feedbacks)
        Training -> Training : recordedSessionData.push()
        note right
            เก็บ: landmarks, feedbacks,
            timestamp, visibility
        end note
    end
    
    group #E0F7FA วาดภาพ (Rendering)
        opt showSilhouette = true
            Training -> Drawing : drawSilhouetteFromMask()
            note right: เงาผู้ฝึก (สีม่วง)
        end
        
        opt showGhostOverlay = true
            Training -> Drawing : drawSilhouetteVideo() / drawGhostSkeleton()
            note right: เงาครู (สีฟ้า)
        end
        
        opt showInstructor = true
            Training -> UI : วาด Instructor Thumbnail
            note right: วิดีโอมุมขวาบน
        end
        
        opt showPath = true
            Training -> Drawing : drawPath(referencePath)
            note right: เส้นนำทาง (สีเขียว)
        end
        
        opt showSkeleton = true
            Training -> Drawing : drawSkeleton(landmarks)
            note right: กระดูกผู้ฝึก
        end
        
        opt showTrail = true
            Training -> Drawing : drawTrail(trailHistory)
            note right: รอยเส้นตามมือ
        end
    end
    
    alt มี feedback ใหม่
        Training -> UI : updateFeedbackOverlay()
        note right: แสดงข้อความ (HTML)
        Training -> UI : audioManager.speakFeedback()
        note right: พูดเสียง (TTS)
    end
    
    deactivate Training
end

@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>