<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1078px" preserveAspectRatio="none" style="width:905px;height:1078px;background:#00000000;" version="1.1" viewBox="0 0 905 1078" width="905px" zoomAndPan="magnify"><defs><filter height="300%" id="fy4jhsqqa72o1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="878.7" style="stroke:#A80036;stroke-width:1.0;" width="10" x="195" y="119.2"/><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="382.1" style="stroke:#A80036;stroke-width:1.0;" width="10" x="375" y="307.6"/><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="920.5" style="stroke:#000000;stroke-width:2.0;" width="881" x="10" y="77.4"/><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="739" style="stroke:#000000;stroke-width:2.0;" width="861" x="20" y="178.1"/><rect fill="#FFF3E0" filter="url(#fy4jhsqqa72o1)" height="431.9" style="stroke:#000000;stroke-width:2.0;" width="539" x="153" y="265.8"/><rect fill="#FFF3E0" filter="url(#fy4jhsqqa72o1)" height="93.7" style="stroke:#000000;stroke-width:2.0;" width="440.5" x="153" y="711.7"/><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="90.7" style="stroke:#000000;stroke-width:2.0;" width="718" x="153" y="819.4"/><rect fill="#E0F7FA" filter="url(#fy4jhsqqa72o1)" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="612.5" x="153" y="931.1"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="70" x2="70" y1="60.4" y2="1014.9"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="200" x2="200" y1="60.4" y2="1014.9"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="379.5" x2="379.5" y1="60.4" y2="1014.9"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="548.5" x2="548.5" y1="60.4" y2="1014.9"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="631.5" x2="631.5" y1="60.4" y2="1014.9"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="706.5" x2="706.5" y1="60.4" y2="1014.9"/><rect fill="#E8F5E9" filter="url(#fy4jhsqqa72o1)" height="50.4" style="stroke:#A80036;stroke-width:1.5;" width="76" x="30" y="5"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="62" x="37" y="26.952">MediaPipe</text><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="29" x="53.5" y="45.152">Pose</text><rect fill="#E8F5E9" filter="url(#fy4jhsqqa72o1)" height="50.4" style="stroke:#A80036;stroke-width:1.5;" width="76" x="30" y="1013.9"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="62" x="37" y="1035.852">MediaPipe</text><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="29" x="53.5" y="1054.052">Pose</text><rect fill="#E3F2FD" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="70" x="163" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="50" x="173" y="45.152">Training</text><rect fill="#E3F2FD" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="70" x="163" y="1013.9"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="50" x="173" y="1035.852">Training</text><rect fill="#FFF3E0" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="73" x="341.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="59" x="348.5" y="45.152">Heuristics</text><rect fill="#FFF3E0" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="73" x="341.5" y="1013.9"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="59" x="348.5" y="1035.852">Heuristics</text><rect fill="#FFF3E0" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="65" x="514.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="39" x="527.5" y="45.152">Scorer</text><rect fill="#FFF3E0" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="65" x="514.5" y="1013.9"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="39" x="527.5" y="1035.852">Scorer</text><rect fill="#E0F7FA" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="72" x="593.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="49" x="606.5" y="45.152">Drawing</text><rect fill="#E0F7FA" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="72" x="593.5" y="1013.9"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="49" x="606.5" y="1035.852">Drawing</text><rect fill="#E8F5E9" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="51" x="679.5" y="23.2"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="13" x="698.5" y="45.152">UI</text><rect fill="#E8F5E9" filter="url(#fy4jhsqqa72o1)" height="32.2" style="stroke:#A80036;stroke-width:1.5;" width="51" x="679.5" y="1013.9"/><text fill="#000000" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="13" x="698.5" y="1035.852">UI</text><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="878.7" style="stroke:#A80036;stroke-width:1.0;" width="10" x="195" y="119.2"/><rect fill="#FFFFFF" filter="url(#fy4jhsqqa72o1)" height="382.1" style="stroke:#A80036;stroke-width:1.0;" width="10" x="375" y="307.6"/><path d="M10,77.4 L82,77.4 L82,85.4 L72,95.4 L10,95.4 L10,77.4 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="920.5" style="stroke:#000000;stroke-width:2.0;" width="881" x="10" y="77.4"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="27" x="25" y="92.284">loop</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="175" x="97" y="91.148">[Camera Loop: ทุก Frame (~30 fps)]</text><polygon fill="#A80036" points="183,115.2,193,119.2,183,123.2,187,119.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="189" y1="119.2" y2="119.2"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="89" x="88" y="114.184">onFrame(video)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="247" y1="150.1" y2="150.1"/><line style="stroke:#A80036;stroke-width:1.0;" x1="247" x2="247" y1="150.1" y2="163.1"/><line style="stroke:#A80036;stroke-width:1.0;" x1="206" x2="247" y1="163.1" y2="163.1"/><polygon fill="#A80036" points="216,159.1,206,163.1,216,167.1,212,163.1" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="144" x="212" y="145.084">throttleFrameCounter++</text><path d="M20,178.1 L85,178.1 L85,186.1 L75,196.1 L20,196.1 L20,178.1 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="739" style="stroke:#000000;stroke-width:2.0;" width="861" x="20" y="178.1"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="35" y="192.984">opt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="215" x="100" y="191.848">[Process Frame (Every 4th Frame ~7.5 fps)]</text><polygon fill="#A80036" points="81,215.9,71,219.9,81,223.9,77,219.9" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="75" x2="194" y1="219.9" y2="219.9"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="86" y="214.884">pose.send(video)</text><polygon fill="#A80036" points="183,246.8,193,250.8,183,254.8,187,250.8" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="189" y1="250.8" y2="250.8"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="101" x="82" y="245.784">onResults(results)</text><path d="M153,265.8 L300,265.8 L300,273.8 L290,283.8 L153,283.8 L153,265.8 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="431.9" style="stroke:#000000;stroke-width:2.0;" width="539" x="153" y="265.8"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="102" x="168" y="280.684">วิเคราะห์ท่า (8 กฎ)</text><polygon fill="#A80036" points="363,303.6,373,307.6,363,311.6,367,307.6" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="369" y1="307.6" y2="307.6"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="111" x="234.5" y="302.584">analyze(landmarks)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="338.5" y2="338.5"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="338.5" y2="351.5"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="351.5" y2="351.5"/><polygon fill="#A80036" points="396,347.5,386,351.5,396,355.5,392,351.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="114" x="392" y="333.484">1. checkPathShape()</text><path d="M518,322.1 L518,348.1 L633,348.1 L633,332.1 L623,322.1 L518,322.1 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M623,322.1 L623,332.1 L633,332.1 L623,322.1 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="94" x="524" y="340.984">เส้นทางเป็นวงโค้ง</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="382.4" y2="382.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="382.4" y2="395.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="395.4" y2="395.4"/><polygon fill="#A80036" points="396,391.4,386,395.4,396,399.4,392,395.4" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="135" x="392" y="377.384">2. checkWaistInitiation()</text><path d="M539,366 L539,392 L668,392 L668,376 L658,366 L539,366 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M658,366 L658,376 L668,376 L658,366 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="108" x="545" y="384.884">เอวนำการเคลื่อนไหว</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="426.3" y2="426.3"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="426.3" y2="439.3"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="439.3" y2="439.3"/><polygon fill="#A80036" points="396,435.3,386,439.3,396,443.3,392,439.3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="119" x="392" y="421.284">3. checkWeightShift()</text><path d="M523,409.9 L523,435.9 L634,435.9 L634,419.9 L624,409.9 L523,409.9 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M624,409.9 L624,419.9 L634,419.9 L624,409.9 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="90" x="529" y="428.784">ถ่ายน้ำหนักสมดุล</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="470.2" y2="470.2"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="470.2" y2="483.2"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="483.2" y2="483.2"/><polygon fill="#A80036" points="396,479.2,386,483.2,396,487.2,392,483.2" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="145" x="392" y="465.184">4. checkVerticalStability()</text><path d="M549,453.8 L549,479.8 L649,479.8 L649,463.8 L639,453.8 L549,453.8 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M639,453.8 L639,463.8 L649,463.8 L639,453.8 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="79" x="555" y="472.684">ศีรษะนิ่ง ไม่โยก</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="514.1" y2="514.1"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="514.1" y2="527.1"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="527.1" y2="527.1"/><polygon fill="#A80036" points="396,523.1,386,527.1,396,531.1,392,527.1" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="126" x="392" y="509.084">5. checkArmRotation()</text><path d="M530,497.7 L530,523.7 L637,523.7 L637,507.7 L627,497.7 L530,497.7 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M627,497.7 L627,507.7 L637,507.7 L627,497.7 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="86" x="536" y="516.584">หมุนฝ่ามือถูกทิศ</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="558" y2="558"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="558" y2="571"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="571" y2="571"/><polygon fill="#A80036" points="396,567,386,571,396,575,392,571" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="127" x="392" y="552.984">6. checkElbowSinking()</text><path d="M531,541.6 L531,567.6 L629,567.6 L629,551.6 L619,541.6 L531,541.6 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M619,541.6 L619,551.6 L629,551.6 L619,541.6 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="77" x="537" y="560.484">ศอกจม ไม่ลอย</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="601.9" y2="601.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="601.9" y2="614.9"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="614.9" y2="614.9"/><polygon fill="#A80036" points="396,610.9,386,614.9,396,618.9,392,614.9" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="121" x="392" y="596.884">7. checkSmoothness()</text><path d="M525,585.5 L525,611.5 L639,611.5 L639,595.5 L629,585.5 L525,585.5 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M629,585.5 L629,595.5 L639,595.5 L629,585.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="531" y="604.384">เคลื่อนไหวลื่นไหล</text><line style="stroke:#A80036;stroke-width:1.0;" x1="385" x2="427" y1="645.8" y2="645.8"/><line style="stroke:#A80036;stroke-width:1.0;" x1="427" x2="427" y1="645.8" y2="658.8"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386" x2="427" y1="658.8" y2="658.8"/><polygon fill="#A80036" points="396,654.8,386,658.8,396,662.8,392,658.8" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="111" x="392" y="640.784">8. checkContinuity()</text><path d="M515,629.4 L515,655.4 L631,655.4 L631,639.4 L621,629.4 L515,629.4 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M621,629.4 L621,639.4 L631,639.4 L621,629.4 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="95" x="521" y="648.284">ต่อเนื่อง ไม่หยุดนิ่ง</text><polygon fill="#A80036" points="216,685.7,206,689.7,216,693.7,212,689.7" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="210" x2="379" y1="689.7" y2="689.7"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="64" x="260.5" y="684.684">feedbacks[]</text><path d="M153,711.7 L335,711.7 L335,719.7 L325,729.7 L153,729.7 L153,711.7 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="93.7" style="stroke:#000000;stroke-width:2.0;" width="440.5" x="153" y="711.7"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="137" x="168" y="726.584">บันทึกข้อมูล (Recording)</text><polygon fill="#A80036" points="537,749.5,547,753.5,537,757.5,541,753.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="543" y1="753.5" y2="753.5"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="138" x="308" y="748.484">recordFrame(feedbacks)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="247" y1="784.4" y2="784.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="247" x2="247" y1="784.4" y2="797.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="206" x2="247" y1="797.4" y2="797.4"/><polygon fill="#A80036" points="216,793.4,206,797.4,216,801.4,212,797.4" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="156" x="212" y="779.384">recordedSessionData.push()</text><path d="M153,819.4 L214,819.4 L214,827.4 L204,837.4 L153,837.4 L153,819.4 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="90.7" style="stroke:#000000;stroke-width:2.0;" width="718" x="153" y="819.4"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="168" y="834.284">alt</text><text fill="#000000" font-family="Sarabun" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85" x="229" y="833.148">[มี feedback ใหม่]</text><polygon fill="#A80036" points="695,862.2,705,866.2,695,870.2,699,866.2" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="701" y1="866.2" y2="866.2"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="146" x="383" y="861.184">updateFeedbackOverlay()</text><path d="M712,843.3 L712,869.3 L852,869.3 L852,853.3 L842,843.3 L712,843.3 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M842,843.3 L842,853.3 L852,853.3 L842,843.3 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="119" x="718" y="862.184">แสดงข้อความ (HTML)</text><polygon fill="#A80036" points="695,898.1,705,902.1,695,906.1,699,902.1" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="701" y1="902.1" y2="902.1"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="178" x="367" y="897.084">audioManager.speakFeedback()</text><path d="M153,931.1 L372,931.1 L372,939.1 L362,949.1 L153,949.1 L153,931.1 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.8" style="stroke:#000000;stroke-width:2.0;" width="612.5" x="153" y="931.1"/><text fill="#000000" font-family="Sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="174" x="168" y="945.984">วาดภาพ (Rendering @ 30 FPS)</text><polygon fill="#A80036" points="619.5,973.9,629.5,977.9,619.5,981.9,623.5,977.9" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="205" x2="625.5" y1="977.9" y2="977.9"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="208" x="314.25" y="972.884">drawSkeleton / drawPath / drawTrail</text><path d="M636,955 L636,981 L746,981 L746,965 L736,955 L636,955 " fill="#FBFB77" filter="url(#fy4jhsqqa72o1)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M736,955 L736,965 L746,965 L736,955 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="89" x="642" y="973.884">วาดทับบน Video</text><!--MD5=[083870732b5246579e8897fbb40fe890]
@startuml SequenceDiagram_RealtimeAnalysis
' ============================================================================
' TaijiFlow AI - Sequence Diagram: Real-time Pose Analysis
' ============================================================================
' แสดงการวิเคราะห์ท่าแบบ Real-time ในแต่ละ Frame
' อ้างอิง: onResults() callback ใน script.js (lines 1200-1470)
' ============================================================================

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent
skinparam sequenceMessageAlign center

' === Participants ===
participant "MediaPipe\nPose" as MediaPipe #E8F5E9
participant " Training " as Training #E3F2FD
participant "Heuristics" as Heuristics #FFF3E0
participant "  Scorer  " as Scorer #FFF3E0
participant "  Drawing " as Drawing #E0F7FA
participant "    UI    " as UI #E8F5E9

' ============================================================================
' MAIN LOOP: onResults Callback
' ============================================================================

loop Camera Loop: ทุก Frame (~30 fps)
    MediaPipe -> Training : onFrame(video)
    activate Training
    
    Training -> Training : throttleFrameCounter++
    
    ' === Throttling Check ===
    opt Process Frame (Every 4th Frame ~7.5 fps)
        Training -> MediaPipe : pose.send(video)
        MediaPipe -> Training : onResults(results)
        
        ' === Step 1: Analyze Pose (8 Rules) ===
        group #FFF3E0 วิเคราะห์ท่า (8 กฎ)
            Training -> Heuristics : analyze(landmarks)
            activate Heuristics
            
            Heuristics -> Heuristics : 1. checkPathShape()
            note right: เส้นทางเป็นวงโค้ง
            
            Heuristics -> Heuristics : 2. checkWaistInitiation()
            note right: เอวนำการเคลื่อนไหว
            
            Heuristics -> Heuristics : 3. checkWeightShift()
            note right: ถ่ายน้ำหนักสมดุล
            
            Heuristics -> Heuristics : 4. checkVerticalStability()
            note right: ศีรษะนิ่ง ไม่โยก
            
            Heuristics -> Heuristics : 5. checkArmRotation()
            note right: หมุนฝ่ามือถูกทิศ
            
            Heuristics -> Heuristics : 6. checkElbowSinking()
            note right: ศอกจม ไม่ลอย
            
            Heuristics -> Heuristics : 7. checkSmoothness()
            note right: เคลื่อนไหวลื่นไหล
            
            Heuristics -> Heuristics : 8. checkContinuity()
            note right: ต่อเนื่อง ไม่หยุดนิ่ง
            
            Heuristics - -> Training : feedbacks[]
            deactivate Heuristics
        end
        
        ' === Step 2: Record Data ===
        group #FFF3E0 บันทึกข้อมูล (Recording)
            Training -> Scorer : recordFrame(feedbacks)
            Training -> Training : recordedSessionData.push()
        end
        
        ' === Step 4: Show Feedback ===
        alt มี feedback ใหม่
            Training -> UI : updateFeedbackOverlay()
            note right: แสดงข้อความ (HTML)
            Training -> UI : audioManager.speakFeedback()
        end
    end
    
    ' === Step 3: Draw Visuals (Every Frame 30 FPS) ===
    group #E0F7FA วาดภาพ (Rendering @ 30 FPS)
        Training -> Drawing : drawSkeleton / drawPath / drawTrail
        note right: วาดทับบน Video
    end
    
    deactivate Training
end

@enduml

@startuml SequenceDiagram_RealtimeAnalysis

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent
skinparam sequenceMessageAlign center

participant "MediaPipe\nPose" as MediaPipe #E8F5E9
participant " Training " as Training #E3F2FD
participant "Heuristics" as Heuristics #FFF3E0
participant "  Scorer  " as Scorer #FFF3E0
participant "  Drawing " as Drawing #E0F7FA
participant "    UI    " as UI #E8F5E9


loop Camera Loop: ทุก Frame (~30 fps)
    MediaPipe -> Training : onFrame(video)
    activate Training
    
    Training -> Training : throttleFrameCounter++
    
    opt Process Frame (Every 4th Frame ~7.5 fps)
        Training -> MediaPipe : pose.send(video)
        MediaPipe -> Training : onResults(results)
        
        group #FFF3E0 วิเคราะห์ท่า (8 กฎ)
            Training -> Heuristics : analyze(landmarks)
            activate Heuristics
            
            Heuristics -> Heuristics : 1. checkPathShape()
            note right: เส้นทางเป็นวงโค้ง
            
            Heuristics -> Heuristics : 2. checkWaistInitiation()
            note right: เอวนำการเคลื่อนไหว
            
            Heuristics -> Heuristics : 3. checkWeightShift()
            note right: ถ่ายน้ำหนักสมดุล
            
            Heuristics -> Heuristics : 4. checkVerticalStability()
            note right: ศีรษะนิ่ง ไม่โยก
            
            Heuristics -> Heuristics : 5. checkArmRotation()
            note right: หมุนฝ่ามือถูกทิศ
            
            Heuristics -> Heuristics : 6. checkElbowSinking()
            note right: ศอกจม ไม่ลอย
            
            Heuristics -> Heuristics : 7. checkSmoothness()
            note right: เคลื่อนไหวลื่นไหล
            
            Heuristics -> Heuristics : 8. checkContinuity()
            note right: ต่อเนื่อง ไม่หยุดนิ่ง
            
            Heuristics - -> Training : feedbacks[]
            deactivate Heuristics
        end
        
        group #FFF3E0 บันทึกข้อมูล (Recording)
            Training -> Scorer : recordFrame(feedbacks)
            Training -> Training : recordedSessionData.push()
        end
        
        alt มี feedback ใหม่
            Training -> UI : updateFeedbackOverlay()
            note right: แสดงข้อความ (HTML)
            Training -> UI : audioManager.speakFeedback()
        end
    end
    
    group #E0F7FA วาดภาพ (Rendering @ 30 FPS)
        Training -> Drawing : drawSkeleton / drawPath / drawTrail
        note right: วาดทับบน Video
    end
    
    deactivate Training
end

@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>