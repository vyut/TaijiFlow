<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1339px" preserveAspectRatio="none" style="width:536px;height:1339px;background:#00000000;" version="1.1" viewBox="0 0 536 1339" width="536px" zoomAndPan="magnify"><defs><filter height="300%" id="fzqznsirituf5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="215.49" cy="16" fill="#000000" filter="url(#fzqznsirituf5)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><g id="Idle"><rect fill="#E3F2FD" filter="url(#fzqznsirituf5)" height="103.2" rx="12.5" ry="12.5" style="stroke:#424242;stroke-width:1.5;" width="152" x="139.49" y="87"/><line style="stroke:#424242;stroke-width:1.5;" x1="139.49" x2="291.49" y1="133.4" y2="133.4"/><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="23" x="203.99" y="106.952">Idle</text><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="74" x="178.49" y="125.152">(‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å)</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="118" x="144.49" y="151.216">isTrainingMode = false</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="98" x="144.49" y="166.816">isRecording = false</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="132" x="144.49" y="182.416">calibrator.isActive = false</text></g><g id="Calibrating"><rect fill="#FFF3E0" filter="url(#fzqznsirituf5)" height="150" rx="12.5" ry="12.5" style="stroke:#424242;stroke-width:1.5;" width="150" x="30.49" y="343.2"/><line style="stroke:#424242;stroke-width:1.5;" x1="30.49" x2="180.49" y1="389.6" y2="389.6"/><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="66" x="72.49" y="363.152">Calibrating</text><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="108" x="51.49" y="381.352">(‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö T-Pose)</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="118" x="35.49" y="407.416">isTrainingMode = false</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="130" x="35.49" y="423.016">calibrator.isActive = true</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="12" x="35.49" y="438.616">---</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="73" x="35.49" y="454.216">‡∏ï‡∏£‡∏ß‡∏à visibility</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="79" x="35.49" y="469.816">‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡πà‡∏≤ T-Pose</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="98" x="35.49" y="485.416">‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</text></g><g id="Countdown"><rect fill="#E8F5E9" filter="url(#fzqznsirituf5)" height="87.6" rx="12.5" ry="12.5" style="stroke:#424242;stroke-width:1.5;" width="130" x="40.49" y="646.2"/><line style="stroke:#424242;stroke-width:1.5;" x1="40.49" x2="170.49" y1="692.6" y2="692.6"/><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="70" x="70.49" y="666.152">Countdown</text><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="110" x="50.49" y="684.352">(‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3-2-1)</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="97" x="45.49" y="710.416">showCountdown()</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="107" x="45.49" y="726.016">‡πÅ‡∏™‡∏î‡∏á overlay "3-2-1"</text></g><g id="Training"><rect fill="#E8F5E9" filter="url(#fzqznsirituf5)" height="165.6" rx="12.5" ry="12.5" style="stroke:#424242;stroke-width:1.5;" width="136" x="37.49" y="886.8"/><line style="stroke:#424242;stroke-width:1.5;" x1="37.49" x2="173.49" y1="933.2" y2="933.2"/><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="50" x="80.49" y="906.752">Training</text><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="89" x="60.99" y="924.952">(‡∏ù‡∏∂‡∏Å‡∏ó‡πà‡∏≤‡∏°‡πâ‡∏ß‡∏ô‡πÑ‡∏´‡∏°)</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="116" x="42.49" y="951.016">isTrainingMode = true</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="96" x="42.49" y="966.616">isRecording = true</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="12" x="42.49" y="982.216">---</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="92" x="42.49" y="997.816">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡πà‡∏≤ (8 ‡∏Å‡∏é)</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="88" x="42.49" y="1013.416">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å landmarks</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="73" x="42.49" y="1029.016">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="72" x="42.49" y="1044.616">Timer ‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤</text></g><g id="Ended"><rect fill="#F3E5F5" filter="url(#fzqznsirituf5)" height="103.2" rx="12.5" ry="12.5" style="stroke:#424242;stroke-width:1.5;" width="138" x="172.49" y="1222.4"/><line style="stroke:#424242;stroke-width:1.5;" x1="172.49" x2="310.49" y1="1268.8" y2="1268.8"/><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="39" x="221.99" y="1242.352">Ended</text><text fill="#212121" font-family="Sarabun" font-size="14" lengthAdjust="spacing" textLength="96" x="193.49" y="1260.552">(‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="118" x="177.49" y="1286.616">isTrainingMode = false</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="96" x="177.49" y="1302.216">‡πÅ‡∏™‡∏î‡∏á Score Popup</text><text fill="#000000" font-family="Sarabun" font-size="12" lengthAdjust="spacing" textLength="105" x="177.49" y="1317.816">Export Session Data</text></g><!--MD5=[38f1f8b7f214ff6bc6d4b705f682283d]
link *start to Idle--><path d="M215.49,26.46 C215.49,38.29 215.49,59.51 215.49,80.25 " fill="none" id="*start-to-Idle" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="215.49,85.15,219.49,76.15,215.49,80.15,211.49,76.15,215.49,85.15" style="stroke:#424242;stroke-width:1.0;"/><!--MD5=[613bcc83712b49aab47de170ad2aa798]
link Idle to Calibrating--><path d="M139.14,152.17 C99.27,163.03 53.83,183.13 29.49,220.2 C6,255.98 19.75,300.1 41.65,337.51 " fill="none" id="Idle-to-Calibrating" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="44.16,341.68,42.9595,331.9046,41.5875,337.3925,36.0996,336.0205,44.16,341.68" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="55" x="73.49" y="235.084">‡∏Å‡∏î Start /</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="69" x="66.49" y="251.984">‡∏¢‡∏Å‡∏ô‡∏¥‡πâ‡∏ß‡πÇ‡∏õ‡πâ‡∏á &#128077;</text><path d="M34.49,261 L34.49,304 L163.49,304 L163.49,271 L153.49,261 L34.49,261 " fill="#FBFB77" filter="url(#fzqznsirituf5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M153.49,261 L153.49,271 L163.49,271 L153.49,261 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="108" x="40.49" y="279.884">startTrainingFlow()</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="94" x="40.49" y="296.784">calibrator.start()</text><!--MD5=[bd35698d9154a034df3061f70b16595b]
link Calibrating to Idle--><path d="M161.14,342.73 C166.88,333.1 172.18,323.12 176.49,313.2 C192.6,276.13 202.44,231.6 208.2,196.92 " fill="none" id="Calibrating-to-Idle" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="208.98,192.06,203.5897,200.3028,208.1789,196.9954,211.4863,201.5846,208.98,192.06" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="65" x="240.84" y="243.584">‡∏Å‡∏î Cancel /</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="49" x="248.84" y="260.484">‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤</text><path d="M208.84,269.5 L208.84,295.5 L333.84,295.5 L333.84,279.5 L323.84,269.5 L208.84,269.5 " fill="#FBFB77" filter="url(#fzqznsirituf5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M323.84,269.5 L323.84,279.5 L333.84,279.5 L323.84,269.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="104" x="214.84" y="288.384">calibrator.cancel()</text><!--MD5=[14ad3a2123e1bd1bf56c59c7223bba9e]
link Calibrating to Countdown--><path d="M105.49,493.64 C105.49,540.13 105.49,598.7 105.49,639.52 " fill="none" id="Calibrating-to-Countdown" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="105.49,644.41,109.49,635.41,105.49,639.41,101.49,635.41,105.49,644.41" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="122" x="139.99" y="538.084">Calibration Complete</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="102" x="149.99" y="554.984">(Time &gt;= 3000ms)</text><path d="M110.49,564 L110.49,607 L287.49,607 L287.49,574 L277.49,564 L110.49,564 " fill="#FBFB77" filter="url(#fzqznsirituf5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M277.49,564 L277.49,574 L287.49,574 L277.49,564 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="109" x="116.49" y="582.884">calibrator.process()</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="156" x="116.49" y="599.784">returns {status: "complete"}</text><!--MD5=[c971b3b2b28ec0c5702fea5e80fc6faf]
link Countdown to Training--><path d="M105.49,734.07 C105.49,772.91 105.49,831.25 105.49,880.03 " fill="none" id="Countdown-to-Training" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="105.49,885.03,109.49,876.03,105.49,880.03,101.49,876.03,105.49,885.03" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="92" x="163.49" y="778.684">Countdown ‡πÄ‡∏™‡∏£‡πá‡∏à</text><path d="M110.49,787.7 L110.49,847.7 L304.49,847.7 L304.49,797.7 L294.49,787.7 L110.49,787.7 " fill="#FBFB77" filter="url(#fzqznsirituf5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M294.49,787.7 L294.49,797.7 L304.49,797.7 L294.49,787.7 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="173" x="116.49" y="806.584">startTrainingAfterCalibration()</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="123" x="116.49" y="823.484">isTrainingMode = true</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="103" x="116.49" y="840.384">isRecording = true</text><!--MD5=[01d744849c1cec173d51d87f67697966]
link Training to Ended--><path d="M137.2,1052.89 C154.06,1095.08 175.76,1147 197.49,1192.4 C201.3,1200.34 205.51,1208.61 209.77,1216.7 " fill="none" id="Training-to-Ended" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="212.02,1220.92,211.3339,1211.0951,209.676,1216.5035,204.2675,1214.8455,212.02,1220.92" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="52" x="248.49" y="1097.284">‡∏Å‡∏î Stop /</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="57" x="245.99" y="1114.184">‡∏Å‡∏≥‡∏°‡∏∑‡∏≠ ‚úä /</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="85" x="231.99" y="1131.084">‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ</text><path d="M202.49,1140.1 L202.49,1183.1 L342.49,1183.1 L342.49,1150.1 L332.49,1140.1 L202.49,1140.1 " fill="#FBFB77" filter="url(#fzqznsirituf5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M332.49,1140.1 L332.49,1150.1 L342.49,1150.1 L332.49,1140.1 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="116" x="208.49" y="1158.984">endTrainingSession()</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="119" x="208.49" y="1175.884">scorer.getSummary()</text><!--MD5=[469c24cb0eb4947fe02ac74cb8eb1cb7]
link Ended to Idle--><path d="M310.78,1238.03 C328.13,1225.95 344.82,1210.73 355.49,1192.4 C405.33,1106.79 377.49,1069.66 377.49,970.6 C377.49,417.2 377.49,417.2 377.49,417.2 C377.49,328.83 399.25,293.91 350.49,220.2 C337.43,200.45 317.72,184.83 297.36,172.81 " fill="none" id="Ended-to-Idle" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="293.21,170.43,299.003,178.395,297.5397,172.9307,303.0041,171.4674,293.21,170.43" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="90" x="411.99" y="666.884">‡∏õ‡∏¥‡∏î Score Popup</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="48" x="432.99" y="683.784">(3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</text><path d="M382.49,692.8 L382.49,718.8 L527.49,718.8 L527.49,702.8 L517.49,692.8 L382.49,692.8 " fill="#FBFB77" filter="url(#fzqznsirituf5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M517.49,692.8 L517.49,702.8 L527.49,702.8 L517.49,692.8 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="124" x="388.49" y="711.684">resetToHomeScreen()</text><!--MD5=[4f7116d012c72546cb0d8b5f1cb34cc3]
link Idle to Idle--><path d="M291.76,123.37 C311.56,124.3 326.49,129.38 326.49,138.6 C326.49,146.81 314.65,151.74 298.07,153.38 " fill="none" id="Idle-to-Idle" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="293.27,153.73,302.5328,157.0767,298.2572,153.3727,301.9612,149.0972,293.27,153.73" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="93" x="332.49" y="144.484">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡πà‡∏≤ / Level</text><!--MD5=[a914570dbb4feabb53db254e23ed840a]
link Training to Training--><path d="M173.84,939.85 C193.4,941.01 208.49,950.93 208.49,969.6 C208.49,986.23 196.52,995.91 180.08,998.66 " fill="none" id="Training-to-Training" style="stroke:#424242;stroke-width:1.0;"/><polygon fill="#424242" points="175.34,999.18,184.721,1002.1794,180.3105,998.6372,183.8526,994.2267,175.34,999.18" style="stroke:#424242;stroke-width:1.0;"/><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="86" x="231.99" y="966.984">Camera 30 FPS</text><text fill="#000000" font-family="Sarabun" font-size="13" lengthAdjust="spacing" textLength="121" x="214.49" y="983.884">AI 7.5 FPS (Throttled)</text><!--MD5=[5c84936ad58c8dbe18588f98eeb390ce]
@startuml StateDiagram_TrainingSession
' ============================================================================
' TaijiFlow AI - State Diagram: Training Session
' ============================================================================
' ‡πÅ‡∏™‡∏î‡∏á States ‡πÅ‡∏•‡∏∞ Transitions ‡∏Ç‡∏≠‡∏á Training Session
' ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á: script.js (isTrainingMode, isRecording, calibrator.isActive)
' ============================================================================

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent
skinparam state {
    BackgroundColor #FAFAFA
    BorderColor #424242
    FontColor #212121
    ArrowColor #424242
}

' === State Colors ===
skinparam state {
    BackgroundColor<<idle>> #E3F2FD
    BackgroundColor<<calibrating>> #FFF3E0
    BackgroundColor<<countdown>> #E8F5E9
    BackgroundColor<<training>> #E8F5E9
    BackgroundColor<<ended>> #F3E5F5
}

' ============================================================================
' STATES
' ============================================================================

[*] - -> Idle

state "Idle\n(‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å)" as Idle <<idle>> {
    Idle : isTrainingMode = false
    Idle : isRecording = false
    Idle : calibrator.isActive = false
}

state "Calibrating\n(‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö T-Pose)" as Calibrating <<calibrating>> {
    Calibrating : isTrainingMode = false
    Calibrating : calibrator.isActive = true
    Calibrating : - - -
    Calibrating : ‡∏ï‡∏£‡∏ß‡∏à visibility
    Calibrating : ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡πà‡∏≤ T-Pose
    Calibrating : ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}

state "Countdown\n(‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3-2-1)" as Countdown <<countdown>> {
    Countdown : showCountdown()
    Countdown : ‡πÅ‡∏™‡∏î‡∏á overlay "3-2-1"
}

state "Training\n(‡∏ù‡∏∂‡∏Å‡∏ó‡πà‡∏≤‡∏°‡πâ‡∏ß‡∏ô‡πÑ‡∏´‡∏°)" as Training <<training>> {
    Training : isTrainingMode = true
    Training : isRecording = true
    Training : - - -
    Training : ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡πà‡∏≤ (8 ‡∏Å‡∏é)
    Training : ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å landmarks
    Training : ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
    Training : Timer ‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
}

state "Ended\n(‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)" as Ended <<ended>> {
    Ended : isTrainingMode = false
    Ended : ‡πÅ‡∏™‡∏î‡∏á Score Popup
    Ended : Export Session Data
}

' ============================================================================
' TRANSITIONS
' ============================================================================

Idle - -> Calibrating : ‡∏Å‡∏î Start /\n‡∏¢‡∏Å‡∏ô‡∏¥‡πâ‡∏ß‡πÇ‡∏õ‡πâ‡∏á üëç
note on link
    startTrainingFlow()
    calibrator.start()
end note

Calibrating - -> Countdown : Calibration Complete\n(Time >= 3000ms)
note on link
    calibrator.process()
    returns {status: "complete"}
end note

Calibrating - -> Idle : ‡∏Å‡∏î Cancel /\n‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
note on link
    calibrator.cancel()
end note

Countdown - -> Training : Countdown ‡πÄ‡∏™‡∏£‡πá‡∏à
note on link
    startTrainingAfterCalibration()
    isTrainingMode = true
    isRecording = true
end note

Training - -> Ended : ‡∏Å‡∏î Stop /\n‡∏Å‡∏≥‡∏°‡∏∑‡∏≠ ‚úä /\n‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ
note on link
    endTrainingSession()
    scorer.getSummary()
end note

Ended - -> Idle : ‡∏õ‡∏¥‡∏î Score Popup\n(3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
note on link
    resetToHomeScreen()
end note

Idle - -> Idle : ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡πà‡∏≤ / Level
Training - -> Training : Camera 30 FPS\nAI 7.5 FPS (Throttled)

@enduml

@startuml StateDiagram_TrainingSession

skinparam defaultFontName "Sarabun"
skinparam backgroundColor transparent
skinparam state {
    BackgroundColor #FAFAFA
    BorderColor #424242
    FontColor #212121
    ArrowColor #424242
}

skinparam state {
    BackgroundColor<<idle>> #E3F2FD
    BackgroundColor<<calibrating>> #FFF3E0
    BackgroundColor<<countdown>> #E8F5E9
    BackgroundColor<<training>> #E8F5E9
    BackgroundColor<<ended>> #F3E5F5
}


[*] - -> Idle

state "Idle\n(‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å)" as Idle <<idle>> {
    Idle : isTrainingMode = false
    Idle : isRecording = false
    Idle : calibrator.isActive = false
}

state "Calibrating\n(‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö T-Pose)" as Calibrating <<calibrating>> {
    Calibrating : isTrainingMode = false
    Calibrating : calibrator.isActive = true
    Calibrating : - - -
    Calibrating : ‡∏ï‡∏£‡∏ß‡∏à visibility
    Calibrating : ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡πà‡∏≤ T-Pose
    Calibrating : ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
}

state "Countdown\n(‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3-2-1)" as Countdown <<countdown>> {
    Countdown : showCountdown()
    Countdown : ‡πÅ‡∏™‡∏î‡∏á overlay "3-2-1"
}

state "Training\n(‡∏ù‡∏∂‡∏Å‡∏ó‡πà‡∏≤‡∏°‡πâ‡∏ß‡∏ô‡πÑ‡∏´‡∏°)" as Training <<training>> {
    Training : isTrainingMode = true
    Training : isRecording = true
    Training : - - -
    Training : ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡πà‡∏≤ (8 ‡∏Å‡∏é)
    Training : ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å landmarks
    Training : ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
    Training : Timer ‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
}

state "Ended\n(‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)" as Ended <<ended>> {
    Ended : isTrainingMode = false
    Ended : ‡πÅ‡∏™‡∏î‡∏á Score Popup
    Ended : Export Session Data
}


Idle - -> Calibrating : ‡∏Å‡∏î Start /\n‡∏¢‡∏Å‡∏ô‡∏¥‡πâ‡∏ß‡πÇ‡∏õ‡πâ‡∏á üëç
note on link
    startTrainingFlow()
    calibrator.start()
end note

Calibrating - -> Countdown : Calibration Complete\n(Time >= 3000ms)
note on link
    calibrator.process()
    returns {status: "complete"}
end note

Calibrating - -> Idle : ‡∏Å‡∏î Cancel /\n‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
note on link
    calibrator.cancel()
end note

Countdown - -> Training : Countdown ‡πÄ‡∏™‡∏£‡πá‡∏à
note on link
    startTrainingAfterCalibration()
    isTrainingMode = true
    isRecording = true
end note

Training - -> Ended : ‡∏Å‡∏î Stop /\n‡∏Å‡∏≥‡∏°‡∏∑‡∏≠ ‚úä /\n‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ
note on link
    endTrainingSession()
    scorer.getSummary()
end note

Ended - -> Idle : ‡∏õ‡∏¥‡∏î Score Popup\n(3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
note on link
    resetToHomeScreen()
end note

Idle - -> Idle : ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡πà‡∏≤ / Level
Training - -> Training : Camera 30 FPS\nAI 7.5 FPS (Throttled)

@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>