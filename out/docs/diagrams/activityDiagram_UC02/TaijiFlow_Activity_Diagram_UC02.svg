<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1791px" preserveAspectRatio="none" style="width:826px;height:1791px;" version="1.1" viewBox="0 0 826 1791" width="826px" zoomAndPan="magnify"><defs><filter height="300%" id="f3safrcbhhtzo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="265.25" cy="20" fill="#000000" filter="url(#f3safrcbhhtzo)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><path d="M390.25,40 L390.25,74.8 L370.25,78.8 L390.25,82.8 L390.25,117.6 A0,0 0 0 0 390.25,117.6 L522.25,117.6 A0,0 0 0 0 522.25,117.6 L522.25,50 L512.25,40 L390.25,40 A0,0 0 0 0 390.25,40 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M512.25,40 L512.25,50 L522.25,50 L512.25,40 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="61" x="396.25" y="58.884">Quickstart</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="71" x="396.25" y="75.784">มี default ให้:</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="111" x="396.25" y="92.684">- ท่า: มือขวา-ตามเข็ม</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="81" x="396.25" y="109.584">- ระดับ: L1 (นั่ง)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="210" x="160.25" y="61"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="190" x="170.25" y="83.816">ผู้ใช้เลือก "ท่าฝึก" และ "ระดับความยาก"</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="278.2" style="stroke:#000000;stroke-width:2.0;" width="798" x="11" y="127.6"/><path d="M141,127.6 L141,138.8 L131,148.8 L11,148.8 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="120" x="14" y="143.552">System Initialization</text><path d="M614,245.4 L614,323 L799,323 L799,255.4 L789,245.4 L614,245.4 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M789,245.4 L789,255.4 L799,255.4 L789,245.4 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="116" x="620" y="264.284">Camera Error Types</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="135" x="620" y="281.184">- not_allowed: ไม่อนุญาต</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="127" x="620" y="298.084">- not_found: ไม่พบกล้อง</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="164" x="620" y="314.984">- not_readable: กล้องใช้งานอยู่</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="232.75,165.8,297.75,165.8,309.75,177.8,297.75,189.8,232.75,189.8,220.75,177.8,232.75,165.8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="65" x="232.75" y="182.398">เข้าถึงกล้องได้?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="43" x="177.75" y="175.248">ไม่ได้ (E1)</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="309.75" y="175.248">ได้</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="187" x="23" y="199.8"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="167" x="33" y="222.616">แจ้งเตือน Error (Toast + Overlay)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="140" x="46.5" y="267.2"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="120" x="56.5" y="290.016">แสดงคำแนะนำแก้ปัญหา</text><ellipse cx="116.5" cy="348.8" fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="116.5" cy="348.8" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="165" x="331.5" y="199.8"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="145" x="341.5" y="222.616">โหลดข้อมูลท่าต้นแบบ (JSON)</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="395,267.2,433,267.2,445,279.2,433,291.2,395,291.2,383,279.2,395,267.2" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="38" x="395" y="283.798">พบไฟล์?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="47" x="336" y="276.648">ไม่พบ (E2)</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="15" x="445" y="276.648">พบ</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="171" x="240" y="301.2"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="151" x="250" y="324.016">แจ้งเตือน "ไม่พบข้อมูลต้นแบบ"</text><ellipse cx="325.5" cy="382.8" fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="325.5" cy="382.8" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="143" x="431" y="301.2"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="123" x="441" y="324.016">แสดงวิดีโอและเส้นนำทาง</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="143" x="193.75" y="425.8"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="123" x="203.75" y="448.616">ผู้ใช้กดปุ่ม Start Training</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="298.35" style="stroke:#000000;stroke-width:2.0;" width="421" x="139.75" y="471.4"/><path d="M344.75,471.4 L344.75,482.6 L334.75,492.6 L139.75,492.6 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="195" x="142.75" y="487.352">Calibration (&lt;&lt;include&gt;&gt; UC-01)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="98" x="216.25" y="509.6"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="78" x="226.25" y="532.416">เริ่ม Calibration</text><path d="M390.75,614.35 L390.75,632.25 L370.75,636.25 L390.75,640.25 L390.75,658.15 A0,0 0 0 0 390.75,658.15 L528.75,658.15 A0,0 0 0 0 528.75,658.15 L528.75,624.35 L518.75,614.35 L390.75,614.35 A0,0 0 0 0 390.75,614.35 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M518.75,614.35 L518.75,624.35 L528.75,624.35 L518.75,614.35 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="396.75" y="633.234">Low Light Detection</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="98" x="396.75" y="650.134">avgVisibility &lt; 0.5</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="211" x="159.75" y="618.45"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="191" x="169.75" y="641.266">แจ้งเตือนแสงไม่เพียงพอ (Toast + TTS)</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="236.25,565.2,294.25,565.2,306.25,577.2,294.25,589.2,236.25,589.2,224.25,577.2,236.25,565.2" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="46" x="269.25" y="600.948">ไม่พอ (E3)</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="58" x="236.25" y="581.798">แสงเพียงพอ?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="14" x="306.25" y="574.648">พอ</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="265.25,678.15,277.25,690.15,265.25,702.15,253.25,690.15,265.25,678.15" style="stroke:#A80036;stroke-width:1.5;"/><path d="M382.75,726.5 L382.75,735.95 L362.75,739.95 L382.75,743.95 L382.75,753.4 A0,0 0 0 0 382.75,753.4 L523.75,753.4 A0,0 0 0 0 523.75,753.4 L523.75,736.5 L513.75,726.5 L382.75,726.5 A0,0 0 0 0 382.75,726.5 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M513.75,726.5 L513.75,736.5 L523.75,736.5 L513.75,726.5 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="120" x="388.75" y="745.384">ดูรายละเอียดใน UC-01</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="195" x="167.75" y="722.15"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="175" x="177.75" y="744.966">รอผู้ใช้ยืน T-Pose และบันทึกสัดส่วน</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="156.5" style="stroke:#000000;stroke-width:2.0;" width="334" x="172.75" y="779.75"/><path d="M296.75,779.75 L296.75,790.95 L286.75,800.95 L172.75,800.95 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="114" x="175.75" y="795.702">Countdown &amp; Start</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="143" x="193.75" y="817.95"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="123" x="203.75" y="840.766">แสดง Countdown 3-2-1</text><path d="M367.75,863.55 L367.75,889.9 L347.75,893.9 L367.75,897.9 L367.75,924.25 A0,0 0 0 0 367.75,924.25 L496.75,924.25 A0,0 0 0 0 496.75,924.25 L496.75,873.55 L486.75,863.55 L367.75,863.55 A0,0 0 0 0 367.75,863.55 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M486.75,863.55 L486.75,873.55 L496.75,873.55 L486.75,863.55 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97" x="373.75" y="882.434">Optional Display</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="99" x="373.75" y="899.334">☐ Ghost Skeleton</text><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="108" x="373.75" y="916.234">☐ Silhouette Video</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="165" x="182.75" y="876.1"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="145" x="192.75" y="898.916">เริ่มฝึก (Timer + UI Controls)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="654.7" style="stroke:#000000;stroke-width:2.0;" width="565.25" x="77.5" y="946.25"/><path d="M273.5,946.25 L273.5,957.45 L263.5,967.45 L77.5,967.45 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="186" x="80.5" y="962.202">Main Training Loop (Real-time)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="150" x="190.25" y="1028.45"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="130" x="200.25" y="1051.266">รับภาพและตรวจจับท่าทาง</text><path d="M365.75,1137.55 L365.75,1147 L345.75,1151 L365.75,1155 L365.75,1164.45 A0,0 0 0 0 365.75,1164.45 L475.75,1164.45 A0,0 0 0 0 475.75,1164.45 L475.75,1147.55 L465.75,1137.55 L365.75,1137.55 A0,0 0 0 0 365.75,1137.55 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M465.75,1137.55 L465.75,1147.55 L475.75,1147.55 L465.75,1137.55 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="89" x="371.75" y="1156.434">Cooldown = 30s</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="161" x="184.75" y="1133.2"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="141" x="194.75" y="1156.016">เตือนแสงน้อย (Toast + TTS)</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="202.25,1084.05,328.25,1084.05,340.25,1096.05,328.25,1108.05,202.25,1108.05,190.25,1096.05,202.25,1084.05" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="269.25" y="1119.798">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="126" x="202.25" y="1100.648">แสงน้อย &amp;&amp; เกิน Cooldown?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="340.25" y="1093.498">ไม่</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="265.25,1188.8,277.25,1200.8,265.25,1212.8,253.25,1200.8,265.25,1188.8" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="177" x="176.75" y="1232.8"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="157" x="186.75" y="1255.616">วาด Ghost/Silhouette (ถ้าเปิด)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="85.8" style="stroke:#000000;stroke-width:2.0;" width="449" x="159.75" y="1283.95"/><path d="M279.75,1283.95 L279.75,1295.15 L269.75,1305.15 L159.75,1305.15 " fill="none" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sarabun" font-size="14" lengthAdjust="spacing" textLength="110" x="162.75" y="1299.902">Heuristics Analysis</text><path d="M380.75,1326.5 L380.75,1335.95 L360.75,1339.95 L380.75,1343.95 L380.75,1353.4 A0,0 0 0 0 380.75,1353.4 L598.75,1353.4 A0,0 0 0 0 598.75,1353.4 L598.75,1336.5 L588.75,1326.5 L380.75,1326.5 A0,0 0 0 0 380.75,1326.5 " fill="#FFFFE0" filter="url(#f3safrcbhhtzo)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M588.75,1326.5 L588.75,1336.5 L598.75,1336.5 L588.75,1326.5 " fill="#FFFFE0" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="13" lengthAdjust="spacing" textLength="197" x="386.75" y="1345.384">ดูใน ActivityDiagram_Heuristics.wsd</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="191" x="169.75" y="1322.15"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="171" x="179.75" y="1344.966">ตรวจสอบตามกฎ 8 ข้อ (ตาม Level)</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="228.75,1389.75,301.75,1389.75,313.75,1401.75,301.75,1413.75,228.75,1413.75,216.75,1401.75,228.75,1389.75" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="73" x="228.75" y="1406.348">พบข้อผิดพลาด?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="205.75" y="1399.198">ใช่</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="313.75" y="1399.198">ไม่</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="169" x="97.5" y="1423.75"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="149" x="107.5" y="1446.566">แสดง Feedback (ภาพ + เสียง)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="124" x="286.5" y="1423.75"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="104" x="296.5" y="1446.566">แสดงผลปกติ (สีเขียว)</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="265.25,1465.35,277.25,1477.35,265.25,1489.35,253.25,1477.35,265.25,1465.35" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="140" x="195.25" y="1509.35"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="120" x="205.25" y="1532.166">บันทึกคะแนน (Logging)</text><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="265.25,984.45,277.25,996.45,265.25,1008.45,253.25,996.45,265.25,984.45" style="stroke:#A80036;stroke-width:1.5;"/><polygon fill="#FEFECE" filter="url(#f3safrcbhhtzo)" points="220.25,1564.95,310.25,1564.95,322.25,1576.95,310.25,1588.95,220.25,1588.95,208.25,1576.95,220.25,1564.95" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="90" x="220.25" y="1581.548">หยุด หรือ หมดเวลา?</text><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="11" x="322.25" y="1574.398">ไม่</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="166" x="182.25" y="1641.698"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="146" x="192.25" y="1664.514">Cleanup (Ghost, Fullscreen)</text><rect fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" height="35.6" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="180" x="175.25" y="1697.298"/><text fill="#000000" font-family="sarabun" font-size="12" lengthAdjust="spacing" textLength="160" x="185.25" y="1720.114">ส่งข้อมูลไป UC-03 (View Result)</text><ellipse cx="265.25" cy="1763.898" fill="#FFFFFF" filter="url(#f3safrcbhhtzo)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="265.25" cy="1763.898" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="30" y2="61"/><polygon fill="#000000" points="261.25,51,265.25,61,269.25,51,265.25,55" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="116.5" x2="116.5" y1="235.4" y2="267.2"/><polygon fill="#000000" points="112.5,257.2,116.5,267.2,120.5,257.2,116.5,261.2" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="116.5" x2="116.5" y1="302.8" y2="337.8"/><polygon fill="#000000" points="112.5,327.8,116.5,337.8,120.5,327.8,116.5,331.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="325.5" x2="325.5" y1="336.8" y2="371.8"/><polygon fill="#000000" points="321.5,361.8,325.5,371.8,329.5,361.8,325.5,365.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="383" x2="325.5" y1="279.2" y2="279.2"/><line style="stroke:#000000;stroke-width:1.5;" x1="325.5" x2="325.5" y1="279.2" y2="301.2"/><polygon fill="#000000" points="321.5,291.2,325.5,301.2,329.5,291.2,325.5,295.2" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="445" x2="502.5" y1="279.2" y2="279.2"/><line style="stroke:#000000;stroke-width:1.5;" x1="502.5" x2="502.5" y1="279.2" y2="301.2"/><polygon fill="#000000" points="498.5,291.2,502.5,301.2,506.5,291.2,502.5,295.2" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="502.5" x2="502.5" y1="336.8" y2="398.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="502.5" x2="265.25" y1="398.8" y2="398.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="398.8" y2="425.8"/><polygon fill="#000000" points="261.25,415.8,265.25,425.8,269.25,415.8,265.25,419.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="414" x2="414" y1="235.4" y2="267.2"/><polygon fill="#000000" points="410,257.2,414,267.2,418,257.2,414,261.2" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="220.75" x2="116.5" y1="177.8" y2="177.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="116.5" x2="116.5" y1="177.8" y2="199.8"/><polygon fill="#000000" points="112.5,189.8,116.5,199.8,120.5,189.8,116.5,193.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="309.75" x2="414" y1="177.8" y2="177.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="414" x2="414" y1="177.8" y2="199.8"/><polygon fill="#000000" points="410,189.8,414,199.8,418,189.8,414,193.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="96.6" y2="165.8"/><polygon fill="#000000" points="261.25,155.8,265.25,165.8,269.25,155.8,265.25,159.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="589.2" y2="618.45"/><polygon fill="#000000" points="261.25,608.45,265.25,618.45,269.25,608.45,265.25,612.45" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="306.25" x2="538.75" y1="577.2" y2="577.2"/><polygon fill="#000000" points="534.75,626.25,538.75,636.25,542.75,626.25,538.75,630.25" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="538.75" x2="538.75" y1="577.2" y2="690.15"/><line style="stroke:#000000;stroke-width:1.5;" x1="538.75" x2="277.25" y1="690.15" y2="690.15"/><polygon fill="#000000" points="287.25,686.15,277.25,690.15,287.25,694.15,283.25,690.15" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="654.05" y2="678.15"/><polygon fill="#000000" points="261.25,668.15,265.25,678.15,269.25,668.15,265.25,672.15" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="545.2" y2="565.2"/><polygon fill="#000000" points="261.25,555.2,265.25,565.2,269.25,555.2,265.25,559.2" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="702.15" y2="722.15"/><polygon fill="#000000" points="261.25,712.15,265.25,722.15,269.25,712.15,265.25,716.15" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="461.4" y2="509.6"/><polygon fill="#000000" points="261.25,499.6,265.25,509.6,269.25,499.6,265.25,503.6" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="853.55" y2="876.1"/><polygon fill="#000000" points="261.25,866.1,265.25,876.1,269.25,866.1,265.25,870.1" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="757.75" y2="817.95"/><polygon fill="#000000" points="261.25,807.95,265.25,817.95,269.25,807.95,265.25,811.95" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1108.05" y2="1133.2"/><polygon fill="#000000" points="261.25,1123.2,265.25,1133.2,269.25,1123.2,265.25,1127.2" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="340.25" x2="485.75" y1="1096.05" y2="1096.05"/><polygon fill="#000000" points="481.75,1141,485.75,1151,489.75,1141,485.75,1145" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="485.75" x2="485.75" y1="1096.05" y2="1200.8"/><line style="stroke:#000000;stroke-width:1.5;" x1="485.75" x2="277.25" y1="1200.8" y2="1200.8"/><polygon fill="#000000" points="287.25,1196.8,277.25,1200.8,287.25,1204.8,283.25,1200.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1168.8" y2="1188.8"/><polygon fill="#000000" points="261.25,1178.8,265.25,1188.8,269.25,1178.8,265.25,1182.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1064.05" y2="1084.05"/><polygon fill="#000000" points="261.25,1074.05,265.25,1084.05,269.25,1074.05,265.25,1078.05" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1212.8" y2="1232.8"/><polygon fill="#000000" points="261.25,1222.8,265.25,1232.8,269.25,1222.8,265.25,1226.8" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1268.4" y2="1322.15"/><polygon fill="#000000" points="261.25,1312.15,265.25,1322.15,269.25,1312.15,265.25,1316.15" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="216.75" x2="182" y1="1401.75" y2="1401.75"/><line style="stroke:#000000;stroke-width:1.5;" x1="182" x2="182" y1="1401.75" y2="1423.75"/><polygon fill="#000000" points="178,1413.75,182,1423.75,186,1413.75,182,1417.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="313.75" x2="348.5" y1="1401.75" y2="1401.75"/><line style="stroke:#000000;stroke-width:1.5;" x1="348.5" x2="348.5" y1="1401.75" y2="1423.75"/><polygon fill="#000000" points="344.5,1413.75,348.5,1423.75,352.5,1413.75,348.5,1417.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="182" x2="182" y1="1459.35" y2="1477.35"/><line style="stroke:#000000;stroke-width:1.5;" x1="182" x2="253.25" y1="1477.35" y2="1477.35"/><polygon fill="#000000" points="243.25,1473.35,253.25,1477.35,243.25,1481.35,247.25,1477.35" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="348.5" x2="348.5" y1="1459.35" y2="1477.35"/><line style="stroke:#000000;stroke-width:1.5;" x1="348.5" x2="277.25" y1="1477.35" y2="1477.35"/><polygon fill="#000000" points="287.25,1473.35,277.25,1477.35,287.25,1481.35,283.25,1477.35" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1357.75" y2="1389.75"/><polygon fill="#000000" points="261.25,1379.75,265.25,1389.75,269.25,1379.75,265.25,1383.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1489.35" y2="1509.35"/><polygon fill="#000000" points="261.25,1499.35,265.25,1509.35,269.25,1499.35,265.25,1503.35" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1008.45" y2="1028.45"/><polygon fill="#000000" points="261.25,1018.45,265.25,1028.45,269.25,1018.45,265.25,1022.45" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="322.25" x2="620.75" y1="1576.95" y2="1576.95"/><polygon fill="#000000" points="616.75,1288.4,620.75,1278.4,624.75,1288.4,620.75,1284.4" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="620.75" x2="620.75" y1="996.45" y2="1576.95"/><line style="stroke:#000000;stroke-width:1.5;" x1="620.75" x2="277.25" y1="996.45" y2="996.45"/><polygon fill="#000000" points="287.25,992.45,277.25,996.45,287.25,1000.45,283.25,996.45" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1544.95" y2="1564.95"/><polygon fill="#000000" points="261.25,1554.95,265.25,1564.95,269.25,1554.95,265.25,1558.95" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="911.7" y2="984.45"/><polygon fill="#000000" points="261.25,974.45,265.25,984.45,269.25,974.45,265.25,978.45" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1588.95" y2="1641.698"/><polygon fill="#000000" points="261.25,1631.698,265.25,1641.698,269.25,1631.698,265.25,1635.698" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sarabun" font-size="11" lengthAdjust="spacing" textLength="87" x="269.25" y="1620.198">ใช่ (Stop/Timeout)</text><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1677.298" y2="1697.298"/><polygon fill="#000000" points="261.25,1687.298,265.25,1697.298,269.25,1687.298,265.25,1691.298" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.5;" x1="265.25" x2="265.25" y1="1732.898" y2="1752.898"/><polygon fill="#000000" points="261.25,1742.898,265.25,1752.898,269.25,1742.898,265.25,1746.898" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[969770a18f0c6e1eddad8d472d777fe1]
@startuml TaijiFlow_Activity_Diagram_UC02
' ============================================================================
' TaijiFlow AI - Activity Diagram: UC-02 Perform Training (v2.1 Simplified)
' ============================================================================
' อัปเดต: เพิ่ม Low Light Check, Ghost/Silhouette, รวม activities ให้กระชับ
' อ้างอิง: script.js (lines 124-128, 1442, 1690-1720)
' ============================================================================

skinparam defaultFontName "sarabun"
skinparam activity {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam note {
    BackgroundColor LightYellow
}

start

:ผู้ใช้เลือก "ท่าฝึก" และ "ระดับความยาก";
note right
    **Quickstart**
    มี default ให้:
    - ท่า: มือขวา-ตามเข็ม
    - ระดับ: L1 (นั่ง)
end note

partition "System Initialization" {
    if (เข้าถึงกล้องได้?) then (ไม่ได้ (E1))
        note right
            **Camera Error Types**
            - not_allowed: ไม่อนุญาต
            - not_found: ไม่พบกล้อง
            - not_readable: กล้องใช้งานอยู่
        end note
        :แจ้งเตือน Error (Toast + Overlay);
        :แสดงคำแนะนำแก้ปัญหา;
        stop
    else (ได้)
        :โหลดข้อมูลท่าต้นแบบ (JSON);
        if (พบไฟล์?) then (ไม่พบ (E2))
            :แจ้งเตือน "ไม่พบข้อมูลต้นแบบ";
            stop
        else (พบ)
            :แสดงวิดีโอและเส้นนำทาง;
        endif
    endif
}

:ผู้ใช้กดปุ่ม Start Training;

partition "Calibration (<<include>> UC-01)" {
    :เริ่ม Calibration;
    
    if (แสงเพียงพอ?) then (ไม่พอ (E3))
        :แจ้งเตือนแสงไม่เพียงพอ (Toast + TTS);
        note right
            **Low Light Detection**
            avgVisibility < 0.5
        end note
    else (พอ)
    endif
    
    :รอผู้ใช้ยืน T-Pose และบันทึกสัดส่วน;
    note right: ดูรายละเอียดใน UC-01
}

partition "Countdown & Start" {
    :แสดง Countdown 3-2-1;
    :เริ่มฝึก (Timer + UI Controls);
    note right
        **Optional Display**
        ☐ Ghost Skeleton
        ☐ Silhouette Video
    end note
}

partition "Main Training Loop (Real-time)" {
    repeat
        :รับภาพและตรวจจับท่าทาง;
        
        if (แสงน้อย && เกิน Cooldown?) then (ใช่)
            :เตือนแสงน้อย (Toast + TTS);
            note right: Cooldown = 30s
        else (ไม่)
        endif
        
        :วาด Ghost/Silhouette (ถ้าเปิด);
        
        partition "Heuristics Analysis" {
            :ตรวจสอบตามกฎ 8 ข้อ (ตาม Level);
            note right: ดูใน ActivityDiagram_Heuristics.wsd
        }

        if (พบข้อผิดพลาด?) then (ใช่)
            :แสดง Feedback (ภาพ + เสียง);
        else (ไม่)
            :แสดงผลปกติ (สีเขียว);
        endif

        :บันทึกคะแนน (Logging);

    repeat while (หยุด หรือ หมดเวลา?) is (ไม่)
    -> ใช่ (Stop/Timeout);
}

:Cleanup (Ghost, Fullscreen);
:ส่งข้อมูลไป UC-03 (View Result);

stop
@enduml

@startuml TaijiFlow_Activity_Diagram_UC02

skinparam defaultFontName "sarabun"
skinparam activity {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam note {
    BackgroundColor LightYellow
}

start

:ผู้ใช้เลือก "ท่าฝึก" และ "ระดับความยาก";
note right
    **Quickstart**
    มี default ให้:
    - ท่า: มือขวา-ตามเข็ม
    - ระดับ: L1 (นั่ง)
end note

partition "System Initialization" {
    if (เข้าถึงกล้องได้?) then (ไม่ได้ (E1))
        note right
            **Camera Error Types**
            - not_allowed: ไม่อนุญาต
            - not_found: ไม่พบกล้อง
            - not_readable: กล้องใช้งานอยู่
        end note
        :แจ้งเตือน Error (Toast + Overlay);
        :แสดงคำแนะนำแก้ปัญหา;
        stop
    else (ได้)
        :โหลดข้อมูลท่าต้นแบบ (JSON);
        if (พบไฟล์?) then (ไม่พบ (E2))
            :แจ้งเตือน "ไม่พบข้อมูลต้นแบบ";
            stop
        else (พบ)
            :แสดงวิดีโอและเส้นนำทาง;
        endif
    endif
}

:ผู้ใช้กดปุ่ม Start Training;

partition "Calibration (<<include>> UC-01)" {
    :เริ่ม Calibration;
    
    if (แสงเพียงพอ?) then (ไม่พอ (E3))
        :แจ้งเตือนแสงไม่เพียงพอ (Toast + TTS);
        note right
            **Low Light Detection**
            avgVisibility < 0.5
        end note
    else (พอ)
    endif
    
    :รอผู้ใช้ยืน T-Pose และบันทึกสัดส่วน;
    note right: ดูรายละเอียดใน UC-01
}

partition "Countdown & Start" {
    :แสดง Countdown 3-2-1;
    :เริ่มฝึก (Timer + UI Controls);
    note right
        **Optional Display**
        ☐ Ghost Skeleton
        ☐ Silhouette Video
    end note
}

partition "Main Training Loop (Real-time)" {
    repeat
        :รับภาพและตรวจจับท่าทาง;
        
        if (แสงน้อย && เกิน Cooldown?) then (ใช่)
            :เตือนแสงน้อย (Toast + TTS);
            note right: Cooldown = 30s
        else (ไม่)
        endif
        
        :วาด Ghost/Silhouette (ถ้าเปิด);
        
        partition "Heuristics Analysis" {
            :ตรวจสอบตามกฎ 8 ข้อ (ตาม Level);
            note right: ดูใน ActivityDiagram_Heuristics.wsd
        }

        if (พบข้อผิดพลาด?) then (ใช่)
            :แสดง Feedback (ภาพ + เสียง);
        else (ไม่)
            :แสดงผลปกติ (สีเขียว);
        endif

        :บันทึกคะแนน (Logging);

    repeat while (หยุด หรือ หมดเวลา?) is (ไม่)
    -> ใช่ (Stop/Timeout);
}

:Cleanup (Ghost, Fullscreen);
:ส่งข้อมูลไป UC-03 (View Result);

stop
@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>